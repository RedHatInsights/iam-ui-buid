(self.webpackChunkiam=self.webpackChunkiam||[]).push([[600],{8994:(e,t,i)=>{"use strict";i.d(t,{A:()=>a});var r=i(4848),n=(i(1680),i(316)),s=i(4450),o=i(7334);const a=()=>(0,r.jsxs)("div",{className:"disabledDiv",children:[(0,r.jsx)(o.Ay,{className:"lockIcon"}),(0,r.jsx)(n.h,{headingLevel:"h2",size:"xl",className:"pf-u-mt-lg",children:"This page is temporarily disabled or unavailable at this time"}),(0,r.jsx)(s.E,{className:"pf-u-mt-lg",children:"Please check again at a another time or reach out to Red Hat customer service for additional support"})]})},211:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>Ve});var r=i(4848),n=i(1680),s=i.n(n),o=i(8072),a=i(7851),l=i(4209),d=i(7546),c=i(4450),u=i(3539),h=i(316),p=i(3133),m=i(6780),I=i(4747),x=i(5556),v=i.n(x);class j{static OIDC_CONFIG="OIDC_CONFIG";static SAML_CONFIG="SAML_CONFIG";static IMPORT_FROM_FILE="IMPORT_FROM_FILE";static IMPORT_FROM_URL="IMPORT_FROM_URL";static IMPORT_SAML_FROM_FILE="IMPORT_SAML_FROM_FILE";static IMPORT_SAML_FROM_URL="IMPORT_SAML_FROM_URL";static IMPORT_SAML_MANUALLY="IMPORT_SAML_MANUALLY";static FINAL_STEP="FINAL_STEP";static CUSTOMER_INFORMATION="CUSTOMER_INFORMATION"}const f=({resetNextClicked:e,rootUserChoices:t,rootValidation:i,updateStatus:s})=>{const[o,a]=(0,n.useState)({protocol:{inputType:"RADIO",status:"default",message:""}});return(0,r.jsxs)(p.l,{children:[(0,r.jsx)(h.h,{headingLevel:"h2",children:"Customer Information"}),(0,r.jsx)(c.E,{className:"pf-v5-u-color-400 pf-v5-u-font-size-sm",children:"All fields are required"}),(0,r.jsxs)(m.g,{onChange:r=>{(r=>{((e,t,i,r,n,s,o)=>{o(!1),t.current||(t.current={}),t.current.selections||(t.current.selections={}),t.current.selections[e.target.id]=e.target.value;const a=(0,I.SS)(t.current.selections,i,r),l=j.CUSTOMER_INFORMATION;n.current||(n.current={}),n.current[l]=!a,!a&&t.current.selections.protocol&&s(t.current.selections.protocol)})(r,t,o,a,i,s,e)})(r)},role:"radiogroup",fieldId:"authType",label:"Choose identity provider protocol",id:"protocol",children:[(0,r.jsx)(u.s,{isDisabled:!0,name:"authType",id:"protocol",label:"OpenID Connect",value:"OIDC_CONFIG"}),(0,r.jsx)(u.s,{name:"authType",id:"protocol",label:"Saml 2.0",value:"SAML_CONFIG"})]})]})};f.propTypes={resetNextClicked:v().func,rootUserChoices:v().object,rootValidation:v().object,nextClicked:v().func,updateStatus:v().func};const g=f;var S=i(3285),C=i(9257),y=i(9937);const A=({updateStatus:e,resetNextClicked:t,rootValidation:i,rootUserChoices:s})=>{const[o,a]=(0,n.useState)(),[l,d]=(0,n.useState)({clientId:{inputType:"GENERAL",status:"default",message:""},clientSecret:{inputType:"GENERAL",status:"default",message:""},inputMethod:{inputType:"RADIO",status:"default",message:""}}),h=r=>{t(!1),s.current.selections[r.target.id]=r.target.value;const n=(0,I.SS)(s.current.selections,l,d);i.current.OIDC_CONFIG=!n,!n&&s.current.selections.inputMethod&&e(s.current.selections.inputMethod)};return(0,r.jsxs)(p.l,{children:[(0,r.jsx)(c.E,{className:"pf-v5-u-color-400 pf-v5-u-font-size-sm",children:"All fields are required"}),(0,r.jsxs)(m.g,{label:"Client ID/SP entity ID",onChange:e=>{h(e)},children:[(0,r.jsx)(S.ks,{onChange:(e,t)=>(0,I.Xr)(t,"clientId",o,a),type:"text",id:"clientId"}),(0,r.jsx)(C.E,{children:(0,r.jsx)(y.j,{children:"The Red Hat client identifier registered within the customer identity provider. Your indentity provider generates this client ID when a Red Hat client is added"})})]}),(0,r.jsxs)(m.g,{label:"Client Secret",onChange:e=>{h(e)},children:[(0,r.jsx)(S.ks,{onChange:(e,t)=>(0,I.Xr)(t,"clientSecret",o,a),type:"text",id:"clientSecret"}),(0,r.jsx)(C.E,{children:(0,r.jsx)(y.j,{children:"Enter the client secret associated with your client identifier  by your identity provider"})})]}),(0,r.jsxs)(m.g,{onChange:e=>{h(e)},label:"Load external IDP metadata from a config file or download it from a url",children:[(0,r.jsx)(u.s,{name:"inputChoice",id:"inputMethod",label:"Import from URL",value:"IMPORT_FROM_URL"}),(0,r.jsx)(u.s,{name:"inputChoice",id:"inputMethod",label:"Import from file",value:"IMPORT_FROM_FILE"})]})]})};A.propTypes={resetNextClicked:v().func,rootUserChoices:v().object,rootValidation:v().object,nextClicked:v().func,updateStatus:v().func};const L=A,R=({updateStatus:e,resetNextClicked:t,rootValidation:i,rootUserChoices:s})=>{const[o,a]=(0,n.useState)({inputMethod:{inputType:"RADIO",status:"default",message:""}});return(0,r.jsx)(p.l,{children:(0,r.jsxs)(m.g,{onChange:r=>{(r=>{t(!1),s.current.selections[r.target.id]=r.target.value;const n=(0,I.SS)(s.current.selections,o,a);i.current.SAML_CONFIG=!n,!n&&s.current.selections.inputMethod&&e(s.current.selections.inputMethod)})(r)},label:"Load external IDP metadata from a config file",isRequired:!0,children:[(0,r.jsx)(u.s,{name:"inputChoice",id:"inputMethod",label:"Import from file",value:"IMPORT_SAML_FROM_FILE"}),(0,r.jsx)(u.s,{name:"inputChoice",id:"inputMethod",label:"Enter Manually",value:"IMPORT_SAML_MANUALLY"})]})})};R.propTypes={resetNextClicked:v().func,rootUserChoices:v().object,rootValidation:v().object,nextClicked:v().func,updateStatus:v().func};const T=R;var M=i(3069),O=i(8805),_=i.n(O);const b=({updateStatus:e,rootValidation:t,rootUserChoices:i})=>{const[s,o]=(0,n.useState)("");return(0,r.jsxs)(p.l,{children:[(0,r.jsx)(h.h,{headingLevel:"h2",children:"Import from file"}),(0,r.jsx)(m.g,{label:"File Upload",isRequired:!0,children:(0,r.jsx)(M.e,{value:s.toString(),id:"text-file-with-edits-allowed",type:"text",onDataChange:(r,n)=>{o(n),_().parseString(n,((r,n)=>{r?console.error(r):n&&(e("FINAL_STEP"),i.current.selections.configFileData=n,t.current.IMPORT_FROM_FILE=!0)}))},browseButtonText:"Upload"})}),(0,r.jsx)(c.E,{className:"pf-v5-u-color-400 pf-v5-u-font-size-sm",children:"An XML formatted file detailing the configuration of your IDP, minimally including the OpenID Connect Identity provider discovery URL"})]})};b.propTypes={rootUserChoices:v().object,rootValidation:v().object,updateStatus:v().func};const F=b,N=({updateStatus:e,resetNextClicked:t,rootValidation:i,rootUserChoices:s})=>{const[o,a]=(0,n.useState)({importURL:{inputType:"DOMAIN",status:"default",message:""}});return(0,r.jsxs)(p.l,{children:[(0,r.jsx)(h.h,{headingLevel:"h2",children:"Import from URL"}),(0,r.jsxs)(m.g,{label:"URL",children:[(0,r.jsx)(S.ks,{type:"text",id:"importURL",onChange:r=>{(r=>{t(!1),s.current.selections[r.currentTarget.id]=r.currentTarget.value;const n=(0,I.SS)(s.current.selections,o,a);i.current.IMPORT_FROM_URL=!n,n||e(j.FINAL_STEP)})(r)}}),(0,r.jsx)(C.E,{children:(0,r.jsx)(y.j,{children:"import metadata from a remote identity provider discovery descriptor"})})]})]})};N.propTypes={resetNextClicked:v().func,rootUserChoices:v().object,rootValidation:v().object,nextClicked:v().func,updateStatus:v().func};const E=N;var D=i(5886),U=i(1864),k=i(2543),P=i.n(k),w=i(6454);function G(e,...t){if(!e)return"";let i=e.replace(/%s|%d/g,(e=>{const i=t.shift();return String(i)}));return i=i.replace(/{(?:\d+)}/g,((e,i)=>{const r=t[parseInt(i,10)];return void 0!==r?String(r):e})),i}class ${static ENTITY_ID="@_entityID";static BINDING="@_Binding";static LOCATION="@_Location";static KEY_INFO="KeyInfo";static X509_DATA="X509Data";static X509_CERTIFICATE="X509Certificate";static DS_KEY_INFO="ds:KeyInfo";static DS_X509_DATA="ds:X509Data";static DS_X509_CERTIFICATE="ds:X509Certificate";static HTTP_POST_BINDING="urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST";static HTTP_REDIRECT_BINDING="urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Redirect"}const z="identityProviderEntityId",V="authenticationRequestsUrl",H="x509Certificate",X="ServiceProviderEntityId";class q{static INVALID_OR_MISSING_DATA="Invalid or missing data";static SUCCESS_MSG="loaded successfully!";static FILE_SUCCESSFULLY_LOADED="%s "+q.SUCCESS_MSG+" (size: %dK)";static FILE_PARSING_ERROR="Error parsing XML: %s";static INVALID_FILE_TYPE="Invalid file type. Only XML files are allowed.";static MALICIOUS_FILE_DETECTED="Error: Invalid XML document.";static FILE_READ_ERROR="Error reading file";static SAML_XML_REQUIREMENTS="Upload a XML file with your IDP configuration. Max file size allowed is %d K";static FILE_TOO_LARGE="Must be a XML file no larger than %d KB"}const Y=(0,n.forwardRef)((({updateStatus:e,resetNextClicked:t,rootValidation:i,rootUserChoices:s,maxKBSize:o},a)=>{const l=["text/xml"],[d,c]=(0,n.useState)(null),[u,h]=(0,n.useState)(""),[p,I]=(0,n.useState)(""),[x,v]=(0,n.useState)(null),[f,g]=(0,n.useState)(null),[S,A]=(0,n.useState)(!1),[L,R]=(0,n.useState)(!1),[T,O]=(0,n.useState)(!1);function _(){c(null),h(""),I(""),g(""),v(""),A(!1)}return(0,n.useImperativeHandle)(a,(()=>({getFile:()=>d}))),(0,r.jsxs)(m.g,{fieldId:"xml-file-with-restrictions",children:[(0,r.jsx)(M.e,{id:"xml-file-with-restrictions",type:"text",value:u,filename:p,filenamePlaceholder:"Drag and drop the SAML metadata file or upload one",onFileInputChange:(r,n)=>{if(_(),I(n.name),n){const r=new FileReader;r.onerror=()=>{O(!1),v(q.FILE_READ_ERROR)},r.onload=r=>{const a=r.target?.result;!function(e){return e.includes("<!DOCTYPE")||e.includes("<!ENTITY")||e.includes("SYSTEM")||(e.match(/<!ENTITY/gu)||[]).length>5||e.includes("&")&&!/&[a-zA-Z0-9]+;/u.test(e)}(a)?function(e){return l.includes(e.type)?e.size>1024*o&&(A(!0),!0):(v(q.INVALID_FILE_TYPE),g(null),!0)}(n)||function(r,n){t(!1);try{const t=new w.XMLParser({ignoreAttributes:!1,allowBooleanAttributes:!0,attributeNamePrefix:"@_",parseAttributeValue:!0,ignorePiTags:!0}).parse(r),o=t?.EntityDescriptor?.IDPSSODescriptor?.KeyDescriptor||[],a=t?.EntityDescriptor?.IDPSSODescriptor?.SingleSignOnService,l=function(e){return e?.EntityDescriptor?.[$.ENTITY_ID]?e.EntityDescriptor[$.ENTITY_ID]:null}(t),d=function(e){if(e||Array.isArray(e)){const t=e.find((e=>e[$.BINDING]===$.HTTP_POST_BINDING)),i=e.find((e=>e[$.BINDING]===$.HTTP_REDIRECT_BINDING));if(t?.[$.LOCATION])return t[$.LOCATION];if(i?.[$.LOCATION])return i[$.LOCATION]}return null}(a),u=function(e){const t=new Set;if(e)for(const i of Array.isArray(e)?e:[e]){const e=i?.[$.KEY_INFO]?.[$.X509_DATA],r=i?.[$.DS_KEY_INFO]?.[$.DS_X509_DATA];let n=[];e?n=Array.isArray(e?.[$.X509_CERTIFICATE])?e[$.X509_CERTIFICATE]:[e?.[$.X509_CERTIFICATE]]:r&&(n=Array.isArray(r?.[$.DS_X509_CERTIFICATE])?r[$.DS_X509_CERTIFICATE]:[r?.[$.DS_X509_CERTIFICATE]]);for(const e of n)e&&t.add(e)}return t}(o);if(!function(e,t,i){return!(!P().isString(e)||!P().isString(t)||0===i.size||0===e.length||0===t.length)}(l,d,u))throw new Error(q.INVALID_OR_MISSING_DATA);s.current.selections[z]=l,s.current.selections[V]=d;const h=u.values().next();s.current.selections[H]=h.value,i.current.IMPORT_SAML_FROM_FILE=!0,i.current.IMPORT_SAML_FROM_URL=!1,e(j.FINAL_STEP),A(!1),c(n),v(null),g(G(q.FILE_SUCCESSFULLY_LOADED,n.name,(n.size/1024).toFixed(2))),O(!0)}catch(e){O(!1),v(G(q.FILE_PARSING_ERROR,e.message))}}(a,n):(O(!1),v(q.MALICIOUS_FILE_DETECTED))},r.readAsText(n)}},onDataChange:(e,t)=>{h(t)},onReadStarted:(e,t)=>{v(""),g("")},onReadFinished:(e,t)=>{R(!0)},onClearClick:e=>{_(),R(!1)},dropzoneProps:{accept:{"text/xml":[".xml"]},maxSize:1024*o,onDropRejected:()=>{A(!0)}},validated:S?"error":"default",browseButtonText:"Upload",hideDefaultPreview:!0}),(0,r.jsx)(U.e,{children:(0,r.jsxs)(C.E,{children:[(0,r.jsx)(y.j,{variant:S?"error":"default",children:G(S?q.FILE_TOO_LARGE:q.SAML_XML_REQUIREMENTS,o)}),(f||x)&&(0,r.jsx)(y.j,{variant:x?"error":"success",children:x??f})]})}),(0,r.jsx)("div",{className:"xml-highlighter",children:T&&u&&(0,r.jsx)(D.Q,{toggleText:L?"Show less":"Show more",onToggle:(e,t)=>{R(t)},isExpanded:L,children:(0,r.jsx)("div",{className:"highlighter-panel",children:u})})})]})}));Y.displayName="SamlMetadataFile",Y.propTypes={maxKBSize:v().number.isRequired};const B=({updateStatus:e,resetNextClicked:t,rootValidation:i,rootUserChoices:s})=>{const[o,a]=(0,n.useState)();return(0,n.useEffect)((()=>{a((0,r.jsx)(Y,{updateStatus:e,resetNextClicked:t,rootValidation:i,rootUserChoices:s,maxKBSize:100}))}),[]),(0,r.jsxs)(p.l,{children:[(0,r.jsx)(h.h,{headingLevel:"h2",children:"Import from file"}),(0,r.jsx)(m.g,{label:"File Upload",isRequired:!0,children:o})]})};B.propTypes={rootUserChoices:v().object,rootValidation:v().object,updateStatus:v().func};const K=B,W=({updateStatus:e,resetNextClicked:t,rootValidation:i,rootUserChoices:s})=>{const[o,a]=(0,n.useState)({importURL:{inputType:"DOMAIN",status:"default",message:""}});return(0,r.jsxs)(p.l,{children:[(0,r.jsx)(h.h,{headingLevel:"h2",children:"Import from URL"}),(0,r.jsxs)(m.g,{label:"URL",children:[(0,r.jsx)(S.ks,{type:"text",id:"importURL",onChange:r=>{(r=>{t(!1),s.current.selections[r.currentTarget.id]=r.currentTarget.value;const n=(0,I.SS)(s.current.selections,o,a);i.current.IMPORT_SAML_FROM_URL=!n,n||e(j.FINAL_STEP)})(r)}}),(0,r.jsx)(C.E,{children:(0,r.jsx)(y.j,{children:"import metadata from a remote identity provider discovery descriptor"})})]})]})};W.propTypes={resetNextClicked:v().func,rootUserChoices:v().object,rootValidation:v().object,nextClicked:v().func,updateStatus:v().func};const J=W;var Z=i(5843);const Q=({updateStatus:e,resetNextClicked:t,rootValidation:i,rootUserChoices:s})=>{const[o,a]=(0,n.useState)(),[l,d]=(0,n.useState)({identityProviderEntityId:{inputType:"DOMAIN",status:"default",message:""},authenticationRequestsUrl:{inputType:"DOMAIN",status:"default",message:""},x509Certificate:{inputType:"GENERAL",status:"default",message:""}}),c=r=>{t(!1),s.current.selections[r.target.id]=r.target.value;const n=(0,I.SS)(s.current.selections,l,d);i.current.IMPORT_SAML_MANUALLY=!n,n||e("FINAL_STEP")};return(0,r.jsxs)(p.l,{children:[(0,r.jsxs)(m.g,{label:"Identity Provider Entity ID",isRequired:!0,onChange:e=>{c(e)},children:[(0,r.jsx)(C.E,{children:(0,r.jsx)(y.j,{children:"The entityID used to validate the Issuer for received SAML assertions."})}),(0,r.jsx)(S.ks,{onChange:e=>{(0,I.Xr)(e.currentTarget.value,z,o,a)},type:"text",id:z})]}),(0,r.jsxs)(m.g,{label:"Authentication Request URL",isRequired:!0,onChange:e=>{c(e)},children:[(0,r.jsx)(C.E,{children:(0,r.jsx)(y.j,{children:"The URL that sends SAML authentication requests"})}),(0,r.jsx)(S.ks,{onChange:e=>{(0,I.Xr)(e.currentTarget.value,V,o,a)},type:"text",id:V})]}),(0,r.jsxs)(m.g,{label:"Service Provider Entitiy ID",isRequired:!0,onChange:e=>{c(e)},children:[(0,r.jsx)(C.E,{children:(0,r.jsx)(y.j,{children:"The URL that sends SAML authentication requests"})}),(0,r.jsx)(S.ks,{onChange:e=>{(0,I.Xr)(e.currentTarget.value,V,o,a)},type:"text",id:X})]}),(0,r.jsxs)(m.g,{label:"x509 Certificate",isRequired:!0,onChange:e=>{c(e)},children:[(0,r.jsx)(C.E,{children:(0,r.jsx)(y.j,{children:"A PEM certificate that is used to check for signatures."})}),(0,r.jsx)(Z.fs,{onChange:e=>{(0,I.Xr)(e.currentTarget.value,H,o,a)},resizeOrientation:"vertical",type:"text",id:H})]})]})};var ee=i(6165),te=i(881);const ie=({accessToken:e})=>{const[t,i]=(0,n.useState)(""),s=(0,te.A)(),o=e=>(0,I.Gw)(s)+e;return(0,n.useEffect)((()=>{i((0,I.I)(e))}),[]),(0,r.jsxs)(p.l,{children:[(0,r.jsx)(h.h,{headingLevel:"h2",children:"Configure URLs"}),(0,r.jsx)(c.E,{className:"pf-v5-u-color-400 pf-v5-u-font-size-sm",children:"Some Identity Provider Services require additional configuration when enabling third party single sign on. Please review the following information and verify that these are filled in where required in your company IDP."}),(0,r.jsx)(m.g,{label:"Metadata URL",children:(0,r.jsx)(ee.Ck,{isReadOnly:!0,clickTip:"copied",children:o(`broker/${t}/endpoint/descriptor`)})}),(0,r.jsx)(m.g,{label:"Redirect URL or ACS (Assertion Consumption Service) URL",children:(0,r.jsx)(ee.Ck,{isReadOnly:!0,clickTip:"copied",children:o(`broker/${t}/endpoint`)})})]})};var re=i(4091),ne=i(168),se=i(9915),oe=i(7993),ae=i(7877),le=i(4461),de=i(1976),ce=i(9202),ue=i(8472),he=i(1358),pe=i(358);const me=({oidcData:e})=>{const t=(0,te.A)(),i=(0,I.Gw)(t);return(0,r.jsxs)(p.l,{children:[(0,r.jsx)(se.F,{variant:"info",isInline:!0,title:"This page currently shows a read-only version of your configuration.",children:(0,r.jsx)("p",{children:"Forthcoming enhancements will provide the ability to edit."})}),(0,r.jsxs)(h.h,{headingLevel:"h1",children:[e.displayName,e.enabled?(0,r.jsx)(ae.J,{color:"green",icon:(0,r.jsx)(ce.Ay,{}),className:"pf-v5-u-ml-md",children:"Enabled"}):(0,r.jsx)(ae.J,{color:"grey",icon:(0,r.jsx)(ue.Ay,{}),className:"pf-v5-u-ml-md",children:"Disabled"})]}),(0,r.jsx)(m.g,{label:"Issuer",fieldId:"oidc-issuer",labelIcon:(0,r.jsx)(le.A,{triggerAction:"hover",bodyContent:(0,r.jsx)("div",{children:"The issuer is used to validate tokens generated by the identity provider and allows additional security for your organization. This value is optional but recommended."}),children:(0,r.jsx)(oe.$n,{variant:"plain",type:"button",onClick:e=>e.preventDefault(),className:`customPopover ${pe.A.formGroupLabelHelp}`,children:(0,r.jsx)(he.Ay,{})})}),children:(0,r.jsx)(S.ks,{isDisabled:!0,type:"text",id:"oidc-issuer",name:"oidc-issuer",value:e.issuerUrl})}),(0,r.jsxs)(m.g,{label:"Client ID",fieldId:"oidc-client-id",labelIcon:(0,r.jsx)(le.A,{triggerAction:"hover",bodyContent:(0,r.jsx)("div",{children:"The client ID registered with the identity provider."}),children:(0,r.jsx)(oe.$n,{variant:"plain",type:"button",onClick:e=>e.preventDefault(),className:`customPopover ${pe.A.formGroupLabelHelp}`,children:(0,r.jsx)(he.Ay,{})})}),children:[(0,r.jsx)(S.ks,{isDisabled:!0,type:"text",id:"oidc-client-id",name:"oidc-client-id",value:e.clientId}),(0,r.jsx)(U.e,{children:(0,r.jsx)(C.E,{children:(0,r.jsx)(y.j,{children:"Spaces and special characters are allowed here."})})})]}),(0,r.jsx)(m.g,{label:"Client Secret",fieldId:"oidc-client-secret",labelIcon:(0,r.jsx)(le.A,{triggerAction:"hover",bodyContent:(0,r.jsx)("div",{children:"The client secret registered with the identity provider."}),children:(0,r.jsx)(oe.$n,{variant:"plain",type:"button",onClick:e=>e.preventDefault(),className:`customPopover ${pe.A.formGroupLabelHelp}`,children:(0,r.jsx)(he.Ay,{})})}),children:(0,r.jsx)(S.ks,{isDisabled:!0,type:"text",id:"oidc-client-secret",name:"oidc-client-secret",value:e.clientSecret})}),(0,r.jsx)(m.g,{label:"Authorization URL",fieldId:"oidc-authorization-url-id",labelIcon:(0,r.jsx)(le.A,{triggerAction:"hover",bodyContent:(0,r.jsx)("div",{children:"URL that performs authentication of the end-user."}),children:(0,r.jsx)(oe.$n,{variant:"plain",type:"button",onClick:e=>e.preventDefault(),className:`customPopover ${pe.A.formGroupLabelHelp}`,children:(0,r.jsx)(he.Ay,{})})}),children:(0,r.jsx)(S.ks,{isDisabled:!0,type:"text",id:"oidc-token-url-id",name:"oidc-token-url-id",value:e.authorizationUrl})}),(0,r.jsx)(m.g,{label:"Token URL",fieldId:"authorization-url",labelIcon:(0,r.jsx)(le.A,{triggerAction:"hover",bodyContent:(0,r.jsx)("div",{children:"URL where an authorization code can be exchanged for an access token and ID token."}),children:(0,r.jsx)(oe.$n,{variant:"plain",type:"button",onClick:e=>e.preventDefault(),className:`customPopover ${pe.A.formGroupLabelHelp}`,children:(0,r.jsx)(he.Ay,{})})}),children:(0,r.jsx)(S.ks,{isDisabled:!0,type:"text",id:"authorization-url",name:"authorization-url",value:e.tokenUrl})}),(0,r.jsx)(h.h,{headingLevel:"h3",children:"URLs required for identity provider configuration"}),(0,r.jsx)(de.n,{children:(0,r.jsx)(c.E,{component:c.Y.p,children:"Use these URLs to assist in completing setup within your identity provider."})}),(0,r.jsx)(m.g,{label:"Service provider metadata URL",fieldId:"metadata-url",labelIcon:(0,r.jsx)(le.A,{triggerAction:"hover",bodyContent:(0,r.jsx)("div",{children:"Service provider metadata used to integrate sso.redhat.com with your identity provider."}),children:(0,r.jsx)(oe.$n,{variant:"plain",type:"button",onClick:e=>e.preventDefault(),className:`customPopover ${pe.A.formGroupLabelHelp}`,children:(0,r.jsx)(he.Ay,{})})}),children:(0,r.jsx)(ee.Ck,{type:"text",id:"metadata-url",name:"metadata-url",isReadOnly:!0,children:`${i}.well-known/openid-configuration`})}),(0,r.jsx)(m.g,{label:"Redirect URL / Assertion Consumption Service (ACS) URL",fieldId:"redirect-url",labelIcon:(0,r.jsx)(le.A,{triggerAction:"hover",bodyContent:(0,r.jsx)("div",{children:"The redirect URL to use when configuring your identity provider. This represents your company’s SSO Portal where users authenticate to Red Hat."}),children:(0,r.jsx)(oe.$n,{variant:"plain",type:"button",onClick:e=>e.preventDefault(),className:`customPopover ${pe.A.formGroupLabelHelp}`,children:(0,r.jsx)(he.Ay,{})})}),children:(0,r.jsx)(ee.Ck,{type:"text",id:"redirect-url",name:"redirect-url",isReadOnly:!0,children:`${i}broker/${e.idpAlias}/endpoint`})}),(0,r.jsxs)(re.l,{children:[(0,r.jsx)(le.A,{triggerAction:"hover","aria-label":"Hoverable popover",headerContent:(0,r.jsx)("div",{children:"Read-Only"}),bodyContent:(0,r.jsx)("div",{children:"This page currently shows a read-only version of your configuration. Forthcoming enhancements will provide the ability to edit."}),footerContent:"",children:(0,r.jsx)(ne.a,{children:(0,r.jsx)(oe.$n,{isDisabled:!0,children:"Save"})})}),(0,r.jsx)(ne.a,{children:(0,r.jsx)(oe.$n,{isDisabled:!0,variant:"link",children:"Cancel"})})]})]})};var Ie=i(8352),xe=i(7881);const ve=(0,n.createContext)(void 0),je=()=>{const e=(0,n.useContext)(ve);if(!e)throw new Error("useTestingContext must be used within a IdPTestingContext");return e},fe=({children:e})=>{const[t,i]=(0,n.useState)(!1);return(0,r.jsx)(ve.Provider,{value:{isModalVisible:t,toggleModalVisibility:()=>{i((e=>!e))}},children:e})},ge=({idpAlias:e})=>{const t=(0,te.A)(),i=(0,I.Gw)(t),{isModalVisible:s,toggleModalVisibility:o}=je(),[a,l]=(0,n.useState)(!1),[d,c]=(0,n.useState)("info"),[u,h]=(0,n.useState)(""),[p,m]=(0,n.useState)(""),[x,v]=(0,n.useState)(""),j=()=>{l(!0),c("info"),h("Identity Provider Testing"),m("Select the prompt below to begin testing. This will open a pop-up window that will authenticate with your configured identity provider. If you are not currently signed into this identity provider, please do so in the pop-up window. Please be sure that pop-ups are allowed."),v("")};(0,n.useEffect)((()=>{j()}),[]);const f=()=>{o(),j()};return(0,r.jsxs)(Ie.a,{titleIconVariant:d,title:u,isOpen:s,variant:Ie.d.medium,onClose:f,actions:[(0,r.jsx)(oe.$n,{isDisabled:!a,variant:"primary",onClick:()=>{l(!1),m("Please complete identity provider testing in pop-up window"),window.open((()=>{const t={idp_alias:e},r=encodeURIComponent(JSON.stringify(t));return`${i}protocol/openid-connect/auth?client_id=idp-connectivity-testing-login-client&redirect_uri=${i}&response_mode=query&response_type=code&scope=openid&state=${r}`})(),"RH IdP Integration Testing","width=600,height=600,resizable,scrollbars"),window.addEventListener("message",(e=>{i.includes(e.origin)&&(!0===e.data.success?(c("success"),h("Test successful. Enable for your organization?"),m("Enabling will require users on your organization to authenticate through your newly-configured identity provider on their next authentication. If you do not enable this now, you'll have to re-test again before being allowed to enable this identity provider.")):(c("danger"),h("Test failed"),m("Try looking over some common mistakes and then re-testing. If that doesn’t help, contact support. See additional information below:"),v(e.data.errorMsg)))}))},children:"Begin Test"},"Begin test"),(0,r.jsx)(oe.$n,{variant:"link",onClick:f,children:"Cancel"},"dismiss")],children:[p,(0,r.jsx)(xe.N,{hidden:!x,children:x})]})},Se=({samlData:e,milestoneTwoEnabled:t})=>{const i=(0,te.A)(),n=(0,I.Gw)(i),{isModalVisible:s,toggleModalVisibility:o}=je();return(0,r.jsxs)(p.l,{children:[(0,r.jsx)(se.F,{variant:"info",isInline:!0,title:"This page currently shows a read-only version of your configuration.",children:(0,r.jsx)("p",{children:"Forthcoming enhancements will provide the ability to edit."})}),(0,r.jsxs)(h.h,{headingLevel:"h1",className:"pf-v5-u-display-flex",children:[e.displayName,e.enabled?(0,r.jsx)(ae.J,{color:"green",icon:(0,r.jsx)(ce.Ay,{}),className:"pf-v5-u-ml-md",children:"Enabled"}):(0,r.jsx)(ae.J,{color:"grey",icon:(0,r.jsx)(ue.Ay,{}),className:"pf-v5-u-ml-md",children:"Disabled"})]}),(0,r.jsxs)(m.g,{label:"Identity provider entityID",fieldId:"saml-entity-id",labelIcon:(0,r.jsx)(le.A,{triggerAction:"hover",bodyContent:(0,r.jsx)("div",{children:"The entityID used to validate the Issuer for received SAML assertions."}),children:(0,r.jsx)(oe.$n,{variant:"plain",type:"button",onClick:e=>e.preventDefault(),className:`customPopover ${pe.A.formGroupLabelHelp}`,children:(0,r.jsx)(he.Ay,{})})}),children:[(0,r.jsx)(S.ks,{isDisabled:!0,type:"text",id:"saml-entity-id",name:"saml-entity-id",value:e.identityProviderEntityId}),(0,r.jsx)(U.e,{children:(0,r.jsx)(C.E,{children:(0,r.jsx)(y.j,{children:"The entityID attribute is in your SAML metadata configuration"})})})]}),(0,r.jsxs)(m.g,{label:"Single sign-on authentication request URL",fieldId:"saml-authn-request-url",children:[(0,r.jsx)(S.ks,{isDisabled:!0,type:"text",id:"saml-authn-request-url",name:"saml-authn-request-url",value:e.authenticationRequestsUrl}),(0,r.jsx)(U.e,{children:(0,r.jsx)(C.E,{children:(0,r.jsx)(y.j,{children:"The URL that sends SAML authentication requests"})})})]}),(0,r.jsxs)(m.g,{label:"x509 certificate",fieldId:"saml-x509-certificate",labelIcon:(0,r.jsx)(le.A,{triggerAction:"hover",bodyContent:(0,r.jsx)("div",{children:"A PEM certificate that is used to check for signatures."}),children:(0,r.jsx)(oe.$n,{variant:"plain",type:"button",onClick:e=>e.preventDefault(),className:`customPopover ${pe.A.formGroupLabelHelp}`,children:(0,r.jsx)(he.Ay,{})})}),children:[(0,r.jsx)(Z.fs,{resizeOrientation:"vertical",isDisabled:!0,type:"text",id:"saml-authn-request-url",name:"saml-authn-request-url",value:e.x509Certificate}),(0,r.jsx)(U.e,{children:(0,r.jsx)(C.E,{children:(0,r.jsxs)(y.j,{children:["A Base64 encoded certificate must not include the certificate preamble/ending:",(0,r.jsx)("code",{children:"(-----BEGIN/END CERTIFICATE-----)"})]})})})]}),(0,r.jsx)(h.h,{headingLevel:"h3",children:"URLs required for identity provider configuration"}),(0,r.jsx)(de.n,{children:(0,r.jsx)(c.E,{component:c.Y.p,children:"Use these URLs to assist in completing setup within your identity provider."})}),(0,r.jsx)(m.g,{label:"Service provider metadata URL",fieldId:"service-provider-metadata-url",labelIcon:(0,r.jsx)(le.A,{triggerAction:"hover",bodyContent:(0,r.jsx)("div",{children:"Service provider metadata used to integrate sso.redhat.com with your identity provider."}),children:(0,r.jsx)(oe.$n,{variant:"plain",type:"button",onClick:e=>e.preventDefault(),className:`customPopover ${pe.A.formGroupLabelHelp}`,children:(0,r.jsx)(he.Ay,{})})}),children:(0,r.jsx)(ee.Ck,{type:"text",id:"service-provider-metadata-url",name:"service-provider-metadata-url",isReadOnly:!0,children:`${n}broker/${e.idpAlias}/endpoint/descriptor`})}),(0,r.jsx)(m.g,{label:"Redirect URL / Assertion Consumption Service (ACS) URL",fieldId:"redirect-url",labelIcon:(0,r.jsx)(le.A,{triggerAction:"hover",bodyContent:(0,r.jsx)("div",{children:"The redirect URL to use when configuring your identity provider. This represents your company’s SSO Portal where users authenticate to Red Hat."}),children:(0,r.jsx)(oe.$n,{variant:"plain",type:"button",onClick:e=>e.preventDefault(),className:`customPopover ${pe.A.formGroupLabelHelp}`,children:(0,r.jsx)(he.Ay,{})})}),children:(0,r.jsx)(ee.Ck,{type:"text",id:"redirect-url",name:"redirect-url",isReadOnly:!0,children:`${n}broker/${e.idpAlias}/endpoint`})}),!t&&(0,r.jsxs)(re.l,{children:[(0,r.jsx)(le.A,{triggerAction:"hover","aria-label":"Hoverable popover",headerContent:(0,r.jsx)("div",{children:"Read-Only"}),bodyContent:(0,r.jsx)("div",{children:"This page currently shows a read-only version of your configuration. Forthcoming enhancements will provide the ability to edit."}),footerContent:"",children:(0,r.jsx)(ne.a,{children:(0,r.jsx)(oe.$n,{isDisabled:!0,children:"Save"})})}),(0,r.jsx)(ne.a,{children:(0,r.jsx)(oe.$n,{isDisabled:!0,variant:"link",children:"Cancel"})})]}),t&&(0,r.jsxs)(re.l,{hidden:!t,children:[(0,r.jsx)(ne.a,{children:(0,r.jsx)(oe.$n,{isDisabled:Boolean(e.enabled),onClick:()=>{o()},children:"Test and enable"})}),(0,r.jsx)(ne.a,{children:(0,r.jsx)(oe.$n,{isDisabled:!0,variant:"link",children:"Delete identity provider"})}),s&&(0,r.jsx)(ge,{idpAlias:e.idpAlias})]})]})};var Ce=i(915),ye=i(983),Ae=i(932);const Le=({responseData:e,milestoneTwoFeaturesEnabled:t})=>{const[i,o]=(0,n.useState)((0,r.jsx)(Ae.y,{}));return(0,n.useEffect)((()=>{"saml-improved"===e.providerId?o((0,r.jsx)(Se,{samlData:e,milestoneTwoEnabled:t})):"oidc-improved"===e.providerId&&o((0,r.jsx)(me,{oidcData:e}))}),[e]),(0,r.jsx)(s().Fragment,{children:(0,r.jsx)(fe,{children:(0,r.jsx)(Ce.Z,{isCompact:!1,isLarge:!0,children:(0,r.jsx)(ye.b,{children:i})})})})};var Re=i(3913);const Te=({setupIDP:e,wizardEnabled:t})=>(0,r.jsxs)("div",{className:"notSetupDiv",children:[(0,r.jsx)(Re.Ay,{className:"cubesIcon"}),(0,r.jsx)(h.h,{headingLevel:"h2",size:"xl",className:"pf-v5-u-mt-lg",children:"No Identity Providers are currently configured"}),(0,r.jsxs)(c.E,{className:"pf-v5-u-mt-md",children:["Your organization has not integrated an identity provider. More information is available ",(0,r.jsx)(oe.$n,{variant:"link",target:"_blank",href:"https://access.redhat.com/announcements/7039300",component:"a",isInline:!0,children:"here"})]}),(0,r.jsx)(oe.$n,{className:t?"pf-v5-u-mt-lg":"hideFeature",variant:"primary",onClick:e,children:"Set up an identity provider"})]});Te.propTypes={setupIDP:v().func};const Me=Te;var Oe=i(4698),_e=i(4501);const be=({valid:e,next:t,previous:i})=>{const{goToNextStep:n,goToPrevStep:s}=(0,Oe.CV)();return(0,r.jsxs)(_e.W,{children:[(0,r.jsx)(oe.$n,{onClick:()=>{e?n():t(!0)},disabled:e,children:"Next"}),(0,r.jsx)(oe.$n,{variant:"secondary",onClick:()=>{s(),i()},children:"Back"})]})};var Fe=i(3543);const Ne=({userChoiceData:e,previous:t,accessToken:i})=>{const{goToNextStep:n,goToPrevStep:o}=(0,Oe.CV)(),[a,l]=s().useState(!1),[d,c]=s().useState(),u=e=>{c((0,r.jsx)(se.F,{variant:"danger",isInline:!0,isPlain:!0,title:e,timeout:8e3,onTimeout:()=>{c([])}}))},h=(0,I.J1)((0,te.A)(),"apis/organizations/v1/identity-providers");return(0,r.jsxs)(_e.W,{children:[(0,r.jsx)(oe.$n,{onClick:()=>{console.log("Submitting with this data: "+JSON.stringify(e,null,2)),l(!0),fetch(h,{method:"POST",referrerPolicy:"no-referrer",headers:{"Content-Type":"application/json",Authorization:"Bearer "+i},body:JSON.stringify({providerId:"OIDC_CONFIG"===e.current.selections.protocol?"oidc-improved":"saml-improved",identityProviderEntityId:e.current.selections[z],authenticationRequestsUrl:e.current.selections[V],serviceProviderEntityId:e.current.selections[X],x509Certificate:e.current.selections[H]})}).then((e=>e.json())).then((e=>{e.error||e.error_description?(console.error("Error Type: "+e.error),console.error("Error Message: "+e.error_description),u("Failed to upload config: "+e.error_description),l(!1)):(l(!1),n())})).catch((e=>{u(e.toString()),console.error("Error: ",e),l(!1)}))},isLoading:a,children:"Next"}),(0,r.jsx)(oe.$n,{variant:"secondary",onClick:()=>{o(),t()},children:"Back"}),(0,r.jsx)(Fe._,{isLiveRegion:!0,className:"pf-v5-u-mt-sm",children:d})]})};Ne.propTypes={userChoiceData:v().object};const Ee=Ne,De=()=>(0,r.jsx)(_e.W,{children:(0,r.jsx)(oe.$n,{onClick:()=>{window.location.reload()},children:"Submit"})});var Ue=i(7565),ke=i(1903);const Pe=({accessToken:e})=>{const t=(0,n.useRef)({selections:{}}),[i,s]=(0,n.useState)(!1),[u,h]=(0,n.useState)(!0),[p,m]=(0,n.useState)(!0),x=(0,I.J1)((0,te.A)(),"apis/organizations/v1/identity-providers"),[v,f]=(0,n.useState)({idpAlias:"",providerId:"",displayName:"",enabled:""}),S=(0,ke.useFlag)("iamconsole.IDPIntegration.wizardFlowEnabled");(0,n.useEffect)((()=>{fetch(x,{method:"GET",referrerPolicy:"no-referrer",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e}}).then((e=>e.json())).then((e=>{"oidc-improved"===e.providerId||"saml-improved"===e.providerId?(f(e),h(!1),s(!0)):e.error&&(h(!1),s(!1))})).catch((e=>{console.error("Error: ",e),h(!1)}))}),[]);const C=(0,n.useRef)({CUSTOMER_INFORMATION:!1,OIDC_CONFIG:!1,SAML_CONFIG:!1,IMPORT_FROM_FILE:!1,IMPORT_FROM_URL:!1,IMPORT_SAML_FROM_FILE:!1,IMPORT_SAML_FROM_URL:!1,IMPORT_SAML_MANUALLY:!1}),[y,A]=(0,n.useState)({currentState:j.CUSTOMER_INFORMATION,previousState:""}),[R,M]=(0,n.useState)({hideCustomerInformation:!1,hideOIDC:!0,hideSAML:!0,hideImportFromURL:!0,hideImportFromFile:!0,hideImportManually:!0,hideFinish:!0}),[O,_]=(0,n.useState)(!1),b=e=>{let t;switch(e){case j.OIDC_CONFIG:t={...R},t.hideOIDC=!1,t.hideSAML=!0,M(t),A({currentState:e,previousState:j.CUSTOMER_INFORMATION});break;case j.SAML_CONFIG:t={...R},t.hideSAML=!1,t.hideOIDC=!0,M(t),A({currentState:e,previousState:j.CUSTOMER_INFORMATION});break;case j.IMPORT_FROM_FILE:t={...R},t.hideImportFromFile=!1,M(t),A({currentState:e,previousState:j.OIDC_CONFIG});break;case j.IMPORT_FROM_URL:t={...R},t.hideImportFromURL=!1,M(t),A({currentState:e,previousState:j.OIDC_CONFIG});break;case j.IMPORT_SAML_FROM_FILE:t={...R},t.hideImportFromFile=!1,M(t),A({currentState:e,previousState:j.SAML_CONFIG});break;case j.IMPORT_SAML_MANUALLY:t={...R},t.hideImportManually=!1,M(t),A({currentState:e,previousState:"SAML_CONFIG"});break;case j.IMPORT_SAML_FROM_URL:t={...R},t.hideImportFromURL=!1,M(t),A({currentState:e,previousState:j.SAML_CONFIG});break;case j.FINAL_STEP:t={...R},t.hideFinish=!1,M(t),A({currentState:e,previousState:y.currentState});break;default:M({hideCustomerInformation:!1,hideOIDC:!0,hideSAML:!0,hideImportFromURL:!0,hideImportFromFile:!0,hideImportManually:!0,hideFinish:!0})}},N=e=>{const i=Object.keys(t.current.selections);for(let r=0;r<i.length;r++)e.includes(i[r])||delete t.current.selections[i[r]]},D=()=>{(e=>{switch(e){case j.OIDC_CONFIG:N(["protocol"]),A({currentState:e,previousState:j.CUSTOMER_INFORMATION}),M({hideCustomerInformation:!1,hideOIDC:!1,hideSAML:!0,hideImportFromURL:!0,hideImportFromFile:!0,hideImportManually:!0,hideFinish:!0});break;case j.SAML_CONFIG:N(["protocol"]),A({currentState:e,previousState:j.CUSTOMER_INFORMATION}),M({hideCustomerInformation:!1,hideOIDC:!0,hideSAML:!1,hideImportFromURL:!0,hideImportFromFile:!0,hideImportManually:!0,hideFinish:!0});break;case j.IMPORT_FROM_FILE:N(["clientId","clientSecret","inputMethod","protocol"]),A({currentState:e,previousState:j.OIDC_CONFIG}),M({hideCustomerInformation:!1,hideOIDC:!1,hideSAML:!0,hideImportFromURL:!0,hideImportFromFile:!1,hideImportManually:!0,hideFinish:!0});break;case j.IMPORT_FROM_URL:N(["clientId","clientSecret","inputMethod","protocol"]),A({currentState:e,previousState:j.OIDC_CONFIG}),M({hideCustomerInformation:!1,hideOIDC:!1,hideSAML:!0,hideImportFromURL:!1,hideImportFromFile:!0,hideImportManually:!0,hideFinish:!0});break;case j.IMPORT_SAML_FROM_URL:N(["clientId","clientSecret","inputMethod","protocol"]),A({currentState:e,previousState:j.SAML_CONFIG}),M({hideCustomerInformation:!1,hideOIDC:!0,hideSAML:!1,hideImportFromURL:!1,hideImportFromFile:!0,hideImportManually:!1,hideFinish:!0});break;case"IMPORT_SAML_MANUALLY":N(["clientId","clientSecret","inputMethod","protocol"]),A({currentState:e,previousState:"SAML_CONFIG"}),M({hideCustomerInformation:!1,hideOIDC:!0,hideSAML:!1,hideImportFromURL:!0,hideImportFromFile:!0,hideImportManually:!1,hideFinish:!0});break;case j.IMPORT_SAML_FROM_FILE:N(["clientId","clientSecret","inputMethod","protocol"]),A({currentState:e,previousState:j.SAML_CONFIG}),M({hideCustomerInformation:!1,hideOIDC:!0,hideSAML:!1,hideImportFromURL:!0,hideImportFromFile:!1,hideImportManually:!0,hideFinish:!0});break;default:N([""]),M({hideCustomerInformation:!1,hideOIDC:!0,hideSAML:!0,hideImportFromURL:!0,hideImportFromFile:!0,hideImportManually:!0,hideFinish:!0})}})(y.previousState)};return(0,r.jsxs)("div",{className:"flowPage",children:[(0,r.jsxs)(l.A,{className:"wizardHeader",children:[(0,r.jsx)(d.A,{title:"Identity Provider Integration",className:"pf-v5-u-mb-lg"}),(0,r.jsxs)(de.n,{children:["Manage identity provider integration for your organization."," ",(0,r.jsx)(c.E,{component:c.Y.a})]})]}),(0,r.jsxs)(Ue.d8,{children:[(0,r.jsx)("div",{className:u?"loadingIcon":"hiddenPage",children:(0,r.jsx)(Ae.y,{})}),(0,r.jsx)("div",{className:!u&&i?"":"hiddenPage",children:(0,r.jsx)(Le,{responseData:v,milestoneTwoFeaturesEnabled:S})}),(0,r.jsx)("div",{className:u||i||!p?"hiddenPage":"initPage",children:(0,r.jsx)(Me,{setupIDP:()=>{m(!1)},wizardEnabled:S})}),(0,r.jsx)("div",{className:i||p?"hiddenPage":"",children:(0,r.jsxs)(o.s,{onClose:()=>{},isProgressive:!0,children:[(0,r.jsx)(a.W,{id:"CUSTOMERINFORMATION",name:"Customer Information",isHidden:R.hideCustomerInformation,footer:(0,r.jsx)(be,{valid:C.current.CUSTOMER_INFORMATION,next:_,previous:D}),children:(0,r.jsx)(g,{updateStatus:b,resetNextClicked:_,rootValidation:C,rootUserChoices:t})}),(0,r.jsx)(a.W,{id:"OIDCCONFIG",name:"OIDC Configuration",isHidden:R.hideOIDC,footer:(0,r.jsx)(be,{valid:C.current.OIDC_CONFIG,next:_,previous:D}),children:(0,r.jsx)(L,{updateStatus:b,resetNextClicked:_,rootValidation:C,rootUserChoices:t})}),(0,r.jsx)(a.W,{id:"IMPORTFROMFILE",name:"Import config from file",isHidden:!(!R.hideOIDC&&!R.hideImportFromFile),footer:(0,r.jsx)(Ee,{userChoiceData:t,previous:D,accessToken:e}),children:(0,r.jsx)(F,{updateStatus:b,resetNextClicked:_,rootValidation:C,rootUserChoices:t})}),(0,r.jsx)(a.W,{id:"IMPORTFROMURL",name:"Import config from URL",isHidden:!(!R.hideOIDC&&!R.hideImportFromURL),footer:(0,r.jsx)(Ee,{userChoiceData:t,previous:D,accessToken:e}),children:(0,r.jsx)(E,{updateStatus:b,resetNextClicked:_,rootValidation:C,rootUserChoices:t})}),(0,r.jsx)(a.W,{id:"SAMLCONFIG",name:"Saml Configuration",isHidden:R.hideSAML,footer:(0,r.jsx)(be,{valid:C.current.SAML_CONFIG,next:_,previous:D}),children:(0,r.jsx)(T,{updateStatus:b,resetNextClicked:_,rootValidation:C,rootUserChoices:t})}),(0,r.jsx)(a.W,{name:"Import SAML from file",id:"IMPORTSAMLFROMFILE",isHidden:!(!R.hideSAML&&!R.hideImportFromFile),footer:(0,r.jsx)(Ee,{userChoiceData:t,previous:D,accessToken:e}),children:(0,r.jsx)(K,{updateStatus:b,resetNextClicked:_,rootValidation:C,rootUserChoices:t})}),(0,r.jsx)(a.W,{name:"Import SAML Manually",id:"IMPORTSAMLMANUALLY",isHidden:!(!R.hideSAML&&!R.hideImportManually),footer:(0,r.jsx)(Ee,{userChoiceData:t,previous:D,accessToken:e}),children:(0,r.jsx)(Q,{updateStatus:b,resetNextClicked:_,rootValidation:C,rootUserChoices:t})}),(0,r.jsx)(a.W,{id:"IMPORTSAMLFROMURL",name:"Import SAML from URL",isHidden:!(!R.hideSAML&&!R.hideImportFromURL),footer:(0,r.jsx)(Ee,{userChoiceData:t,previous:D,accessToken:e}),children:(0,r.jsx)(J,{updateStatus:b,resetNextClicked:_,rootValidation:C,rootUserChoices:t})}),(0,r.jsx)(a.W,{id:"FINALSTEP",name:"Configure URL's",isHidden:R.hideFinish,footer:(0,r.jsx)(De,{}),children:(0,r.jsx)(ie,{accessToken:e})})]})})]})]})};Pe.propTypes={accessToken:v().string};const we=Pe;var Ge=i(8994),$e=i(7334);const ze=()=>(0,r.jsxs)("div",{className:"nonAdminDiv",children:[(0,r.jsx)($e.Ay,{className:"lockIcon"}),(0,r.jsx)(h.h,{headingLevel:"h2",size:"xl",className:"pf-v5-u-mt-lg",children:"Access permissions needed"}),(0,r.jsxs)(c.E,{className:"pf-v5-u-mt-lg",children:["To access Identity Provider Integration, ask your organization administrator(s) to adjust your permissions, or visit ",(0,r.jsx)(oe.$n,{variant:"link",href:"/iam/my-user-access",target:"_blank",component:"a",isInline:!0,children:"My User Access"})," to learn more about your permissions"]}),(0,r.jsx)(oe.$n,{onClick:()=>{window.location.href="/iam/my-user-access"},className:"pf-v5-u-mt-lg",children:"Return to home page"})]}),Ve=()=>{const e=(0,te.A)();let t=null;const[i,o]=(0,n.useState)({adminUser:!1,selfServiceIDP:(0,r.jsx)(Ge.A,{})}),a=(0,ke.useFlag)("iamconsole.IDPIntegration.enabled");return(0,n.useEffect)((()=>{e?.appAction?.("identity-provider-integration"),e.auth.getToken().then((e=>{t=e,(0,I.X2)(t)?(0,I.X2)(t)&&a&&o({adminUser:!0,selfServiceIDP:(0,r.jsx)(we,{accessToken:t})}):o({adminUser:!1,selfServiceIDP:(0,r.jsx)(ze,{})})}))}),[]),(0,r.jsx)(s().Fragment,{children:i.selfServiceIDP})}},4747:(e,t,i)=>{"use strict";function r(e){const t=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/");return JSON.parse(decodeURIComponent(window.atob(t).split("").map((e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2))).join("")))}function n(e){return r(e).is_org_admin}function s(e){return r(e).org_id}function o(e,t,i,r){const n={};n[t]=e,r({...i,...n})}function a(e,t,i){let r=!1;const n={};return Object.keys(t).forEach((i=>{const s=e&&e[i],o=t[i].inputType,a=function(e,t,i){if(!e)return{status:"error",message:"This field can not be left empty"};let r,n;switch(t){case"GENERAL":n=/^[.@&]?[a-zA-Z0-9 ]+[ !.@&()]?[ a-zA-Z0-9!()]+/.test(e),r={status:n?"default":"error",message:n?"":"This text is invalid please check for uncommonly used characters"};break;case"DOMAIN":n=/(?:[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?\.)+[a-z0-9][a-z0-9-]{0,61}[a-z0-9]/g.test(e),r={status:n?"default":"error",message:n?"":"This field needs to be a valid URL"};break;default:r={status:"default",message:""}}return r}(s,o);"error"===a.status&&(r=!0),n[i]={inputType:o,status:a.status,message:a.message}})),i(n),r}i.d(t,{Gw:()=>l,I:()=>s,J1:()=>d,SS:()=>a,X2:()=>n,Xr:()=>o});const l=e=>"prod"===e.getEnvironment()?"https://sso.redhat.com/auth/realms/redhat-external/":"https://sso.stage.redhat.com/auth/realms/redhat-external/",d=(e,t)=>l(e)+t},6882:()=>{},6403:()=>{},5067:()=>{},1902:()=>{},7940:()=>{},1662:()=>{},4895:()=>{},7302:()=>{},1036:()=>{},6151:()=>{},1225:()=>{},6078:()=>{},545:()=>{},5937:()=>{},5637:()=>{},1289:()=>{},6752:()=>{},5340:()=>{},9838:()=>{}}]);
//# sourceMappingURL=../sourcemaps/Identity-Provider-Integration.d75b5675361e16c350179226f179f3cd.js.map