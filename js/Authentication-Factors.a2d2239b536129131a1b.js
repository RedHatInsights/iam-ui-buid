(self.webpackChunkiam=self.webpackChunkiam||[]).push([[244],{5322:(e,n,t)=>{"use strict";t.d(n,{c:()=>c});var a=t(8674),i=t(1680),s=t(3774);t(1537);const o={divider:"pf-v5-c-divider",modifiers:{hidden:"pf-m-hidden",hiddenOnSm:"pf-m-hidden-on-sm",visibleOnSm:"pf-m-visible-on-sm",hiddenOnMd:"pf-m-hidden-on-md",visibleOnMd:"pf-m-visible-on-md",hiddenOnLg:"pf-m-hidden-on-lg",visibleOnLg:"pf-m-visible-on-lg",hiddenOnXl:"pf-m-hidden-on-xl",visibleOnXl:"pf-m-visible-on-xl",hiddenOn_2xl:"pf-m-hidden-on-2xl",visibleOn_2xl:"pf-m-visible-on-2xl",vertical:"pf-m-vertical",insetNone:"pf-m-inset-none",insetXs:"pf-m-inset-xs",insetSm:"pf-m-inset-sm",insetMd:"pf-m-inset-md",insetLg:"pf-m-inset-lg",insetXl:"pf-m-inset-xl",inset_2xl:"pf-m-inset-2xl",inset_3xl:"pf-m-inset-3xl",horizontalOnSm:"pf-m-horizontal-on-sm",verticalOnSm:"pf-m-vertical-on-sm",insetNoneOnSm:"pf-m-inset-none-on-sm",insetXsOnSm:"pf-m-inset-xs-on-sm",insetSmOnSm:"pf-m-inset-sm-on-sm",insetMdOnSm:"pf-m-inset-md-on-sm",insetLgOnSm:"pf-m-inset-lg-on-sm",insetXlOnSm:"pf-m-inset-xl-on-sm",inset_2xlOnSm:"pf-m-inset-2xl-on-sm",inset_3xlOnSm:"pf-m-inset-3xl-on-sm",horizontalOnMd:"pf-m-horizontal-on-md",verticalOnMd:"pf-m-vertical-on-md",insetNoneOnMd:"pf-m-inset-none-on-md",insetXsOnMd:"pf-m-inset-xs-on-md",insetSmOnMd:"pf-m-inset-sm-on-md",insetMdOnMd:"pf-m-inset-md-on-md",insetLgOnMd:"pf-m-inset-lg-on-md",insetXlOnMd:"pf-m-inset-xl-on-md",inset_2xlOnMd:"pf-m-inset-2xl-on-md",inset_3xlOnMd:"pf-m-inset-3xl-on-md",horizontalOnLg:"pf-m-horizontal-on-lg",verticalOnLg:"pf-m-vertical-on-lg",insetNoneOnLg:"pf-m-inset-none-on-lg",insetXsOnLg:"pf-m-inset-xs-on-lg",insetSmOnLg:"pf-m-inset-sm-on-lg",insetMdOnLg:"pf-m-inset-md-on-lg",insetLgOnLg:"pf-m-inset-lg-on-lg",insetXlOnLg:"pf-m-inset-xl-on-lg",inset_2xlOnLg:"pf-m-inset-2xl-on-lg",inset_3xlOnLg:"pf-m-inset-3xl-on-lg",horizontalOnXl:"pf-m-horizontal-on-xl",verticalOnXl:"pf-m-vertical-on-xl",insetNoneOnXl:"pf-m-inset-none-on-xl",insetXsOnXl:"pf-m-inset-xs-on-xl",insetSmOnXl:"pf-m-inset-sm-on-xl",insetMdOnXl:"pf-m-inset-md-on-xl",insetLgOnXl:"pf-m-inset-lg-on-xl",insetXlOnXl:"pf-m-inset-xl-on-xl",inset_2xlOnXl:"pf-m-inset-2xl-on-xl",inset_3xlOnXl:"pf-m-inset-3xl-on-xl",horizontalOn_2xl:"pf-m-horizontal-on-2xl",verticalOn_2xl:"pf-m-vertical-on-2xl",insetNoneOn_2xl:"pf-m-inset-none-on-2xl",insetXsOn_2xl:"pf-m-inset-xs-on-2xl",insetSmOn_2xl:"pf-m-inset-sm-on-2xl",insetMdOn_2xl:"pf-m-inset-md-on-2xl",insetLgOn_2xl:"pf-m-inset-lg-on-2xl",insetXlOn_2xl:"pf-m-inset-xl-on-2xl",inset_2xlOn_2xl:"pf-m-inset-2xl-on-2xl",inset_3xlOn_2xl:"pf-m-inset-3xl-on-2xl"}};var l,r=t(7931);!function(e){e.hr="hr",e.li="li",e.div="div"}(l||(l={}));const c=e=>{var{className:n,component:t=l.hr,inset:c,orientation:m}=e,d=(0,a.Tt)(e,["className","component","inset","orientation"]);const p=t;return i.createElement(p,Object.assign({className:(0,s.A)(o.divider,(0,r.ay)(c,o),(0,r.ay)(m,o),n)},"hr"!==t&&{role:"separator"},d))};c.displayName="Divider"},5600:(e,n,t)=>{"use strict";t.d(n,{K:()=>l});var a=t(8674),i=t(1680),s=t(358),o=t(3774);const l=e=>{var{children:n=null,className:t=""}=e,l=(0,a.Tt)(e,["children","className"]);const r=(0,o.A)(s.A.formGroup,s.A.modifiers.action,t),c=i.createElement("div",{className:(0,o.A)(s.A.formActions)},n);return i.createElement("div",Object.assign({},l,{className:r}),i.createElement("div",{className:(0,o.A)(s.A.formGroupControl)},c))};l.displayName="ActionGroup"},8994:(e,n,t)=>{"use strict";t.d(n,{A:()=>r});var a=t(1680),i=t.n(a),s=t(2021),o=t(2069),l=t(7334);const r=()=>i().createElement("div",{className:"disabledDiv"},i().createElement(l.Ay,{className:"lockIcon"}),i().createElement(s.h,{headingLevel:"h2",size:"xl",className:"pf-u-mt-lg"},"This page is temporarily disabled or unavailable at this time"),i().createElement(o.E,{className:"pf-u-mt-lg"},"Please check again at a another time or reach out to Red Hat customer service for additional support"))},1437:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>M});var a=t(1680),i=t.n(a),s=t(5322),o=t(1903),l=t(2021),r=t(2069),c=t(2583),m=t(3133),d=t(6780),p=t(5600),h=t(3873),u=t(782),f=t(7565),g=t(167);const x=(0,t(8419).w)({name:"OutlinedQuestionCircleIcon",height:512,width:512,svgPath:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 448c-110.532 0-200-89.431-200-200 0-110.495 89.472-200 200-200 110.491 0 200 89.471 200 200 0 110.53-89.431 200-200 200zm107.244-255.2c0 67.052-72.421 68.084-72.421 92.863V300c0 6.627-5.373 12-12 12h-45.647c-6.627 0-12-5.373-12-12v-8.659c0-35.745 27.1-50.034 47.579-61.516 17.561-9.845 28.324-16.541 28.324-29.579 0-17.246-21.999-28.693-39.784-28.693-23.189 0-33.894 10.977-48.942 29.969-4.057 5.12-11.46 6.071-16.666 2.124l-27.824-21.098c-5.107-3.872-6.251-11.066-2.644-16.363C184.846 131.491 214.94 112 261.794 112c49.071 0 101.45 38.304 101.45 88.8zM298 368c0 23.159-18.841 42-42 42s-42-18.841-42-42 18.841-42 42-42 42 18.841 42 42z",yOffset:0,xOffset:0});var v=t(2896),O=t(1830),E=t(881),b=t(5556);let y="",_="http://localhost:8081/auth/realms/redhat-external/apis/organizations/v1/my/authentication-policy";const z=({tokenData:e})=>{const n=(0,E.A)();"stage"===n.getEnvironment()?(_="https://sso.stage.redhat.com/auth/realms/redhat-external/apis/organizations/v1/my/authentication-policy",y="https://access.stage.redhat.com/documentation/en-us/red_hat_customer_portal/1/html/using_two-factor_authentication/con-ciam-2fa-about_two-factor-authentication"):"prod"===n.getEnvironment()&&(_="https://sso.redhat.com/auth/realms/redhat-external/apis/organizations/v1/my/authentication-policy",y="https://access.redhat.com/documentation/en-us/red_hat_customer_portal/1/html/using_two-factor_authentication/con-ciam-2fa-about_two-factor-authentication");const t=(0,v.wA)(),[s,o]=(0,a.useState)({checked:!1,changed:!1}),[b,z]=(0,a.useState)({loading:!0}),N=e=>{t((0,O.z8)({variant:"danger",description:e,title:"Error"}))},A=()=>{fetch(_,{method:"GET",referrerPolicy:"no-referrer",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e}}).then((e=>e.json())).then((e=>{e.error?(console.error(e.error),N("Failed to fetch the current status")):(o({checked:e.authenticationFactors.otp.required,changed:!1}),z({loading:!1}))}))};return(0,a.useEffect)((()=>{A()}),[]),i().createElement(f.d8,null,i().createElement(m.l,null,i().createElement("div",null,i().createElement(l.h,{headingLevel:"h2",size:"xl"},"Organizational two-factor authentication"),i().createElement(r.E,{className:"primaryTextBox pf-v5-u-mt-md"},"Enable organizational two-factor authentication to require all users to use a password and a one-time code to log in. When enabled, each user in your organization must install an authenticator application on a compatible mobile device in order to log in.",i().createElement(c.$n,{variant:"link",href:y,target:"_blank",component:"a",isInline:!0,icon:i().createElement(g.Ay,null),iconPosition:"right",className:"pf-v5-u-ml-xs"},"Learn more about two-factor authentication")),i().createElement(d.g,{className:"pf-v5-u-mt-md"},i().createElement(h.S,{onChange:()=>{o({checked:!s.checked,changed:!0})},label:"Enable two-factor authentication for your organization",id:"confirmed",className:"twofaCheck",isChecked:s.checked}),i().createElement(u.A,{"aria-label":"Advanced popover usages example",position:"right",hideOnOutsideClick:!0,enableFlip:!0,appendTo:()=>document.body,maxWidth:"18rem",minWidth:"2rem",bodyContent:i().createElement("div",null,"Users will be required to set up two-factor authentication the next time they attempt to log in."),children:i().createElement(c.$n,{id:"infoIcon",variant:"link",component:"span",isInline:!0,className:"questionIcon pf-v5-u-ml-xs",icon:i().createElement(x,null)}),className:"pf-v5-u-text-align-center"})),i().createElement(p.K,{className:"pf-v5-u-mt-3xl"},i().createElement(c.$n,{onClick:()=>{const e={authenticationFactors:{otp:{required:!1}}};s.checked?e.authenticationFactors.otp.required=!0:e.authenticationFactors.otp.required=!1,n.auth.getToken().then((n=>{fetch(_,{method:"POST",referrerPolicy:"no-referrer",headers:{"Content-Type":"application/json",Authorization:"Bearer "+n},body:JSON.stringify(e)}).then((e=>e.json())).then((e=>{e.error&&(console.error(e.error),N(e.error)),o({checked:e.authenticationFactors.otp.required,changed:!1}),t((0,O.z8)({variant:"success",description:"Authentication policy settings saved",title:"Success"}))}))}))},isDisabled:b.loading||!s.changed},"Save"),i().createElement(c.$n,{onClick:A,variant:"link",isInline:!0,className:"pf-v5-u-ml-lg"},"Cancel")))))};z.propTypes={tokenData:t.n(b)().string};const N=z;var A=t(8994),k=t(7334);const S=()=>i().createElement("div",{className:"nonAdminDiv"},i().createElement(k.Ay,{className:"lockIcon"}),i().createElement(l.h,{headingLevel:"h2",size:"xl",className:"pf-v5-u-mt-lg"},"You do not have access to Authentication Factors"),i().createElement(r.E,{className:"pf-v5-u-mt-lg"},"Contact your organization administrator(s) for more information, or visit My User Access to learn more about your permissions."),i().createElement(c.$n,{variant:"link",onClick:()=>{window.location.href="/iam/my-user-access"},className:"pf-v5-u-mt-lg"},"Go to landing page"));var w=t(4209),X=t(7546),L=t(4747);const M=()=>{const e=(0,E.A)();let n=null;const[t,l]=(0,a.useState)({adminUser:!1,twofadisplay:i().createElement(S,null)}),r=(0,o.useFlag)("iamconsole.authfactors.enabled");return(0,a.useEffect)((()=>{e?.appAction?.("authentication-factors"),e.auth.getToken().then((e=>{n=e,(0,L.X2)(n)&&r&&l({adminUser:!0,twofadisplay:i().createElement(N,{tokenData:n})}),r||l({adminUser:!1,twofadisplay:i().createElement(A.A,null)})}))}),[]),i().createElement(i().Fragment,null,!0===t.adminUser&&i().createElement("div",null,i().createElement(w.A,null,i().createElement(X.A,{title:"Authentication Factors",className:"pf-v5-u-mb-lg"}),i().createElement("p",null," Manage authentication factors for your organization. ")),i().createElement(s.c,null)),t.twofadisplay)}},4747:(e,n,t)=>{"use strict";function a(e){const n=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),t=JSON.parse(decodeURIComponent(window.atob(n).split("").map((e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2))).join("")));return t&&t.is_org_admin}function i(e,n,t,a){const i={};i[n]=e,a({...t,...i})}function s(e,n,t){let a=!1;const i={};return Object.keys(n).forEach((t=>{const s=e&&e[t],o=n[t].inputType,l=function(e,n,t){if(!e)return{status:"error",message:"This field can not be left empty"};let a,i;switch(n){case"GENERAL":i=/^[.@&]?[a-zA-Z0-9 ]+[ !.@&()]?[ a-zA-Z0-9!()]+/.test(e),a={status:i?"default":"error",message:i?"":"This text is invalid please check for uncommonly used characters"};break;case"DOMAIN":i=/(?:[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?\.)+[a-z0-9][a-z0-9-]{0,61}[a-z0-9]/g.test(e),a={status:i?"default":"error",message:i?"":"This field needs to be a valid URL"};break;default:a={status:"default",message:""}}return a}(s,o);"error"===l.status&&(a=!0),i[t]={inputType:o,status:l.status,message:l.message}})),t(i),a}t.d(n,{Gw:()=>o,J1:()=>l,SS:()=>s,X2:()=>a,Xr:()=>i});const o=e=>"prod"===e.getEnvironment()?"https://sso.redhat.com/auth/realms/redhat-external/":"https://sso.stage.redhat.com/auth/realms/redhat-external/",l=(e,n)=>o(e)+n},1537:()=>{},4895:()=>{},545:()=>{},5937:()=>{},6752:()=>{}}]);