(self.webpackChunkiam_console=self.webpackChunkiam_console||[]).push([[244],{40167:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>a});const a=(0,n(68419).wt)({name:"ExternalLinkAltIcon",height:512,width:512,svgPath:"M432,320H400a16,16,0,0,0-16,16V448H64V128H208a16,16,0,0,0,16-16V80a16,16,0,0,0-16-16H48A48,48,0,0,0,0,112V464a48,48,0,0,0,48,48H400a48,48,0,0,0,48-48V336A16,16,0,0,0,432,320ZM488,0h-128c-21.37,0-32.05,25.91-17,41l35.73,35.73L135,320.37a24,24,0,0,0,0,34L157.67,377a24,24,0,0,0,34,0L435.28,133.32,471,169c15,15,41,4.5,41-17V24A24,24,0,0,0,488,0Z",yOffset:0,xOffset:0})},77334:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>r,XA:()=>a});const a=(0,n(68419).wt)({name:"LockIcon",height:512,width:448,svgPath:"M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zm-104 0H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z",yOffset:0,xOffset:0}),r=a},5752:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var a=n(21527),r=n.n(a),o=n(62040),i=n(77334);const c=function(){return r().createElement("div",{className:"disabledDiv"},r().createElement(i.Ay,{className:"lockIcon"}),r().createElement(o.Title,{headingLevel:"h2",size:"xl",className:"pf-u-mt-lg"},"This page is temporarily disabled or unavailable at this time"),r().createElement(o.Text,{className:"pf-u-mt-lg"},"Please check again at a another time or reach out to Red Hat customer service for additional support"))}},13960:(e,t,n)=>{"use strict";n.d(t,{SS:()=>s,X2:()=>i,Xr:()=>c});var a=n(64980);function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){(0,a.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e){var t=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),n=JSON.parse(decodeURIComponent(window.atob(t).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join("")));return n&&n.is_org_admin}function c(e,t,n,a){var r={};r[t]=e,a(o(o({},n),r))}function s(e,t,n){var a=!1,r={};return Object.keys(t).forEach((function(n){var o=e&&e[n],i=t[n].inputType,c=function(e,t){if(!e)return{status:"error",message:"This field can not be left empty"};var n={},a="";switch(t){case"GENERAL":n={status:(a=/^[.@&]?[a-zA-Z0-9 ]+[ !.@&()]?[ a-zA-Z0-9!()]+/.test(e))?"default":"error",message:a?"":"This text is invalid please check for uncommonly used characters"};break;case"DOMAIN":n={status:(a=/(?:[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?\.)+[a-z0-9][a-z0-9-]{0,61}[a-z0-9]/g.test(e))?"default":"error",message:a?"":"This field needs to be a valid URL"};break;default:n={status:"default",message:""}}return n}(o,i);"error"===c.status&&(a=!0),r[n]={inputType:i,status:c.status,message:c.message}})),n(r),a}},21646:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>A});var a=n(80296),r=n(21527),o=n.n(r),i=n(62040),c=n(88095),s=n(40167);const l=(0,n(68419).wt)({name:"OutlinedQuestionCircleIcon",height:512,width:512,svgPath:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 448c-110.532 0-200-89.431-200-200 0-110.495 89.472-200 200-200 110.491 0 200 89.471 200 200 0 110.53-89.431 200-200 200zm107.244-255.2c0 67.052-72.421 68.084-72.421 92.863V300c0 6.627-5.373 12-12 12h-45.647c-6.627 0-12-5.373-12-12v-8.659c0-35.745 27.1-50.034 47.579-61.516 17.561-9.845 28.324-16.541 28.324-29.579 0-17.246-21.999-28.693-39.784-28.693-23.189 0-33.894 10.977-48.942 29.969-4.057 5.12-11.46 6.071-16.666 2.124l-27.824-21.098c-5.107-3.872-6.251-11.066-2.644-16.363C184.846 131.491 214.94 112 261.794 112c49.071 0 101.45 38.304 101.45 88.8zM298 368c0 23.159-18.841 42-42 42s-42-18.841-42-42 18.841-42 42-42 42 18.841 42 42z",yOffset:0,xOffset:0});var u=n(2896),m=n(11830),h=n(5556),f=n.n(h),d="",p="http://localhost:8081/auth/realms/redhat-external/apis/organizations/v1/my/authentication-policy";"stage"===insights.chrome.getEnvironment()?(p="https://sso.stage.redhat.com/auth/realms/redhat-external/apis/organizations/v1/my/authentication-policy",d="https://access.stage.redhat.com/documentation/en-us/red_hat_customer_portal/1/html/using_two-factor_authentication/con-ciam-2fa-about_two-factor-authentication"):"prod"===insights.chrome.getEnvironment()&&(p="https://sso.redhat.com/auth/realms/redhat-external/apis/organizations/v1/my/authentication-policy",d="https://access.redhat.com/documentation/en-us/red_hat_customer_portal/1/html/using_two-factor_authentication/con-ciam-2fa-about_two-factor-authentication");var g=function(e){var t=(0,u.wA)(),n=(0,r.useState)({checked:!1,changed:!1}),c=(0,a.A)(n,2),h=c[0],f=c[1],g=(0,r.useState)({loading:!0}),y=(0,a.A)(g,2),v=y[0],b=y[1],E=function(e){t((0,m.z8)({variant:"danger",description:e,title:"Error"}))},O=function(){fetch(p,{method:"GET",referrerPolicy:"no-referrer",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.tokenData}}).then((function(e){return e.json()})).then((function(e){e.error?(console.error(e.error),E("Failed to fetch the current status")):(f({checked:e.authenticationFactors.otp.required,changed:!1}),b({loading:!1}))}))};return(0,r.useEffect)((function(){O()}),[]),o().createElement(i.PageSection,null,o().createElement(i.Form,null,o().createElement("div",null,o().createElement(i.Title,{headingLevel:"h2",size:"xl"},"Organizational two-factor authentication"),o().createElement(i.Text,{className:"primaryTextBox pf-u-mt-md"},"Enable organizational two-factor authentication to require all users to use a password and a one-time code to log in. When enabled, each user in your organization must install an authenticator application on a compatible mobile device in order to log in.",o().createElement(i.Button,{variant:"link",href:d,target:"_blank",component:"a",isInline:!0,icon:o().createElement(s.Ay,null),iconPosition:"right",className:"pf-u-ml-xs"},"Learn more about two-factor authentication")),o().createElement(i.FormGroup,{className:"pf-u-mt-md"},o().createElement(i.Checkbox,{onChange:function(){f({checked:!h.checked,changed:!0})},label:"Enable two-factor authentication for your organization",id:"confirmed",className:"twofaCheck",isChecked:h.checked}),o().createElement(i.Button,{id:"infoIcon",variant:"link",component:"span",isInline:!0,className:"questionIcon pf-u-ml-xs",icon:o().createElement(l,null)}),o().createElement(i.Popover,{"aria-label":"Advanced popover usages example",position:"right",hideOnOutsideClick:!0,enableFlip:!0,appendTo:function(){return document.body},maxWidth:"18rem",minWidth:"2rem",bodyContent:o().createElement("div",null,"Users will be required to set up two-factor authentication the next time they attempt to log in."),reference:function(){return document.getElementById("infoIcon")},className:"pf-u-text-align-center"})),o().createElement(i.ActionGroup,{className:"pf-u-mt-3xl"},o().createElement(i.Button,{onClick:function(){var e={authenticationFactors:{otp:{required:!1}}};h.checked?e.authenticationFactors.otp.required=!0:e.authenticationFactors.otp.required=!1,insights.chrome.auth.getToken().then((function(n){fetch(p,{method:"POST",referrerPolicy:"no-referrer",headers:{"Content-Type":"application/json",Authorization:"Bearer "+n},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){e.error&&(console.error(e.error),E(e.error)),f({checked:e.authenticationFactors.otp.required,changed:!1}),t((0,m.z8)({variant:"success",description:"Authentication policy settings saved",title:"Success"}))}))}))},isDisabled:v.loading||!h.changed},"Save"),o().createElement(i.Button,{onClick:O,variant:"link",isInline:!0,className:"pf-u-ml-lg"},"Cancel")))))};g.propTypes={tokenData:f().string};const y=g;var v=n(5752),b=n(77334);const E=function(){return o().createElement("div",{className:"nonAdminDiv"},o().createElement(b.Ay,{className:"lockIcon"}),o().createElement(i.Title,{headingLevel:"h2",size:"xl",className:"pf-u-mt-lg"},"You do not have access to Authentication Factors"),o().createElement(i.Text,{className:"pf-u-mt-lg"},"Contact your organization administrator(s) for more information, or visit My User Access to learn more about your permissions."),o().createElement(i.Button,{variant:"link",onClick:function(){window.location.href="/iam/my-user-access"},className:"pf-u-mt-lg"},"Go to landing page"))};var O=n(83241),k=n(16401),w=n(13960);const A=function(){var e=null,t=(0,r.useState)({adminUser:!1,twofadisplay:o().createElement(E,null)}),n=(0,a.A)(t,2),s=n[0],l=n[1],u=(0,c.useFlag)("iamconsole.authfactors.enabled");return(0,r.useEffect)((function(){var t,n;null===(t=insights)||void 0===t||null===(t=t.chrome)||void 0===t||null===(n=t.appAction)||void 0===n||n.call(t,"authentication-factors"),insights.chrome.auth.getToken().then((function(t){e=t,(0,w.X2)(e)&&u&&l({adminUser:!0,twofadisplay:o().createElement(y,{tokenData:e})}),u||l({adminUser:!1,twofadisplay:o().createElement(v.A,null)})}))}),[]),o().createElement(o().Fragment,null,!0===s.adminUser&&o().createElement("div",null,o().createElement(O.A,null,o().createElement(k.A,{title:"Authentication Factors",className:"pf-u-mb-lg"}),o().createElement("p",null," Manage authentication factors for your organization. ")),o().createElement(i.Divider,null)),s.twofadisplay)}},2694:(e,t,n)=>{"use strict";var a=n(6925);function r(){}function o(){}o.resetWarningCache=r,e.exports=function(){function e(e,t,n,r,o,i){if(i!==a){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:r};return n.PropTypes=n,n}},5556:(e,t,n)=>{e.exports=n(2694)()},6925:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},80296:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var a=n(27800);function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,o,i,c=[],s=!0,l=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(a=o.call(n)).done)&&(c.push(a.value),c.length!==t);s=!0);}catch(e){l=!0,r=e}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw r}}return c}}(e,t)||(0,a.A)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}}}]);