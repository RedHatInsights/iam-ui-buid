(self.webpackChunkiam=self.webpackChunkiam||[]).push([[244],{5322:(e,n,t)=>{"use strict";t.d(n,{c:()=>c});var s=t(8674),i=t(1680),a=t(3774);t(1537);const o={divider:"pf-v5-c-divider",modifiers:{hidden:"pf-m-hidden",hiddenOnSm:"pf-m-hidden-on-sm",visibleOnSm:"pf-m-visible-on-sm",hiddenOnMd:"pf-m-hidden-on-md",visibleOnMd:"pf-m-visible-on-md",hiddenOnLg:"pf-m-hidden-on-lg",visibleOnLg:"pf-m-visible-on-lg",hiddenOnXl:"pf-m-hidden-on-xl",visibleOnXl:"pf-m-visible-on-xl",hiddenOn_2xl:"pf-m-hidden-on-2xl",visibleOn_2xl:"pf-m-visible-on-2xl",vertical:"pf-m-vertical",insetNone:"pf-m-inset-none",insetXs:"pf-m-inset-xs",insetSm:"pf-m-inset-sm",insetMd:"pf-m-inset-md",insetLg:"pf-m-inset-lg",insetXl:"pf-m-inset-xl",inset_2xl:"pf-m-inset-2xl",inset_3xl:"pf-m-inset-3xl",horizontalOnSm:"pf-m-horizontal-on-sm",verticalOnSm:"pf-m-vertical-on-sm",insetNoneOnSm:"pf-m-inset-none-on-sm",insetXsOnSm:"pf-m-inset-xs-on-sm",insetSmOnSm:"pf-m-inset-sm-on-sm",insetMdOnSm:"pf-m-inset-md-on-sm",insetLgOnSm:"pf-m-inset-lg-on-sm",insetXlOnSm:"pf-m-inset-xl-on-sm",inset_2xlOnSm:"pf-m-inset-2xl-on-sm",inset_3xlOnSm:"pf-m-inset-3xl-on-sm",horizontalOnMd:"pf-m-horizontal-on-md",verticalOnMd:"pf-m-vertical-on-md",insetNoneOnMd:"pf-m-inset-none-on-md",insetXsOnMd:"pf-m-inset-xs-on-md",insetSmOnMd:"pf-m-inset-sm-on-md",insetMdOnMd:"pf-m-inset-md-on-md",insetLgOnMd:"pf-m-inset-lg-on-md",insetXlOnMd:"pf-m-inset-xl-on-md",inset_2xlOnMd:"pf-m-inset-2xl-on-md",inset_3xlOnMd:"pf-m-inset-3xl-on-md",horizontalOnLg:"pf-m-horizontal-on-lg",verticalOnLg:"pf-m-vertical-on-lg",insetNoneOnLg:"pf-m-inset-none-on-lg",insetXsOnLg:"pf-m-inset-xs-on-lg",insetSmOnLg:"pf-m-inset-sm-on-lg",insetMdOnLg:"pf-m-inset-md-on-lg",insetLgOnLg:"pf-m-inset-lg-on-lg",insetXlOnLg:"pf-m-inset-xl-on-lg",inset_2xlOnLg:"pf-m-inset-2xl-on-lg",inset_3xlOnLg:"pf-m-inset-3xl-on-lg",horizontalOnXl:"pf-m-horizontal-on-xl",verticalOnXl:"pf-m-vertical-on-xl",insetNoneOnXl:"pf-m-inset-none-on-xl",insetXsOnXl:"pf-m-inset-xs-on-xl",insetSmOnXl:"pf-m-inset-sm-on-xl",insetMdOnXl:"pf-m-inset-md-on-xl",insetLgOnXl:"pf-m-inset-lg-on-xl",insetXlOnXl:"pf-m-inset-xl-on-xl",inset_2xlOnXl:"pf-m-inset-2xl-on-xl",inset_3xlOnXl:"pf-m-inset-3xl-on-xl",horizontalOn_2xl:"pf-m-horizontal-on-2xl",verticalOn_2xl:"pf-m-vertical-on-2xl",insetNoneOn_2xl:"pf-m-inset-none-on-2xl",insetXsOn_2xl:"pf-m-inset-xs-on-2xl",insetSmOn_2xl:"pf-m-inset-sm-on-2xl",insetMdOn_2xl:"pf-m-inset-md-on-2xl",insetLgOn_2xl:"pf-m-inset-lg-on-2xl",insetXlOn_2xl:"pf-m-inset-xl-on-2xl",inset_2xlOn_2xl:"pf-m-inset-2xl-on-2xl",inset_3xlOn_2xl:"pf-m-inset-3xl-on-2xl"}};var l,r=t(7931);!function(e){e.hr="hr",e.li="li",e.div="div"}(l||(l={}));const c=e=>{var{className:n,component:t=l.hr,inset:c,orientation:m}=e,d=(0,s.Tt)(e,["className","component","inset","orientation"]);const h=t;return i.createElement(h,Object.assign({className:(0,a.A)(o.divider,(0,r.ay)(c,o),(0,r.ay)(m,o),n)},"hr"!==t&&{role:"separator"},d))};c.displayName="Divider"},5600:(e,n,t)=>{"use strict";t.d(n,{K:()=>l});var s=t(8674),i=t(1680),a=t(358),o=t(3774);const l=e=>{var{children:n=null,className:t=""}=e,l=(0,s.Tt)(e,["children","className"]);const r=(0,o.A)(a.A.formGroup,a.A.modifiers.action,t),c=i.createElement("div",{className:(0,o.A)(a.A.formActions)},n);return i.createElement("div",Object.assign({},l,{className:r}),i.createElement("div",{className:(0,o.A)(a.A.formGroupControl)},c))};l.displayName="ActionGroup"},8994:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var s=t(4848),i=(t(1680),t(316)),a=t(4450),o=t(7334);const l=()=>(0,s.jsxs)("div",{className:"disabledDiv",children:[(0,s.jsx)(o.Ay,{className:"lockIcon"}),(0,s.jsx)(i.h,{headingLevel:"h2",size:"xl",className:"pf-u-mt-lg",children:"This page is temporarily disabled or unavailable at this time"}),(0,s.jsx)(a.E,{className:"pf-u-mt-lg",children:"Please check again at a another time or reach out to Red Hat customer service for additional support"})]})},1437:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>C});var s=t(4848),i=t(1680),a=t.n(i),o=t(5322),l=t(1903),r=t(316),c=t(4450),m=t(7993),d=t(3133),h=t(6780),p=t(5600),f=t(3873),u=t(4461),x=t(7565),g=t(167);const v=(0,t(8419).w)({name:"OutlinedQuestionCircleIcon",height:512,width:512,svgPath:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 448c-110.532 0-200-89.431-200-200 0-110.495 89.472-200 200-200 110.491 0 200 89.471 200 200 0 110.53-89.431 200-200 200zm107.244-255.2c0 67.052-72.421 68.084-72.421 92.863V300c0 6.627-5.373 12-12 12h-45.647c-6.627 0-12-5.373-12-12v-8.659c0-35.745 27.1-50.034 47.579-61.516 17.561-9.845 28.324-16.541 28.324-29.579 0-17.246-21.999-28.693-39.784-28.693-23.189 0-33.894 10.977-48.942 29.969-4.057 5.12-11.46 6.071-16.666 2.124l-27.824-21.098c-5.107-3.872-6.251-11.066-2.644-16.363C184.846 131.491 214.94 112 261.794 112c49.071 0 101.45 38.304 101.45 88.8zM298 368c0 23.159-18.841 42-42 42s-42-18.841-42-42 18.841-42 42-42 42 18.841 42 42z",yOffset:0,xOffset:0});var O=t(2896),b=t(1830),y=t(881),j=t(5556);let _="",z="http://localhost:8081/auth/realms/redhat-external/apis/organizations/v1/my/authentication-policy";const N=({tokenData:e})=>{const n=(0,y.A)();"stage"===n.getEnvironment()?(z="https://sso.stage.redhat.com/auth/realms/redhat-external/apis/organizations/v1/my/authentication-policy",_="https://access.stage.redhat.com/documentation/en-us/red_hat_customer_portal/1/html/using_two-factor_authentication/con-ciam-2fa-about_two-factor-authentication"):"prod"===n.getEnvironment()&&(z="https://sso.redhat.com/auth/realms/redhat-external/apis/organizations/v1/my/authentication-policy",_="https://access.redhat.com/documentation/en-us/red_hat_customer_portal/1/html/using_two-factor_authentication/con-ciam-2fa-about_two-factor-authentication");const t=(0,O.wA)(),[a,o]=(0,i.useState)({checked:!1,changed:!1}),[l,j]=(0,i.useState)({loading:!0}),N=e=>{t((0,b.z8)({variant:"danger",description:e,title:"Error"}))},A=()=>{fetch(z,{method:"GET",referrerPolicy:"no-referrer",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e}}).then((e=>e.json())).then((e=>{e.error?(console.error(e.error),N("Failed to fetch the current status")):(o({checked:e.authenticationFactors.otp.required,changed:!1}),j({loading:!1}))}))};return(0,i.useEffect)((()=>{A()}),[]),(0,s.jsx)(x.d8,{children:(0,s.jsx)(d.l,{children:(0,s.jsxs)("div",{children:[(0,s.jsx)(r.h,{headingLevel:"h2",size:"xl",children:"Organizational two-factor authentication"}),(0,s.jsxs)(c.E,{className:"primaryTextBox pf-v5-u-mt-md",children:["Enable organizational two-factor authentication to require all users to use a password and a one-time code to log in. When enabled, each user in your organization must install an authenticator application on a compatible mobile device in order to log in.",(0,s.jsx)(m.$n,{variant:"link",href:_,target:"_blank",component:"a",isInline:!0,icon:(0,s.jsx)(g.Ay,{}),iconPosition:"right",className:"pf-v5-u-ml-xs",children:"Learn more about two-factor authentication"})]}),(0,s.jsxs)(h.g,{className:"pf-v5-u-mt-md",children:[(0,s.jsx)(f.S,{onChange:()=>{o({checked:!a.checked,changed:!0})},label:"Enable two-factor authentication for your organization",id:"confirmed",className:"twofaCheck",isChecked:a.checked}),(0,s.jsx)(u.A,{"aria-label":"Advanced popover usages example",position:"right",hideOnOutsideClick:!0,enableFlip:!0,appendTo:()=>document.body,maxWidth:"18rem",minWidth:"2rem",bodyContent:(0,s.jsx)("div",{children:"Users will be required to set up two-factor authentication the next time they attempt to log in."}),children:(0,s.jsx)(m.$n,{id:"infoIcon",variant:"link",component:"span",isInline:!0,className:"questionIcon pf-v5-u-ml-xs",icon:(0,s.jsx)(v,{})}),className:"pf-v5-u-text-align-center"})]}),(0,s.jsxs)(p.K,{className:"pf-v5-u-mt-3xl",children:[(0,s.jsx)(m.$n,{onClick:()=>{const e={authenticationFactors:{otp:{required:!1}}};a.checked?e.authenticationFactors.otp.required=!0:e.authenticationFactors.otp.required=!1,n.auth.getToken().then((n=>{fetch(z,{method:"POST",referrerPolicy:"no-referrer",headers:{"Content-Type":"application/json",Authorization:"Bearer "+n},body:JSON.stringify(e)}).then((e=>e.json())).then((e=>{e.error&&(console.error(e.error),N(e.error)),o({checked:e.authenticationFactors.otp.required,changed:!1}),t((0,b.z8)({variant:"success",description:"Authentication policy settings saved",title:"Success"}))}))}))},isDisabled:l.loading||!a.changed,children:"Save"}),(0,s.jsx)(m.$n,{onClick:A,variant:"link",isInline:!0,className:"pf-v5-u-ml-lg",children:"Cancel"})]})]})})})};N.propTypes={tokenData:t.n(j)().string};const A=N;var k=t(8994),S=t(7334);const w=()=>(0,s.jsxs)("div",{className:"nonAdminDiv",children:[(0,s.jsx)(S.Ay,{className:"lockIcon"}),(0,s.jsx)(r.h,{headingLevel:"h2",size:"xl",className:"pf-v5-u-mt-lg",children:"You do not have access to Authentication Factors"}),(0,s.jsx)(c.E,{className:"pf-v5-u-mt-lg",children:"Contact your organization administrator(s) for more information, or visit My User Access to learn more about your permissions."}),(0,s.jsx)(m.$n,{variant:"link",onClick:()=>{window.location.href="/iam/my-user-access"},className:"pf-v5-u-mt-lg",children:"Go to landing page"})]});var X=t(4209),L=t(7546),M=t(4747);const C=()=>{const e=(0,y.A)();let n=null;const[t,r]=(0,i.useState)({adminUser:!1,twofadisplay:(0,s.jsx)(w,{})}),c=(0,l.useFlag)("iamconsole.authfactors.enabled");return(0,i.useEffect)((()=>{e?.appAction?.("authentication-factors"),e.auth.getToken().then((e=>{n=e,(0,M.X2)(n)&&c&&r({adminUser:!0,twofadisplay:(0,s.jsx)(A,{tokenData:n})}),c||r({adminUser:!1,twofadisplay:(0,s.jsx)(k.A,{})})}))}),[]),(0,s.jsxs)(a().Fragment,{children:[t.adminUser&&(0,s.jsxs)("div",{children:[(0,s.jsxs)(X.A,{children:[(0,s.jsx)(L.A,{title:"Authentication Factors",className:"pf-v5-u-mb-lg"}),(0,s.jsx)("p",{children:" Manage authentication factors for your organization. "})]}),(0,s.jsx)(o.c,{})]}),t.twofadisplay]})}},4747:(e,n,t)=>{"use strict";function s(e){const n=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/");return JSON.parse(decodeURIComponent(window.atob(n).split("").map((e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2))).join("")))}function i(e){return s(e).is_org_admin}function a(e){return s(e).org_id}function o(e,n,t,s){const i={};i[n]=e,s({...t,...i})}function l(e,n,t,s){let i=!1;const a={};return Object.keys(t).forEach((s=>{a[s]={},s===n&&Object.keys(t[n]).forEach((n=>{const o=e&&e.selections[n],l=t[s][n].inputType,r=function(e,n,t){if(!e)return"RADIO"===n?{status:"error",message:"A selection must be made"}:{status:"error",message:"This field can not be left empty"};let s,i;switch(n){case"GENERAL":i=!/[^A-Za-z0-9]/.test(e),s={status:i?"default":"error",message:i?"":"This text is invalid. The input is only expected to consist of alphanumeric characters. No spaces, dashes, or special characters."};break;case"DOMAIN":i=/(?:[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?\.)+[a-z0-9][a-z0-9-]{0,61}[a-z0-9]/g.test(e),s={status:i?"default":"error",message:i?"":"This field needs to be a valid URL"};break;case"x509":i=/^([A-Za-z0-9+\/=]+)(,[A-Za-z0-9+\/=]+)*$/.test(e),s={status:i?"default":"error",message:i?"":"This is invalid, please check for uncommonly used characters. Be sure to exclude the start and end block"};break;default:s={status:"default",message:""}}return s}(o,l);"default"!==r.status&&(i=!0),a[s][n]={inputType:l,variant:r.status,message:r.message}}))})),s(a),i}t.d(n,{Gw:()=>r,I:()=>a,J1:()=>c,Qe:()=>l,X2:()=>i,Xr:()=>o});const r=e=>"prod"===e.getEnvironment()?"https://sso.redhat.com/auth/realms/redhat-external/":"https://sso.stage.redhat.com/auth/realms/redhat-external/",c=(e,n)=>r(e)+n},1537:()=>{},4895:()=>{},545:()=>{},5937:()=>{},6752:()=>{}}]);
//# sourceMappingURL=../sourcemaps/Authentication-Factors.5f685204ba8f18a5cc4fd85b1201178e.js.map