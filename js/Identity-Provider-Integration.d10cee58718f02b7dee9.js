(self.webpackChunkiam=self.webpackChunkiam||[]).push([[600],{8994:(e,t,i)=>{"use strict";i.d(t,{A:()=>a});var r=i(4848),n=(i(1680),i(316)),s=i(2069),o=i(7334);const a=()=>(0,r.jsxs)("div",{className:"disabledDiv",children:[(0,r.jsx)(o.Ay,{className:"lockIcon"}),(0,r.jsx)(n.h,{headingLevel:"h2",size:"xl",className:"pf-u-mt-lg",children:"This page is temporarily disabled or unavailable at this time"}),(0,r.jsx)(s.E,{className:"pf-u-mt-lg",children:"Please check again at a another time or reach out to Red Hat customer service for additional support"})]})},6169:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>Me});var r=i(4848),n=i(1680),s=i.n(n),o=i(8072),a=i(7851),l=i(4209),c=i(7546),d=i(2069),u=i(3539),h=i(316),p=i(3133),m=i(6780),I=i(4747),x=i(5556),v=i.n(x);class f{static OIDC_CONFIG="OIDC_CONFIG";static SAML_CONFIG="SAML_CONFIG";static IMPORT_FROM_FILE="IMPORT_FROM_FILE";static IMPORT_FROM_URL="IMPORT_FROM_URL";static IMPORT_SAML_FROM_FILE="IMPORT_SAML_FROM_FILE";static IMPORT_SAML_FROM_URL="IMPORT_SAML_FROM_URL";static FINAL_STEP="FINAL_STEP";static CUSTOMER_INFORMATION="CUSTOMER_INFORMATION"}const j=({resetNextClicked:e,rootUserChoices:t,rootValidation:i,updateStatus:s})=>{const[o,a]=(0,n.useState)({protocol:{inputType:"RADIO",status:"default",message:""}});return(0,r.jsxs)(p.l,{children:[(0,r.jsx)(h.h,{headingLevel:"h2",children:"Customer Information"}),(0,r.jsx)(d.E,{className:"pf-v5-u-color-400 pf-v5-u-font-size-sm",children:"All fields are required"}),(0,r.jsxs)(m.g,{onChange:r=>{(r=>{((e,t,i,r,n,s,o)=>{o(!1),t.current||(t.current={}),t.current.selections||(t.current.selections={}),t.current.selections[e.target.id]=e.target.value;const a=(0,I.SS)(t.current.selections,i,r),l=f.CUSTOMER_INFORMATION;n.current||(n.current={}),n.current[l]=!a,!a&&t.current.selections.protocol&&s(t.current.selections.protocol)})(r,t,o,a,i,s,e)})(r)},role:"radiogroup",fieldId:"authType",label:"Choose identity provider protocol",id:"protocol",children:[(0,r.jsx)(u.s,{name:"authType",id:"protocol",label:"OpenID Connect",value:"OIDC_CONFIG"}),(0,r.jsx)(u.s,{name:"authType",id:"protocol",label:"Saml 2.0",value:"SAML_CONFIG"})]})]})};j.propTypes={resetNextClicked:v().func,rootUserChoices:v().object,rootValidation:v().object,nextClicked:v().func,updateStatus:v().func};const S=j;var C=i(3285),g=i(9257),y=i(9937);const R=({updateStatus:e,resetNextClicked:t,rootValidation:i,rootUserChoices:s})=>{const[o,a]=(0,n.useState)(),[l,c]=(0,n.useState)({clientId:{inputType:"GENERAL",status:"default",message:""},clientSecret:{inputType:"GENERAL",status:"default",message:""},inputMethod:{inputType:"RADIO",status:"default",message:""}}),h=r=>{t(!1),s.current.selections[r.target.id]=r.target.value;const n=(0,I.SS)(s.current.selections,l,c);i.current.OIDC_CONFIG=!n,!n&&s.current.selections.inputMethod&&e(s.current.selections.inputMethod)};return(0,r.jsxs)(p.l,{children:[(0,r.jsx)(d.E,{className:"pf-v5-u-color-400 pf-v5-u-font-size-sm",children:"All fields are required"}),(0,r.jsxs)(m.g,{label:"Client ID/SP entity ID",onChange:e=>{h(e)},children:[(0,r.jsx)(C.ks,{onChange:(e,t)=>(0,I.Xr)(t,"clientId",o,a),type:"text",id:"clientId"}),(0,r.jsx)(g.E,{children:(0,r.jsx)(y.j,{children:"The Red Hat client identifier registered within the customer identity provider. Your indentity provider generates this client ID when a Red Hat client is added"})})]}),(0,r.jsxs)(m.g,{label:"Client Secret",onChange:e=>{h(e)},children:[(0,r.jsx)(C.ks,{onChange:(e,t)=>(0,I.Xr)(t,"clientSecret",o,a),type:"text",id:"clientSecret"}),(0,r.jsx)(g.E,{children:(0,r.jsx)(y.j,{children:"Enter the client secret associated with your client identifier  by your identity provider"})})]}),(0,r.jsxs)(m.g,{onChange:e=>{h(e)},label:"Load external IDP metadata from a config file or download it from a url",children:[(0,r.jsx)(u.s,{name:"inputChoice",id:"inputMethod",label:"Import from URL",value:"IMPORT_FROM_URL"}),(0,r.jsx)(u.s,{name:"inputChoice",id:"inputMethod",label:"Import from file",value:"IMPORT_FROM_FILE"})]})]})};R.propTypes={resetNextClicked:v().func,rootUserChoices:v().object,rootValidation:v().object,nextClicked:v().func,updateStatus:v().func};const A=R,O=({updateStatus:e,resetNextClicked:t,rootValidation:i,rootUserChoices:s})=>{const[o,a]=(0,n.useState)({inputMethod:{inputType:"RADIO",status:"default",message:""}});return(0,r.jsx)(p.l,{children:(0,r.jsx)(m.g,{onChange:r=>{(r=>{t(!1),s.current.selections[r.target.id]=r.target.value;const n=(0,I.SS)(s.current.selections,o,a);i.current.SAML_CONFIG=!n,!n&&s.current.selections.inputMethod&&e(s.current.selections.inputMethod)})(r)},label:"Load external IDP metadata from a config file",isRequired:!0,children:(0,r.jsx)(u.s,{name:"inputChoice",id:"inputMethod",label:"Import from XML file",value:"IMPORT_SAML_FROM_FILE"})})})};O.propTypes={resetNextClicked:v().func,rootUserChoices:v().object,rootValidation:v().object,nextClicked:v().func,updateStatus:v().func};const L=O;var T=i(3069),_=i(8805),F=i.n(_);const M=({updateStatus:e,rootValidation:t,rootUserChoices:i})=>{const[s,o]=(0,n.useState)("");return(0,r.jsxs)(p.l,{children:[(0,r.jsx)(h.h,{headingLevel:"h2",children:"Import from file"}),(0,r.jsx)(m.g,{label:"File Upload",isRequired:!0,children:(0,r.jsx)(T.e,{value:s.toString(),id:"text-file-with-edits-allowed",type:"text",onDataChange:(r,n)=>{o(n),F().parseString(n,((r,n)=>{r?console.error(r):n&&(e("FINAL_STEP"),i.current.selections.configFileData=n,t.current.IMPORT_FROM_FILE=!0)}))},browseButtonText:"Upload"})}),(0,r.jsx)(d.E,{className:"pf-v5-u-color-400 pf-v5-u-font-size-sm",children:"An XML formatted file detailing the configuration of your IDP, minimally including the OpenID Connect Identity provider discovery URL"})]})};M.propTypes={rootUserChoices:v().object,rootValidation:v().object,updateStatus:v().func};const b=M,N=({updateStatus:e,resetNextClicked:t,rootValidation:i,rootUserChoices:s})=>{const[o,a]=(0,n.useState)({importURL:{inputType:"DOMAIN",status:"default",message:""}});return(0,r.jsxs)(p.l,{children:[(0,r.jsx)(h.h,{headingLevel:"h2",children:"Import from URL"}),(0,r.jsxs)(m.g,{label:"URL",children:[(0,r.jsx)(C.ks,{type:"text",id:"importURL",onChange:r=>{(r=>{t(!1),s.current.selections[r.currentTarget.id]=r.currentTarget.value;const n=(0,I.SS)(s.current.selections,o,a);i.current.IMPORT_FROM_URL=!n,n||e(f.FINAL_STEP)})(r)}}),(0,r.jsx)(g.E,{children:(0,r.jsx)(y.j,{children:"import metadata from a remote identity provider discovery descriptor"})})]})]})};N.propTypes={resetNextClicked:v().func,rootUserChoices:v().object,rootValidation:v().object,nextClicked:v().func,updateStatus:v().func};const E=N;var D=i(5886),U=i(1864),k=i(2543),P=i.n(k),w=i(6454);function G(e,...t){if(!e)return"";let i=e.replace(/%s|%d/g,(e=>{const i=t.shift();return String(i)}));return i=i.replace(/{(?:\d+)}/g,((e,i)=>{const r=t[parseInt(i,10)];return void 0!==r?String(r):e})),i}class z{static ENTITY_ID="@_entityID";static BINDING="@_Binding";static LOCATION="@_Location";static KEY_INFO="KeyInfo";static X509_DATA="X509Data";static X509_CERTIFICATE="X509Certificate";static DS_KEY_INFO="ds:KeyInfo";static DS_X509_DATA="ds:X509Data";static DS_X509_CERTIFICATE="ds:X509Certificate";static HTTP_POST_BINDING="urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST";static HTTP_REDIRECT_BINDING="urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Redirect"}const $="identityProviderEntityId",H="authenticationRequestsUrl";class X{static INVALID_OR_MISSING_DATA="Invalid or missing data";static SUCCESS_MSG="loaded successfully!";static FILE_SUCCESSFULLY_LOADED="%s "+X.SUCCESS_MSG+" (size: %dK)";static FILE_PARSING_ERROR="Error parsing XML: %s";static INVALID_FILE_TYPE="Invalid file type. Only XML files are allowed.";static MALICIOUS_FILE_DETECTED="Error: Invalid XML document.";static FILE_READ_ERROR="Error reading file";static SAML_XML_REQUIREMENTS="Upload a XML file with your IDP configuration. Max file size allowed is %d K";static FILE_TOO_LARGE="Must be a XML file no larger than %d KB"}const V=(0,n.forwardRef)((({updateStatus:e,resetNextClicked:t,rootValidation:i,rootUserChoices:s,maxKBSize:o},a)=>{const l=["text/xml"],[c,d]=(0,n.useState)(null),[u,h]=(0,n.useState)(""),[p,I]=(0,n.useState)(""),[x,v]=(0,n.useState)(null),[j,S]=(0,n.useState)(null),[C,R]=(0,n.useState)(!1),[A,O]=(0,n.useState)(!1),[L,_]=(0,n.useState)(!1);function F(){d(null),h(""),I(""),S(""),v(""),R(!1)}return(0,n.useImperativeHandle)(a,(()=>({getFile:()=>c}))),(0,r.jsxs)(m.g,{fieldId:"xml-file-with-restrictions",children:[(0,r.jsx)(T.e,{id:"xml-file-with-restrictions",type:"text",value:u,filename:p,filenamePlaceholder:"Drag and drop the SAML metadata file or upload one",onFileInputChange:(r,n)=>{if(F(),I(n.name),n){const r=new FileReader;r.onerror=()=>{_(!1),v(X.FILE_READ_ERROR)},r.onload=r=>{const a=r.target?.result;!function(e){return e.includes("<!DOCTYPE")||e.includes("<!ENTITY")||e.includes("SYSTEM")||(e.match(/<!ENTITY/gu)||[]).length>5||e.includes("&")&&!/&[a-zA-Z0-9]+;/u.test(e)}(a)?function(e){return l.includes(e.type)?e.size>1024*o&&(R(!0),!0):(v(X.INVALID_FILE_TYPE),S(null),!0)}(n)||function(r,n){t(!1);try{const t=new w.XMLParser({ignoreAttributes:!1,allowBooleanAttributes:!0,attributeNamePrefix:"@_",parseAttributeValue:!0,ignorePiTags:!0}).parse(r),o=t?.EntityDescriptor?.IDPSSODescriptor?.KeyDescriptor||[],a=t?.EntityDescriptor?.IDPSSODescriptor?.SingleSignOnService,l=function(e){return e?.EntityDescriptor?.[z.ENTITY_ID]?e.EntityDescriptor[z.ENTITY_ID]:null}(t),c=function(e){if(e||Array.isArray(e)){const t=e.find((e=>e[z.BINDING]===z.HTTP_POST_BINDING)),i=e.find((e=>e[z.BINDING]===z.HTTP_REDIRECT_BINDING));if(t?.[z.LOCATION])return t[z.LOCATION];if(i?.[z.LOCATION])return i[z.LOCATION]}return null}(a),u=function(e){const t=new Set;if(e)for(const i of Array.isArray(e)?e:[e]){const e=i?.[z.KEY_INFO]?.[z.X509_DATA],r=i?.[z.DS_KEY_INFO]?.[z.DS_X509_DATA];let n=[];e?n=Array.isArray(e?.[z.X509_CERTIFICATE])?e[z.X509_CERTIFICATE]:[e?.[z.X509_CERTIFICATE]]:r&&(n=Array.isArray(r?.[z.DS_X509_CERTIFICATE])?r[z.DS_X509_CERTIFICATE]:[r?.[z.DS_X509_CERTIFICATE]]);for(const e of n)e&&t.add(e)}return t}(o);if(!function(e,t,i){return!(!P().isString(e)||!P().isString(t)||0===i.size||0===e.length||0===t.length)}(l,c,u))throw new Error(X.INVALID_OR_MISSING_DATA);s.current.selections[$]=l,s.current.selections[H]=c;const h=u.values().next();s.current.selections.x509Certificate=h.value,i.current.IMPORT_SAML_FROM_FILE=!0,i.current.IMPORT_SAML_FROM_URL=!1,e(f.FINAL_STEP),R(!1),d(n),v(null),S(G(X.FILE_SUCCESSFULLY_LOADED,n.name,(n.size/1024).toFixed(2))),_(!0)}catch(e){_(!1),v(G(X.FILE_PARSING_ERROR,e.message))}}(a,n):(_(!1),v(X.MALICIOUS_FILE_DETECTED))},r.readAsText(n)}},onDataChange:(e,t)=>{h(t)},onReadStarted:(e,t)=>{v(""),S("")},onReadFinished:(e,t)=>{O(!0)},onClearClick:e=>{F(),O(!1)},dropzoneProps:{accept:{"text/xml":[".xml"]},maxSize:1024*o,onDropRejected:()=>{R(!0)}},validated:C?"error":"default",browseButtonText:"Upload",hideDefaultPreview:!0}),(0,r.jsx)(U.e,{children:(0,r.jsxs)(g.E,{children:[(0,r.jsx)(y.j,{variant:C?"error":"default",children:G(C?X.FILE_TOO_LARGE:X.SAML_XML_REQUIREMENTS,o)}),(j||x)&&(0,r.jsx)(y.j,{variant:x?"error":"success",children:x??j})]})}),(0,r.jsx)("div",{className:"xml-highlighter",children:L&&u&&(0,r.jsx)(D.Q,{toggleText:A?"Show less":"Show more",onToggle:(e,t)=>{O(t)},isExpanded:A,children:(0,r.jsx)("div",{className:"highlighter-panel",children:u})})})]})}));V.displayName="SamlMetadataFile",V.propTypes={maxKBSize:v().number.isRequired};const q=({updateStatus:e,resetNextClicked:t,rootValidation:i,rootUserChoices:s})=>{const[o,a]=(0,n.useState)();return(0,n.useEffect)((()=>{a((0,r.jsx)(V,{updateStatus:e,resetNextClicked:t,rootValidation:i,rootUserChoices:s,maxKBSize:100}))}),[]),(0,r.jsxs)(p.l,{children:[(0,r.jsx)(h.h,{headingLevel:"h2",children:"Import from file"}),(0,r.jsx)(m.g,{label:"File Upload",isRequired:!0,children:o})]})};q.propTypes={rootUserChoices:v().object,rootValidation:v().object,updateStatus:v().func};const B=q;var Y=i(6165),K=i(881);const J=({accessToken:e,updateStatus:t,samlEntityID:i,samlAuthRequestsUrl:s})=>{const[o,a]=(0,n.useState)(""),l=(0,K.A)();return(0,n.useEffect)((()=>{a((0,I.I)(e))}),[]),(0,r.jsxs)(p.l,{children:[(0,r.jsx)(h.h,{headingLevel:"h2",children:"Configure URLs"}),(0,r.jsx)(d.E,{className:"pf-v5-u-color-400 pf-v5-u-font-size-sm",children:"Some Identity Provider Services require additional configuration when enabling third party single sign on. Please review the following information and verify that these are filled in where required in your company IDP."}),(0,r.jsx)(m.g,{label:"Identifier (Entity ID)",children:(0,r.jsx)(Y.Ck,{isReadOnly:!0,clickTip:"copied",children:i})}),(0,r.jsx)(m.g,{label:"Sign on URL",children:(0,r.jsx)(Y.Ck,{isReadOnly:!0,clickTip:"copied",children:s})}),(0,r.jsx)(m.g,{label:"Redirect URL or ACS (Assertion Consumption Service) URL",children:(0,r.jsx)(Y.Ck,{isReadOnly:!0,clickTip:"copied",children:(c=`broker/${o}/endpoint`,(0,I.Gw)(l)+c)})})]});var c};J.propTypes={accessToken:v().string,updateStatus:v().func,samlEntityID:v().string,samlAuthRequestsUrl:v().string};const W=J;var Z=i(4091),Q=i(168),ee=i(2857),te=i(7993),ie=i(7877),re=i(782),ne=i(1976),se=i(9202),oe=i(8472),ae=i(1358),le=i(358);const ce=({oidcData:e})=>{const t=(0,K.A)(),i=(0,I.Gw)(t);return(0,r.jsxs)(p.l,{children:[(0,r.jsx)(ee.F,{variant:"info",isInline:!0,title:"This page currently shows a read-only version of your configuration.",children:(0,r.jsx)("p",{children:"Forthcoming enhancements will provide the ability to edit."})}),(0,r.jsxs)(h.h,{headingLevel:"h1",children:[e.displayName,e.enabled?(0,r.jsx)(ie.J,{color:"green",icon:(0,r.jsx)(se.Ay,{}),className:"pf-v5-u-ml-md",children:"Enabled"}):(0,r.jsx)(ie.J,{color:"grey",icon:(0,r.jsx)(oe.Ay,{}),className:"pf-v5-u-ml-md",children:"Disabled"})]}),(0,r.jsx)(m.g,{label:"Issuer",fieldId:"oidc-issuer",labelIcon:(0,r.jsx)(re.A,{triggerAction:"hover",bodyContent:(0,r.jsx)("div",{children:"The issuer is used to validate tokens generated by the identity provider and allows additional security for your organization. This value is optional but recommended."}),children:(0,r.jsx)(te.$n,{variant:"plain",type:"button",onClick:e=>e.preventDefault(),className:`customPopover ${le.A.formGroupLabelHelp}`,children:(0,r.jsx)(ae.Ay,{})})}),children:(0,r.jsx)(C.ks,{isDisabled:!0,type:"text",id:"oidc-issuer",name:"oidc-issuer",value:e.issuerUrl})}),(0,r.jsxs)(m.g,{label:"Client ID",fieldId:"oidc-client-id",labelIcon:(0,r.jsx)(re.A,{triggerAction:"hover",bodyContent:(0,r.jsx)("div",{children:"The client ID registered with the identity provider."}),children:(0,r.jsx)(te.$n,{variant:"plain",type:"button",onClick:e=>e.preventDefault(),className:`customPopover ${le.A.formGroupLabelHelp}`,children:(0,r.jsx)(ae.Ay,{})})}),children:[(0,r.jsx)(C.ks,{isDisabled:!0,type:"text",id:"oidc-client-id",name:"oidc-client-id",value:e.clientId}),(0,r.jsx)(U.e,{children:(0,r.jsx)(g.E,{children:(0,r.jsx)(y.j,{children:"Spaces and special characters are allowed here."})})})]}),(0,r.jsx)(m.g,{label:"Client Secret",fieldId:"oidc-client-secret",labelIcon:(0,r.jsx)(re.A,{triggerAction:"hover",bodyContent:(0,r.jsx)("div",{children:"The client secret registered with the identity provider."}),children:(0,r.jsx)(te.$n,{variant:"plain",type:"button",onClick:e=>e.preventDefault(),className:`customPopover ${le.A.formGroupLabelHelp}`,children:(0,r.jsx)(ae.Ay,{})})}),children:(0,r.jsx)(C.ks,{isDisabled:!0,type:"text",id:"oidc-client-secret",name:"oidc-client-secret",value:e.clientSecret})}),(0,r.jsx)(m.g,{label:"Authorization URL",fieldId:"oidc-authorization-url-id",labelIcon:(0,r.jsx)(re.A,{triggerAction:"hover",bodyContent:(0,r.jsx)("div",{children:"URL that performs authentication of the end-user."}),children:(0,r.jsx)(te.$n,{variant:"plain",type:"button",onClick:e=>e.preventDefault(),className:`customPopover ${le.A.formGroupLabelHelp}`,children:(0,r.jsx)(ae.Ay,{})})}),children:(0,r.jsx)(C.ks,{isDisabled:!0,type:"text",id:"oidc-token-url-id",name:"oidc-token-url-id",value:e.authorizationUrl})}),(0,r.jsx)(m.g,{label:"Token URL",fieldId:"authorization-url",labelIcon:(0,r.jsx)(re.A,{triggerAction:"hover",bodyContent:(0,r.jsx)("div",{children:"URL where an authorization code can be exchanged for an access token and ID token."}),children:(0,r.jsx)(te.$n,{variant:"plain",type:"button",onClick:e=>e.preventDefault(),className:`customPopover ${le.A.formGroupLabelHelp}`,children:(0,r.jsx)(ae.Ay,{})})}),children:(0,r.jsx)(C.ks,{isDisabled:!0,type:"text",id:"authorization-url",name:"authorization-url",value:e.tokenUrl})}),(0,r.jsx)(h.h,{headingLevel:"h3",children:"URLs required for identity provider configuration"}),(0,r.jsx)(ne.n,{children:(0,r.jsx)(d.E,{component:d.Y.p,children:"Use these URLs to assist in completing setup within your identity provider."})}),(0,r.jsx)(m.g,{label:"Service provider metadata URL",fieldId:"metadata-url",labelIcon:(0,r.jsx)(re.A,{triggerAction:"hover",bodyContent:(0,r.jsx)("div",{children:"Service provider metadata used to integrate sso.redhat.com with your identity provider."}),children:(0,r.jsx)(te.$n,{variant:"plain",type:"button",onClick:e=>e.preventDefault(),className:`customPopover ${le.A.formGroupLabelHelp}`,children:(0,r.jsx)(ae.Ay,{})})}),children:(0,r.jsx)(Y.Ck,{type:"text",id:"metadata-url",name:"metadata-url",isReadOnly:!0,children:`${i}.well-known/openid-configuration`})}),(0,r.jsx)(m.g,{label:"Redirect URL / Assertion Consumption Service (ACS) URL",fieldId:"redirect-url",labelIcon:(0,r.jsx)(re.A,{triggerAction:"hover",bodyContent:(0,r.jsx)("div",{children:"The redirect URL to use when configuring your identity provider. This represents your company’s SSO Portal where users authenticate to Red Hat."}),children:(0,r.jsx)(te.$n,{variant:"plain",type:"button",onClick:e=>e.preventDefault(),className:`customPopover ${le.A.formGroupLabelHelp}`,children:(0,r.jsx)(ae.Ay,{})})}),children:(0,r.jsx)(Y.Ck,{type:"text",id:"redirect-url",name:"redirect-url",isReadOnly:!0,children:`${i}broker/${e.idpAlias}/endpoint`})}),(0,r.jsxs)(Z.l,{children:[(0,r.jsx)(re.A,{triggerAction:"hover","aria-label":"Hoverable popover",headerContent:(0,r.jsx)("div",{children:"Read-Only"}),bodyContent:(0,r.jsx)("div",{children:"This page currently shows a read-only version of your configuration. Forthcoming enhancements will provide the ability to edit."}),footerContent:"",children:(0,r.jsx)(Q.a,{children:(0,r.jsx)(te.$n,{isDisabled:!0,children:"Save"})})}),(0,r.jsx)(Q.a,{children:(0,r.jsx)(te.$n,{isDisabled:!0,variant:"link",children:"Cancel"})})]})]})};var de=i(5843);const ue=({samlData:e})=>{const t=(0,K.A)(),i=(0,I.Gw)(t);return(0,r.jsxs)(p.l,{children:[(0,r.jsx)(ee.F,{variant:"info",isInline:!0,title:"This page currently shows a read-only version of your configuration.",children:(0,r.jsx)("p",{children:"Forthcoming enhancements will provide the ability to edit."})}),(0,r.jsxs)(h.h,{headingLevel:"h1",className:"pf-v5-u-display-flex",children:[e.displayName,e.enabled?(0,r.jsx)(ie.J,{color:"green",icon:(0,r.jsx)(se.Ay,{}),className:"pf-v5-u-ml-md",children:"Enabled"}):(0,r.jsx)(ie.J,{color:"grey",icon:(0,r.jsx)(oe.Ay,{}),className:"pf-v5-u-ml-md",children:"Disabled"})]}),(0,r.jsxs)(m.g,{label:"Identity provider entityID",fieldId:"saml-entity-id",labelIcon:(0,r.jsx)(re.A,{triggerAction:"hover",bodyContent:(0,r.jsx)("div",{children:"The entityID used to validate the Issuer for received SAML assertions."}),children:(0,r.jsx)(te.$n,{variant:"plain",type:"button",onClick:e=>e.preventDefault(),className:`customPopover ${le.A.formGroupLabelHelp}`,children:(0,r.jsx)(ae.Ay,{})})}),children:[(0,r.jsx)(C.ks,{isDisabled:!0,type:"text",id:"saml-entity-id",name:"saml-entity-id",value:e.identityProviderEntityId}),(0,r.jsx)(U.e,{children:(0,r.jsx)(g.E,{children:(0,r.jsx)(y.j,{children:"The entityID attribute is in your SAML metadata configuration"})})})]}),(0,r.jsxs)(m.g,{label:"Single sign-on authentication request URL",fieldId:"saml-authn-request-url",children:[(0,r.jsx)(C.ks,{isDisabled:!0,type:"text",id:"saml-authn-request-url",name:"saml-authn-request-url",value:e.authenticationRequestsUrl}),(0,r.jsx)(U.e,{children:(0,r.jsx)(g.E,{children:(0,r.jsx)(y.j,{children:"The URL that sends SAML authentication requests"})})})]}),(0,r.jsxs)(m.g,{label:"x509 certificate",fieldId:"saml-x509-certificate",labelIcon:(0,r.jsx)(re.A,{triggerAction:"hover",bodyContent:(0,r.jsx)("div",{children:"A PEM certificate that is used to check for signatures."}),children:(0,r.jsx)(te.$n,{variant:"plain",type:"button",onClick:e=>e.preventDefault(),className:`customPopover ${le.A.formGroupLabelHelp}`,children:(0,r.jsx)(ae.Ay,{})})}),children:[(0,r.jsx)(de.fs,{resizeOrientation:"vertical",isDisabled:!0,type:"text",id:"saml-authn-request-url",name:"saml-authn-request-url",value:e.x509Certificate}),(0,r.jsx)(U.e,{children:(0,r.jsx)(g.E,{children:(0,r.jsxs)(y.j,{children:["A Base64 encoded certificate must not include the certificate preamble/ending:",(0,r.jsx)("code",{children:"(-----BEGIN/END CERTIFICATE-----)"})]})})})]}),(0,r.jsx)(h.h,{headingLevel:"h3",children:"URLs required for identity provider configuration"}),(0,r.jsx)(ne.n,{children:(0,r.jsx)(d.E,{component:d.Y.p,children:"Use these URLs to assist in completing setup within your identity provider."})}),(0,r.jsx)(m.g,{label:"Service provider metadata URL",fieldId:"service-provider-metadata-url",labelIcon:(0,r.jsx)(re.A,{triggerAction:"hover",bodyContent:(0,r.jsx)("div",{children:"Service provider metadata used to integrate sso.redhat.com with your identity provider."}),children:(0,r.jsx)(te.$n,{variant:"plain",type:"button",onClick:e=>e.preventDefault(),className:`customPopover ${le.A.formGroupLabelHelp}`,children:(0,r.jsx)(ae.Ay,{})})}),children:(0,r.jsx)(Y.Ck,{type:"text",id:"service-provider-metadata-url",name:"service-provider-metadata-url",isReadOnly:!0,children:`${i}broker/${e.idpAlias}/endpoint/descriptor`})}),(0,r.jsx)(m.g,{label:"Redirect URL / Assertion Consumption Service (ACS) URL",fieldId:"redirect-url",labelIcon:(0,r.jsx)(re.A,{triggerAction:"hover",bodyContent:(0,r.jsx)("div",{children:"The redirect URL to use when configuring your identity provider. This represents your company’s SSO Portal where users authenticate to Red Hat."}),children:(0,r.jsx)(te.$n,{variant:"plain",type:"button",onClick:e=>e.preventDefault(),className:`customPopover ${le.A.formGroupLabelHelp}`,children:(0,r.jsx)(ae.Ay,{})})}),children:(0,r.jsx)(Y.Ck,{type:"text",id:"redirect-url",name:"redirect-url",isReadOnly:!0,children:`${i}broker/${e.idpAlias}/endpoint`})}),(0,r.jsxs)(Z.l,{children:[(0,r.jsx)(re.A,{triggerAction:"hover","aria-label":"Hoverable popover",headerContent:(0,r.jsx)("div",{children:"Read-Only"}),bodyContent:(0,r.jsx)("div",{children:"This page currently shows a read-only version of your configuration. Forthcoming enhancements will provide the ability to edit."}),footerContent:"",children:(0,r.jsx)(Q.a,{children:(0,r.jsx)(te.$n,{isDisabled:!0,children:"Save"})})}),(0,r.jsx)(Q.a,{children:(0,r.jsx)(te.$n,{isDisabled:!0,variant:"link",children:"Cancel"})})]})]})};var he=i(915),pe=i(983),me=i(932);const Ie=({responseData:e})=>{const[t,i]=(0,n.useState)((0,r.jsx)(me.y,{}));return(0,n.useEffect)((()=>{"saml-improved"===e.providerId?i((0,r.jsx)(ue,{samlData:e})):"oidc-improved"===e.providerId&&i((0,r.jsx)(ce,{oidcData:e}))}),[e]),(0,r.jsx)(s().Fragment,{children:(0,r.jsx)(he.Z,{isCompact:!1,isLarge:!0,children:(0,r.jsx)(pe.b,{children:t})})})};var xe=i(3913);const ve=({setupIDP:e,wizardEnabled:t})=>(0,r.jsxs)("div",{className:"notSetupDiv",children:[(0,r.jsx)(xe.Ay,{className:"cubesIcon"}),(0,r.jsx)(h.h,{headingLevel:"h2",size:"xl",className:"pf-v5-u-mt-lg",children:"No Identity Providers are currently configured"}),(0,r.jsxs)(d.E,{className:"pf-v5-u-mt-md",children:["Your organization has not integrated an identity provider. More information is available ",(0,r.jsx)(te.$n,{variant:"link",target:"_blank",href:"https://access.redhat.com/announcements/7039300",component:"a",isInline:!0,children:"here"})]}),(0,r.jsx)(te.$n,{className:t?"pf-v5-u-mt-lg":"hideFeature",variant:"primary",onClick:e,children:"Set up an identity provider"})]});ve.propTypes={setupIDP:v().func};const fe=ve;var je=i(4698),Se=i(4501);const Ce=({valid:e,next:t,previous:i})=>{const{goToNextStep:n,goToPrevStep:s}=(0,je.CV)();return(0,r.jsxs)(Se.W,{children:[(0,r.jsx)(te.$n,{onClick:()=>{e?n():t(!0)},disabled:e,children:"Next"}),(0,r.jsx)(te.$n,{variant:"secondary",onClick:()=>{s(),i()},children:"Back"})]})},ge=({userChoiceData:e,previous:t,accessToken:i})=>{const{goToPrevStep:n}=(0,je.CV)(),[o,a]=s().useState(!1),l=(0,I.J1)((0,K.A)(),"apis/organizations/v1/identity-providers");return(0,r.jsxs)(Se.W,{children:[(0,r.jsx)(te.$n,{onClick:()=>{console.log("Submitting with this data: "+JSON.stringify(e,null,2)),a(!0),fetch(l,{method:"POST",referrerPolicy:"no-referrer",headers:{"Content-Type":"application/json",Authorization:"Bearer "+i},body:JSON.stringify({providerId:"OIDC_CONFIG"===e.current.selections.protocol?"oidc-improved":"saml-improved",identityProviderEntityId:"https://sso.redhat.com/auth/realms/redhat-external",authenticationRequestsUrl:"https://sso.redhat.com/auth/realms/redhat-external/broker/rhtest/endpoint",x509Certificate:"dafad"})}).then((e=>e.json())).then((()=>{a(!1),window.location.reload()})).catch((e=>{console.error("Error: ",e),a(!1)}))},isLoading:o,children:"Next"}),(0,r.jsx)(te.$n,{variant:"secondary",onClick:()=>{n(),t()},children:"Back"})]})};ge.propTypes={userChoiceData:v().object};const ye=ge;var Re=i(7565),Ae=i(1903);const Oe=({accessToken:e})=>{const t=(0,n.useRef)({selections:{}}),[i,s]=(0,n.useState)(!1),[u,h]=(0,n.useState)(!0),[p,m]=(0,n.useState)(!0),x=(0,I.J1)((0,K.A)(),"apis/organizations/v1/identity-providers"),[v,j]=(0,n.useState)({idpAlias:"",providerId:"",displayName:"",enabled:""}),C=(0,Ae.useFlag)("iamconsole.IDPIntegration.wizardFlowEnabled");(0,K.A)(),(0,n.useEffect)((()=>{fetch(x,{method:"GET",referrerPolicy:"no-referrer",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e}}).then((e=>e.json())).then((e=>{"oidc-improved"===e.providerId||"saml-improved"===e.providerId?(j(e),h(!1),s(!0)):e.error&&(h(!1),s(!1))})).catch((e=>{console.error("Error: ",e),h(!1)}))}),[]);const g=(0,n.useRef)({CUSTOMER_INFORMATION:!1,OIDC_CONFIG:!1,SAML_CONFIG:!1,IMPORT_FROM_FILE:!1,IMPORT_FROM_URL:!1,IMPORT_SAML_FROM_FILE:!1,IMPORT_SAML_FROM_URL:!1}),[y,R]=(0,n.useState)({currentState:f.CUSTOMER_INFORMATION,previousState:""}),[O,T]=(0,n.useState)({hideCustomerInformation:!1,hideOIDC:!0,hideSAML:!0,hideImportFromURL:!0,hideImportFromFile:!0,hideFinish:!0}),[_,F]=(0,n.useState)(!1),M=e=>{let t;switch(e){case f.OIDC_CONFIG:t={...O},t.hideOIDC=!1,T(t),R({currentState:e,previousState:f.CUSTOMER_INFORMATION});break;case f.SAML_CONFIG:t={...O},t.hideSAML=!1,T(t),R({currentState:e,previousState:f.CUSTOMER_INFORMATION});break;case f.IMPORT_FROM_FILE:t={...O},t.hideImportFromFile=!1,T(t),R({currentState:e,previousState:f.OIDC_CONFIG});break;case f.IMPORT_FROM_URL:t={...O},t.hideImportFromURL=!1,T(t),R({currentState:e,previousState:f.OIDC_CONFIG});break;case f.IMPORT_SAML_FROM_FILE:t={...O},t.hideImportFromFile=!1,T(t),R({currentState:e,previousState:f.SAML_CONFIG});break;case f.IMPORT_SAML_FROM_URL:t={...O},t.hideImportFromURL=!1,T(t),R({currentState:e,previousState:f.SAML_CONFIG});break;case f.FINAL_STEP:t={...O},t.hideFinish=!1,T(t),R({currentState:e,previousState:y.currentState});break;default:T({hideCustomerInformation:!1,hideOIDC:!0,hideSAML:!0,hideImportFromURL:!0,hideImportFromFile:!0,hideFinish:!0})}},N=e=>{const i=Object.keys(t.current.selections);for(let r=0;r<i.length;r++)e.includes(i[r])||delete t.current.selections[i[r]]},D=()=>{(e=>{switch(e){case f.OIDC_CONFIG:N(["protocol"]),R({currentState:e,previousState:f.CUSTOMER_INFORMATION}),T({hideCustomerInformation:!1,hideOIDC:!1,hideSAML:!0,hideImportFromURL:!0,hideImportFromFile:!0,hideFinish:!0});break;case f.SAML_CONFIG:N(["protocol"]),R({currentState:e,previousState:f.CUSTOMER_INFORMATION}),T({hideCustomerInformation:!1,hideOIDC:!0,hideSAML:!1,hideImportFromURL:!0,hideImportFromFile:!0,hideFinish:!0});break;case f.IMPORT_FROM_FILE:N(["clientId","clientSecret","inputMethod","protocol"]),R({currentState:e,previousState:f.OIDC_CONFIG}),T({hideCustomerInformation:!1,hideOIDC:!1,hideSAML:!0,hideImportFromURL:!0,hideImportFromFile:!1,hideFinish:!0});break;case f.IMPORT_FROM_URL:N(["clientId","clientSecret","inputMethod","protocol"]),R({currentState:e,previousState:f.OIDC_CONFIG}),T({hideCustomerInformation:!1,hideOIDC:!1,hideSAML:!0,hideImportFromURL:!1,hideImportFromFile:!0,hideFinish:!0});break;case f.IMPORT_SAML_FROM_URL:N(["clientId","clientSecret","inputMethod","protocol"]),R({currentState:e,previousState:f.SAML_CONFIG}),T({hideCustomerInformation:!1,hideOIDC:!0,hideSAML:!1,hideImportFromURL:!1,hideImportFromFile:!0,hideFinish:!0});break;case f.IMPORT_SAML_FROM_FILE:N(["clientId","clientSecret","inputMethod","protocol"]),R({currentState:e,previousState:f.SAML_CONFIG}),T({hideCustomerInformation:!1,hideOIDC:!0,hideSAML:!1,hideImportFromURL:!0,hideImportFromFile:!1,hideFinish:!0});break;default:N([""]),T({hideCustomerInformation:!1,hideOIDC:!0,hideSAML:!0,hideImportFromURL:!0,hideImportFromFile:!0,hideFinish:!0})}})(y.previousState)};return(0,r.jsxs)("div",{className:"flowPage",children:[(0,r.jsxs)(l.A,{className:"wizardHeader",children:[(0,r.jsx)(c.A,{title:"Identity Provider Integration",className:"pf-v5-u-mb-lg"}),(0,r.jsxs)(ne.n,{children:["Manage identity provider integration for your organization."," ",(0,r.jsx)(d.E,{component:d.Y.a})]})]}),(0,r.jsxs)(Re.d8,{children:[(0,r.jsx)("div",{className:u?"loadingIcon":"hiddenPage",children:(0,r.jsx)(me.y,{})}),(0,r.jsx)("div",{className:!u&&i?"":"hiddenPage",children:(0,r.jsx)(Ie,{responseData:v})}),(0,r.jsx)("div",{className:u||i||!p?"hiddenPage":"initPage",children:(0,r.jsx)(fe,{setupIDP:()=>{m(!1)},wizardEnabled:C})}),(0,r.jsx)("div",{className:i||p?"hiddenPage":"",children:(0,r.jsxs)(o.s,{onClose:()=>{},isProgressive:!0,children:[(0,r.jsx)(a.W,{id:"CUSTOMERINFORMATION",name:"Customer Information",isHidden:O.hideCustomerInformation,footer:(0,r.jsx)(Ce,{valid:g.current.CUSTOMER_INFORMATION,next:F,previous:D}),children:(0,r.jsx)(S,{updateStatus:M,resetNextClicked:F,rootValidation:g,rootUserChoices:t})}),(0,r.jsx)(a.W,{id:"OIDCCONFIG",name:"OIDC Configuration",isHidden:O.hideOIDC,footer:(0,r.jsx)(Ce,{valid:g.current.OIDC_CONFIG,next:F,previous:D}),children:(0,r.jsx)(A,{updateStatus:M,resetNextClicked:F,rootValidation:g,rootUserChoices:t})}),(0,r.jsx)(a.W,{id:"IMPORTFROMFILE",name:"Import config from file",isHidden:!(!O.hideOIDC&&!O.hideImportFromFile),footer:(0,r.jsx)(Ce,{valid:g.current.IMPORT_FROM_FILE,next:F,previous:D}),children:(0,r.jsx)(b,{updateStatus:M,resetNextClicked:F,rootValidation:g,rootUserChoices:t})}),(0,r.jsx)(a.W,{id:"IMPORTFROMURL",name:"Import config from URL",isHidden:!(!O.hideOIDC&&!O.hideImportFromURL),footer:(0,r.jsx)(Ce,{valid:g.current.IMPORT_FROM_URL,next:F,previous:D}),children:(0,r.jsx)(E,{updateStatus:M,resetNextClicked:F,rootValidation:g,rootUserChoices:t})}),(0,r.jsx)(a.W,{id:"SAMLCONFIG",name:"Saml Configuration",isHidden:O.hideSAML,footer:(0,r.jsx)(Ce,{valid:g.current.SAML_CONFIG,next:F,previous:D}),children:(0,r.jsx)(L,{updateStatus:M,resetNextClicked:F,rootValidation:g,rootUserChoices:t})}),(0,r.jsx)(a.W,{name:"Import SAML from file",id:"IMPORTSAMLFROMFILE",isHidden:!(!O.hideSAML&&!O.hideImportFromFile),footer:(0,r.jsx)(Ce,{valid:g.current.IMPORT_SAML_FROM_FILE,next:F,previous:D}),children:(0,r.jsx)(B,{updateStatus:M,resetNextClicked:F,rootValidation:g,rootUserChoices:t})}),(0,r.jsx)(a.W,{id:"FINALSTEP",name:"Final Steps",isHidden:O.hideFinish,footer:(0,r.jsx)(ye,{userChoiceData:t,previous:D,accessToken:e}),children:(0,r.jsx)(W,{accessToken:e,updateStatus:M,samlEntityID:t.current.selections[$],samlAuthRequestsUrl:t.current.selections[H]})})]})})]})]})};Oe.propTypes={accessToken:v().string};const Le=Oe;var Te=i(8994),_e=i(7334);const Fe=()=>(0,r.jsxs)("div",{className:"nonAdminDiv",children:[(0,r.jsx)(_e.Ay,{className:"lockIcon"}),(0,r.jsx)(h.h,{headingLevel:"h2",size:"xl",className:"pf-v5-u-mt-lg",children:"Access permissions needed"}),(0,r.jsxs)(d.E,{className:"pf-v5-u-mt-lg",children:["To access Identity Provider Integration, ask your organization administrator(s) to adjust your permissions, or visit ",(0,r.jsx)(te.$n,{variant:"link",href:"/iam/my-user-access",target:"_blank",component:"a",isInline:!0,children:"My User Access"})," to learn more about your permissions"]}),(0,r.jsx)(te.$n,{onClick:()=>{window.location.href="/iam/my-user-access"},className:"pf-v5-u-mt-lg",children:"Return to home page"})]}),Me=()=>{const e=(0,K.A)();let t=null;const[i,o]=(0,n.useState)({adminUser:!1,selfServiceIDP:(0,r.jsx)(Te.A,{})}),a=(0,Ae.useFlag)("iamconsole.IDPIntegration.enabled");return(0,n.useEffect)((()=>{e?.appAction?.("identity-provider-integration"),e.auth.getToken().then((e=>{t=e,(0,I.X2)(t)?(0,I.X2)(t)&&a&&o({adminUser:!0,selfServiceIDP:(0,r.jsx)(Le,{accessToken:t})}):o({adminUser:!1,selfServiceIDP:(0,r.jsx)(Fe,{})})}))}),[]),(0,r.jsx)(s().Fragment,{children:i.selfServiceIDP})}},4747:(e,t,i)=>{"use strict";function r(e){const t=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/");return JSON.parse(decodeURIComponent(window.atob(t).split("").map((e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2))).join("")))}function n(e){return r(e).is_org_admin}function s(e){return r(e).org_id}function o(e,t,i,r){const n={};n[t]=e,r({...i,...n})}function a(e,t,i){let r=!1;const n={};return Object.keys(t).forEach((i=>{const s=e&&e[i],o=t[i].inputType,a=function(e,t,i){if(!e)return{status:"error",message:"This field can not be left empty"};let r,n;switch(t){case"GENERAL":n=/^[.@&]?[a-zA-Z0-9 ]+[ !.@&()]?[ a-zA-Z0-9!()]+/.test(e),r={status:n?"default":"error",message:n?"":"This text is invalid please check for uncommonly used characters"};break;case"DOMAIN":n=/(?:[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?\.)+[a-z0-9][a-z0-9-]{0,61}[a-z0-9]/g.test(e),r={status:n?"default":"error",message:n?"":"This field needs to be a valid URL"};break;default:r={status:"default",message:""}}return r}(s,o);"error"===a.status&&(r=!0),n[i]={inputType:o,status:a.status,message:a.message}})),i(n),r}i.d(t,{Gw:()=>l,I:()=>s,J1:()=>c,SS:()=>a,X2:()=>n,Xr:()=>o});const l=e=>"prod"===e.getEnvironment()?"https://sso.redhat.com/auth/realms/redhat-external/":"https://sso.stage.redhat.com/auth/realms/redhat-external/",c=(e,t)=>l(e)+t},6882:()=>{},1902:()=>{},1662:()=>{},4895:()=>{},7302:()=>{},1036:()=>{},6151:()=>{},1225:()=>{},545:()=>{},5937:()=>{},5637:()=>{},1289:()=>{},6752:()=>{},5340:()=>{},9838:()=>{}}]);
//# sourceMappingURL=../sourcemaps/Identity-Provider-Integration.c1b18b79f0cf19ea02f96335877e340e.js.map