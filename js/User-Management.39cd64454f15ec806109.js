(self.webpackChunkiam_console=self.webpackChunkiam_console||[]).push([[562],{77334:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>a,XA:()=>r});const r=(0,n(68419).wt)({name:"LockIcon",height:512,width:448,svgPath:"M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zm-104 0H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z",yOffset:0,xOffset:0}),a=r},5752:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var r=n(21527),a=n.n(r),o=n(62040),c=n(77334);const l=function(){return a().createElement("div",{className:"disabledDiv"},a().createElement(c.Ay,{className:"lockIcon"}),a().createElement(o.Title,{headingLevel:"h2",size:"xl",className:"pf-u-mt-lg"},"This page is temporarily disabled or unavailable at this time"),a().createElement(o.Text,{className:"pf-u-mt-lg"},"Please check again at a another time or reach out to Red Hat customer service for additional support"))}},13960:(e,t,n)=>{"use strict";n.d(t,{SS:()=>s,X2:()=>c,Xr:()=>l});var r=n(64980);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e){var t=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),n=JSON.parse(decodeURIComponent(window.atob(t).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join("")));return n&&n.is_org_admin}function l(e,t,n,r){var a={};a[t]=e,r(o(o({},n),a))}function s(e,t,n){var r=!1,a={};return Object.keys(t).forEach((function(n){var o=e&&e[n],c=t[n].inputType,l=function(e,t){if(!e)return{status:"error",message:"This field can not be left empty"};var n={},r="";switch(t){case"GENERAL":n={status:(r=/^[.@&]?[a-zA-Z0-9 ]+[ !.@&()]?[ a-zA-Z0-9!()]+/.test(e))?"default":"error",message:r?"":"This text is invalid please check for uncommonly used characters"};break;case"DOMAIN":n={status:(r=/(?:[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?\.)+[a-z0-9][a-z0-9-]{0,61}[a-z0-9]/g.test(e))?"default":"error",message:r?"":"This field needs to be a valid URL"};break;default:n={status:"default",message:""}}return n}(o,c);"error"===l.status&&(r=!0),a[n]={inputType:c,status:l.status,message:l.message}})),n(a),r}},55367:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>w});var r=n(80296),a=n(21527),o=n.n(a),c=n(83241),l=n(16401),s=n(62040),i=n(64980),u=n(71077),d=n(5556),m=n.n(d);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,i.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g=function(e){var t=(0,a.useContext)(k),n=(0,a.useState)([]),c=(0,r.A)(n,2),l=c[0],d=c[1],m=(0,a.useState)({}),p=(0,r.A)(m,2),g=p[0],h=p[1],E=(0,a.useState)(10),b=(0,r.A)(E,2),y=b[0],v=b[1],T=(0,a.useState)(0),C=(0,r.A)(T,2),O=C[0],A=C[1],P=(0,a.useState)(20),S=(0,r.A)(P,2),j=S[0];S[1],(0,a.useEffect)((function(){var e;e=t.accountAPI+"/"+t.accountID+"/users?",e+=new URLSearchParams({firstResultIndex:O,maxResults:y}),fetch(e,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+t.userToken}}).then((function(e){return e.json()})).then((function(e){d(e.body);for(var t={},n=0;n<e.body.length;n++){var r={status:e.body[n].user.status,username:e.body[n].user.username,checked:!1};t[e.body[n].user.id]=r}h(t)}))}),[O]);var w=function(){console.log("doing nothing")},I=function(){for(var e,n=Object.keys(g),r=0;r<n.length;r++)if(g[n[r]].checked){e=n[r];break}e&&fetch(t.accountAPI+"/"+t.accountID+"/users/"+e+"/status",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+t.userToken},body:JSON.stringify({status:"disabled"})}).then((function(e){return e.json()})).then((function(){window.location.reload(!1)}))},_=function(){for(var n,r=Object.keys(g),a=0;a<r.length;a++)if(g[r[a]].checked){n=r[a];break}n&&fetch(t.accountAPI+"/"+t.accountID+"/users/"+n,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+t.userToken}}).then((function(e){return e.json()})).then((function(t){e.triggerEditUser(t.body)}))},x=function(){A(O+y)},D=function(){A(O-y)},U=function(){return l.length>0?o().createElement("div",null,o().createElement(s.Toolbar,{id:"userListToolbar"},o().createElement(s.ToolbarContent,null,o().createElement(s.ToolbarItem,null,o().createElement(s.SearchInput,{"aria-label":"Search user list"})),o().createElement(s.ToolbarItem,null,o().createElement(s.Button,{onClick:e.triggerAddUser,variant:"primary"},"Add User")),o().createElement(s.ToolbarItem,null,o().createElement(s.Button,{onClick:_,variant:"primary"},"Edit User")),o().createElement(s.ToolbarItem,null,o().createElement(s.Button,{onClick:I,variant:"link"},"Disable User")))),o().createElement(u.TableComposable,{"aria-label":"Sortable table"},o().createElement(u.Thead,null,o().createElement(u.Tr,null,o().createElement(u.Th,{select:{onSelect:function(){return w()},isSelected:w()}}),o().createElement(u.Th,null,"Name"),o().createElement(u.Th,{modifier:"wrap"},"Email"),o().createElement(u.Th,{modifier:"wrap",info:{tooltip:"More information "}},"LastName"),o().createElement(u.Th,{modifier:"wrap"},"First Name"),o().createElement(u.Th,{modifier:"wrap"},"Status"))),o().createElement(u.Tbody,null,l.map((function(e){return o().createElement(u.Tr,{key:e.user.username},o().createElement(u.Td,null,o().createElement(s.Checkbox,{onChange:function(t){return n=e.user.id,r=t,(a=g[n]).checked=!!r,void h(f(f({},g),{},(0,i.A)({},n,a)));var n,r,a},isChecked:g[e.user.id].checked,id:e.user.id+"-check"})),o().createElement(u.Td,null,e.user.username),o().createElement(u.Td,null,e.user.email),o().createElement(u.Td,null,e.user.lastName),o().createElement(u.Td,null,e.user.firstName),o().createElement(u.Td,null,e.user.status))})))),o().createElement(s.Pagination,{perPageComponent:"button",widgetId:"bottom-pagination",itemCount:j,perPage:y,variant:s.PaginationVariant.bottom,onPerPageSelect:function(e){v(e)},onNextClick:x,onPreviousClick:D,page:O})):o().createElement("div",null,"spinner ....")};return o().createElement("div",null,o().createElement(U,null))};g.propTypes={triggerEditUser:m().func,triggerAddUser:m().func};const h=g;var E=n(45458),b=function(e){var t=o().useState(!1),n=(0,r.A)(t,2),a=n[0],c=n[1],l=o().useState(e.defaultText),i=(0,r.A)(l,2),u=i[0],d=i[1];return o().createElement(s.Dropdown,{onSelect:function(){c(!1),document.getElementById(e.idValue).focus()},toggle:o().createElement(s.DropdownToggle,{id:e.idValue,onToggle:function(e){c(e)}},u),isOpen:a,dropdownItems:e.items.map((function(t){return o().createElement(s.DropdownItem,{key:t,onClick:function(){e.onSelect(t),d(t)}},t)}))})};b.propTypes={defaultText:m().string,idValue:m().string,items:m().array,onSelect:m().func};const y=b;function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,i.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var C=function(e){var t=(0,a.useContext)(k),n=(0,a.useState)([]),c=(0,r.A)(n,2),l=c[0],u=c[1],d=(0,a.useState)(!1),m=(0,r.A)(d,2),p=m[0],f=m[1],g=(0,a.useState)({salutation:"",firstName:"",lastName:"",email:"",address:{city:"",country:"",county:"",state:"",streets:[],zipCode:""},permissions:[""],phone:"",roles:[],username:""}),h=(0,r.A)(g,2),b=h[0],v=h[1];(0,a.useEffect)((function(){e.editingUser&&(f(!0),v(e.editingUser))}),[]);var C=(0,a.useState)({portal_manage_subscriptions:!1,portal_download:!1,portal_system_management:!1,portal_manage_cases:!1,admin:!1}),O=(0,r.A)(C,2),A=O[0],P=O[1],S=function(e,t){var n=(0,E.A)(b.address.streets);n[t]=e;var r=T({},b.address);r.streets=n,v(T(T({},b),{},{address:r}))},j=function(e,t){var n=T({},b.address);n[e]=t,v(T(T({},b),{},{address:n}))},w=function(e){var t=T({},A);t[e]=!A[e],P(t);for(var n=Object.keys(t),r=[],a=0;a<n.length;a++)!0===t[n[a]]&&("admin"===n[a]?v(T(T({},b),{},{roles:["organization_administrator"]})):(r.push(n[a]),v(T(T({},b),{},{permissions:r}))))};return o().createElement("div",null,o().createElement(s.Form,null,o().createElement("div",null,o().createElement(s.AlertGroup,{isLiveRegion:!0},l)),o().createElement(s.Card,null,o().createElement(s.CardHeader,null,"Name"),o().createElement(s.CardBody,null,o().createElement(s.FormGroup,null,o().createElement(y,{items:["Mr.","Mrs.","Other"],idValue:"greetingDropdown",defaultText:"Greeting",onSelect:function(e){var t;t=e,v(T(T({},b),{},(0,i.A)({},"salutation",t)))}})),o().createElement(s.FormGroup,{label:"First Name"},o().createElement(s.TextInput,{id:"firstName",onChange:function(e){v(T(T({},b),{},{firstName:e}))},value:b.firstName})),o().createElement(s.FormGroup,{label:"Last Name"},o().createElement(s.TextInput,{id:"lastName",onChange:function(e){v(T(T({},b),{},{lastName:e}))},value:b.lastName})))),o().createElement(s.Card,null,o().createElement(s.CardHeader,null,"Address"),o().createElement(s.CardBody,null,o().createElement(s.FormGroup,{label:"Email"},o().createElement(s.TextInput,{id:"email",onChange:function(e){v(T(T({},b),{},{email:e}))},value:b.email})),o().createElement(s.FormGroup,{label:"Address Line 1"},o().createElement(s.TextInput,{id:"address1",onChange:function(e){S(e,0)},value:b.address.streets[0]})),o().createElement(s.FormGroup,{label:"Address Line 2"},o().createElement(s.TextInput,{id:"address2",onChange:function(e){S(e,1)},value:b.address.streets[1]})),o().createElement(s.FormGroup,{label:"Address Line 3"},o().createElement(s.TextInput,{id:"address3",onChange:function(e){S(e,2)},value:b.address.streets[2]})),o().createElement(s.FormGroup,{label:"Postal Code"},o().createElement(s.TextInput,{id:"postalcode",onChange:function(e){j("zipCode",e)},value:b.address.zipCode})),o().createElement(s.FormGroup,{label:"City"},o().createElement(s.TextInput,{id:"city",onChange:function(e){j("city",e)},value:b.address.city})),o().createElement(s.FormGroup,{label:"State"},o().createElement(s.TextInput,{id:"state",onChange:function(e){j("state",e)},value:b.address.state})),o().createElement(s.FormGroup,{label:"County"},o().createElement(s.TextInput,{id:"county",onChange:function(e){j("county",e)},value:b.address.county})),o().createElement(s.FormGroup,{label:"Country"},o().createElement(s.TextInput,{id:"country",onChange:function(e){j("country",e)},value:b.address.country})),o().createElement(s.FormGroup,{label:"Phone Number"},o().createElement(s.TextInput,{id:"phoneNumber",onChange:function(e){v(T(T({},b),{},{phone:e}))},value:b.phone})))),o().createElement(s.Card,null,o().createElement(s.CardHeader,null,"Red Hat Login"),o().createElement(s.CardBody,null,o().createElement(s.FormGroup,null,o().createElement(s.TextInput,{id:"login",onChange:function(e){v(T(T({},b),{},{username:e}))},value:b.username})))),o().createElement(s.Card,null,o().createElement(s.CardHeader,null,"Permissions"),o().createElement(s.CardBody,null,o().createElement(s.FormGroup,null,o().createElement(s.Checkbox,{label:"Manage Support Cases",isChecked:A.portal_manage_cases,onChange:function(){w("portal_manage_cases")},id:"controlled-check-1",name:"check1"}),o().createElement(s.Checkbox,{label:"Download Software and Updates",isChecked:A.portal_download,onChange:function(){w("portal_download")},id:"controlled-check-2",name:"check2"}),o().createElement(s.Checkbox,{label:"View/Renew Subscription Information",isChecked:A.portal_system_management,onChange:function(){w("portal_system_management")},id:"controlled-check-3",name:"check3"}),o().createElement(s.Checkbox,{label:"Manage Your Subscriptions",isChecked:A.portal_manage_subscriptions,onChange:function(){w("portal_manage_subscriptions")},id:"controlled-check-4",name:"check4"}),o().createElement(s.Divider,{id:"adminDivider",component:"div"}),o().createElement(s.Checkbox,{label:"Account Administrator",isChecked:A.admin,onChange:function(){w("admin")},id:"admin",name:"check5"})))),o().createElement(s.ActionGroup,null,o().createElement(s.Button,{onClick:function(){console.log("submitting formData object: "),console.log(b);var n,r=T({},b);p&&(delete r.id,delete r.username,delete r.status),n=p?t.accountAPI+"/"+t.accountID+"/users/"+b.id:t.accountAPI+"/"+t.accountID+"/users",fetch(n,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+t.userToken},body:JSON.stringify(r)}).then((function(e){return e.json()})).then((function(t){t.status?400===t.status?(u([o().createElement(s.Alert,{title:t.title,key:t.title,variant:"danger",timeout:"8000"},JSON.stringify(t.errors))]),document.getElementsByClassName("pf-c-page__main")[0].scrollTop=0):200===t.status?e.triggerReturn():(u([o().createElement(s.Alert,{key:"mainAlert",title:t.title,variant:"danger",timeout:"8000"},"Unexpected Result")]),document.getElementsByClassName("pf-c-page__main")[0].scrollTop=0):t.body&&e.triggerReturn()}))},variant:"primary"},"Submit"),o().createElement(s.Button,{onClick:e.triggerReturn,variant:"link"},"Cancel"))))};C.propTypes={editingUser:m().bool,triggerReturn:m().func};const O=C;var k=(0,a.createContext)(null);const A=function(){var e;e="stage.foo.redhat.com:1337"===window.location.host||"console.stage.redhat.com"===window.location.host?"https://api.access.stage.redhat.com/account/v1/accounts":"https://api.access.redhat.com/account/v1/accounts";var t=(0,a.useState)({accountAPI:e,accountID:"",userToken:""}),n=(0,r.A)(t,2),i=n[0],u=n[1],d={accountAPI:e,accountID:"",userToken:""},m=(0,a.useState)({userList:!0,addUser:!1,editUser:!1}),p=(0,r.A)(m,2),f=p[0],g=p[1],E=(0,a.useState)(),b=(0,r.A)(E,2),y=b[0],v=b[1],T=function(){g({userList:!1,addUser:!0,editUser:!1})},C=function(){g({userList:!0,addUser:!1,editUser:!1})},A=function(e){v(e),g({userList:!1,addUser:!1,editUser:!0})},P=function(){return i.accountID&&i.accountID.length>0?f.userList?o().createElement(h,{triggerAddUser:T,triggerEditUser:A,triggerCancel:C}):f.addUser?o().createElement(O,{triggerReturn:C}):f.editUser?o().createElement(O,{triggerReturn:C,editingUser:y}):void 0:o().createElement("div",null,"Loading Spinner...")};return(0,a.useEffect)((function(){insights.chrome.auth.getToken().then((function(e){d.userToken=e,fetch(i.accountAPI,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e}}).then((function(e){return e.json()})).then((function(e){var t=e.body[0];d.accountID=t.id,u(d)}))}))}),[]),o().createElement("div",null,o().createElement(c.A,null,o().createElement(l.A,{title:"User Management",className:"pf-u-mb-lg"}),o().createElement("p",null," Manage organization users and privelages")),o().createElement(s.Divider,null),o().createElement(s.PageSection,null,o().createElement(k.Provider,{value:i},o().createElement(P,null))))};var P=n(13960),S=n(5752),j=n(88095);const w=function(){var e=null,t=(0,a.useState)({adminUser:!0,renderedPage:o().createElement(A,null)}),n=(0,r.A)(t,2),c=n[0],l=n[1],s=(0,j.useFlag)("iamconsole.usermanagement.enabled");return(0,a.useEffect)((function(){insights.chrome.auth.getToken().then((function(t){e=t,(0,P.X2)(e)&&s&&l({adminUser:!0,renderedPage:o().createElement(A,null)}),s||l({adminUser:!1,renderedPage:o().createElement(S.A,null)})}))}),[]),o().createElement(o().Fragment,null,c.renderedPage)}},2694:(e,t,n)=>{"use strict";var r=n(6925);function a(){}function o(){}o.resetWarningCache=a,e.exports=function(){function e(e,t,n,a,o,c){if(c!==r){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:a};return n.PropTypes=n,n}},5556:(e,t,n)=>{e.exports=n(2694)()},6925:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},80296:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(27800);function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,c,l=[],s=!0,i=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){i=!0,a=e}finally{try{if(!s&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(i)throw a}}return l}}(e,t)||(0,r.A)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}}}]);
//# sourceMappingURL=../sourcemaps/User-Management.2b19b3b5ccef4e03627bc15ed2785232.js.map