(self.webpackChunkiam=self.webpackChunkiam||[]).push([[600],{8994:(e,t,i)=>{"use strict";i.d(t,{A:()=>o});var r=i(4848),s=(i(1680),i(316)),n=i(4450),a=i(7334);const o=()=>(0,r.jsxs)("div",{className:"disabledDiv",children:[(0,r.jsx)(a.Ay,{className:"lockIcon"}),(0,r.jsx)(s.h,{headingLevel:"h2",size:"xl",className:"pf-u-mt-lg",children:"This page is temporarily disabled or unavailable at this time"}),(0,r.jsx)(n.E,{className:"pf-u-mt-lg",children:"Please check again at a another time or reach out to Red Hat customer service for additional support"})]})},8634:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>Lt});var r=i(4848),s=i(1680),n=i.n(s),a=i(8994),o=i(4747),l=i(1903),d=i(881),c=i(316),u=i(4450),h=i(7993),p=i(7334);const I=()=>(0,r.jsxs)("div",{className:"nonAdminDiv",children:[(0,r.jsx)(p.Ay,{className:"lockIcon"}),(0,r.jsx)(c.h,{headingLevel:"h2",size:"xl",className:"pf-v5-u-mt-lg",children:"Access permissions needed"}),(0,r.jsxs)(u.E,{className:"pf-v5-u-mt-lg",children:["To access Identity Provider Integration, ask your organization administrator(s) to adjust your permissions, or visit ",(0,r.jsx)(h.$n,{variant:"link",href:"/iam/my-user-access",target:"_blank",component:"a",isInline:!0,children:"My User Access"})," to learn more about your permissions"]}),(0,r.jsx)(h.$n,{onClick:()=>{window.location.href="/iam/my-user-access"},className:"pf-v5-u-mt-lg",children:"Return to home page"})]}),m={idpAlias:"",displayName:"",enabled:!1,providerId:"",createdDate:"",lastUpdatedDate:"",lastUpdatedBy:""};var v=i(8490),x=i(3913),j=i(9962),S=i(5556),g=i.n(S);const f=({startIdpSetup:e})=>(0,r.jsxs)("div",{className:"notSetupDiv",children:[(0,r.jsx)(x.Ay,{className:"cubesIcon"}),(0,r.jsx)(c.h,{headingLevel:"h2",size:"xl",className:"pf-v5-u-mt-lg",children:"No Identity Providers are currently configured"}),(0,r.jsxs)(u.E,{className:"pf-v5-u-mt-md",children:["Your organization has not integrated an identity provider. More information is available ",(0,r.jsx)(h.$n,{variant:"link",target:"_blank",href:"https://access.redhat.com/articles/7093475",component:"a",isInline:!0,children:"here"}),"."]}),(0,r.jsxs)(u.E,{children:[(0,r.jsx)(v.I,{status:"info",isInline:!0,children:(0,r.jsx)(j.Ay,{})})," Configure your identity provider, test and enable immediately, or return and enable when you're ready."]}),(0,r.jsx)(h.$n,{className:"pf-v5-u-mt-md",variant:"primary",onClick:()=>{e()},children:"Integrate an identity provider"})]});f.propTypes={configChosen:g().func};const y=f;function C(e,t){let i;return i=t?`apis/organizations/v1/identity-providers/${t}`:"apis/organizations/v1/identity-providers",(0,o.J1)(e,i)}async function A(e){try{const t=await e.auth.getToken(),i=await fetch(C(e),{method:"GET",referrerPolicy:"no-referrer",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`}});if(!i.ok)throw new Error(`Error: ${i.status} ${i.statusText}`);return i}catch(e){throw console.error("Fetch failed:",e),e}}async function T(e,t,i){try{const r=await e.auth.getToken();fetch(C(e),{method:"POST",referrerPolicy:"no-referrer",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify(t)}).then((e=>{e.json().then((e=>{if(e.error){const t=`${e.error_description}`;throw i(e),new Error(t)}i(e)}))}))}catch(e){throw console.error("Create failed:",e),e}}async function R(e,t,i){try{const r=await e.auth.getToken();fetch(C(e,(0,o.I)(r)),{method:"PATCH",referrerPolicy:"no-referrer",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify(t)}).then((e=>{e.json().then((e=>{if(e.error){const t=`${e.error_description}`;throw i(e),new Error(t)}i(e)}))}))}catch(e){throw console.error("Update failed:",e),e}}async function E(e,t){try{const i=await e.auth.getToken(),r=C(e)+`/${t}/status`,s=await fetch(r,{method:"PATCH",referrerPolicy:"no-referrer",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`},body:JSON.stringify({})});if(!s.ok)throw new Error(`Error: ${s.status} ${s.statusText}`);return s}catch(e){throw console.error("Status update failed:",e),e}}class _{static OIDC_CONFIG="OIDC_CONFIG";static SAML_CONFIG="SAML_CONFIG";static IMPORT_FROM_FILE="IMPORT_FROM_FILE";static IMPORT_FROM_URL="IMPORT_FROM_URL";static IMPORT_SAML_FROM_FILE="IMPORT_SAML_FROM_FILE";static IMPORT_SAML_FROM_URL="IMPORT_SAML_FROM_URL";static IMPORT_SAML_MANUALLY="IMPORT_SAML_MANUALLY";static FINAL_STEP="FINAL_STEP";static CUSTOMER_INFORMATION="CUSTOMER_INFORMATION"}var L=i(8072),O=i(7851),b=i(3539),M=i(3133),D=i(6780),N=i(5523);const F=(0,s.createContext)({validations:{CUSTOMER_INFORMATION:{},OIDC_CONFIG:{},SAML_CONFIG:{},IMPORT_FROM_FILE:{},IMPORT_FROM_URL:{},IMPORT_SAML_FROM_FILE:{},IMPORT_SAML_FROM_URL:{},IMPORT_SAML_MANUALLY:{}},setValidations:()=>{}}),U=()=>{const e=(0,s.useContext)(F);if(!e)throw new Error("Validation context not found");return e},P=F,k=({rootUserChoices:e,updateStatus:t})=>{const{validations:i,setValidations:n}=U();return(0,s.useEffect)((()=>{const e={...i};e.CUSTOMER_INFORMATION={protocol:{inputType:"RADIO",variant:"default",message:""}},n(e)}),[]),(0,r.jsxs)(M.l,{children:[(0,r.jsx)(c.h,{headingLevel:"h2",children:"Customer Information"}),(0,r.jsx)(u.E,{className:"pf-v5-u-color-400 pf-v5-u-font-size-sm",children:"All fields are required"}),(0,r.jsxs)(D.g,{onChange:i=>{(i=>{((e,t,i)=>{t||(t={}),t.selections||(t.selections={}),t.selections[e.target.name]=e.target.value,t.selections.protocol&&i(t.selections.protocol)})(i,e,t)})(i)},role:"radiogroup",fieldId:"authType",label:"Choose identity provider protocol",id:"protocol",children:[(0,r.jsx)(N.m,{content:"This feature is not yet available",position:"left-start",children:(0,r.jsx)(b.s,{isDisabled:!0,name:"protocol",id:"oidc-protocol",label:"OpenID Connect",value:"OIDC_CONFIG"})}),(0,r.jsx)(b.s,{name:"protocol",id:"saml-protocol",label:"SAML 2.0",value:"SAML_CONFIG"})]})]})};k.propTypes={resetNextClicked:g().func,rootUserChoices:g().object};const w=k;var $=i(3285),G=i(9257),Y=i(9937);const H=({rootUserChoices:e,updateStatus:t})=>{const[i,n]=(0,s.useState)(),a=i=>{e.selections[i.target.id]=i.target.value,e.selections.inputMethod&&t(e.selections.inputMethod)},l=e=>{if("default"===e||"error"===e)return e},{validations:d,setValidations:c}=U();return(0,s.useEffect)((()=>{const e={...d};e.OIDC_CONFIG={clientId:{inputType:"GENERAL",variant:"default",message:"The Red Hat client identifier registered within the customer identity provider. Your identity provider generates this client ID when a Red Hat client is added"},clientSecret:{inputType:"GENERAL",variant:"default",message:"Enter the client secret associated with your client identifier  by your identity provider"},inputMethod:{inputType:"RADIO",variant:"default",message:""}},c(e)}),[]),(0,r.jsxs)(M.l,{children:[(0,r.jsxs)(D.g,{label:"Client ID/SP Entity ID",onChange:e=>{a(e)},children:[(0,r.jsx)($.ks,{onChange:(e,t)=>(0,o.Xr)(t,"clientId",i,n),type:"text",id:"clientId"}),(0,r.jsx)(G.E,{children:(0,r.jsx)(Y.j,{variant:l(d.OIDC_CONFIG?.clientId?.variant),children:d.OIDC_CONFIG?.clientId?.message})})]}),(0,r.jsxs)(D.g,{label:"Client Secret",onChange:e=>{a(e)},children:[(0,r.jsx)($.ks,{onChange:(e,t)=>(0,o.Xr)(t,"clientSecret",i,n),type:"text",id:"clientSecret"}),(0,r.jsx)(G.E,{children:(0,r.jsx)(Y.j,{variant:l(d.OIDC_CONFIG?.clientSecret?.variant),children:d.OIDC_CONFIG?.clientSecret?.message})})]}),(0,r.jsxs)(D.g,{onChange:e=>{a(e)},label:"Load external IdP metadata from a config file or download it from a url",children:[(0,r.jsx)(b.s,{name:"inputChoice",id:"inputMethod",label:"Import from URL",value:"IMPORT_FROM_URL"}),(0,r.jsx)(b.s,{name:"inputChoice",id:"inputMethod",label:"Import from file",value:"IMPORT_FROM_FILE"}),(0,r.jsx)(G.E,{children:(0,r.jsx)(Y.j,{variant:l(d.OIDC_CONFIG?.inputMethod?.variant),children:d.OIDC_CONFIG?.inputMethod?.message})})]})]})};H.propTypes={resetNextClicked:g().func,rootUserChoices:g().object};const z=H,V=({rootUserChoices:e,updateStatus:t})=>{const{validations:i,setValidations:n}=U();return(0,s.useEffect)((()=>{const e={...i};e.SAML_CONFIG={inputMethod:{inputType:"RADIO",variant:"default",message:""}},n(e)}),[]),(0,r.jsxs)(M.l,{children:[(0,r.jsx)(c.h,{headingLevel:"h2",children:"SAML IdP configuration selection"}),(0,r.jsxs)(D.g,{onChange:i=>{(i=>{e.selections[i.target.name]=i.target.value,e.selections.inputMethod&&t(e.selections.inputMethod)})(i)},label:"Load external identity provider metadata",children:[(0,r.jsx)(b.s,{name:"inputMethod",id:"inportFromFile",label:"Import SAML from file",value:"IMPORT_SAML_FROM_FILE"}),(0,r.jsx)(b.s,{name:"inputMethod",id:"inportManually",label:"Import SAML manually",value:"IMPORT_SAML_MANUALLY"})]})]})};V.propTypes={resetNextClicked:g().func,rootUserChoices:g().object,updateStatus:g().func};const K=V;var B=i(3069),q=i(8805),X=i.n(q);const W=({updateStatus:e,rootUserChoices:t})=>{const[i,n]=(0,s.useState)(""),{validations:a,setValidations:o}=U();return(0,r.jsxs)(M.l,{children:[(0,r.jsx)(c.h,{headingLevel:"h2",children:"Import from file"}),(0,r.jsx)(D.g,{label:"File upload",isRequired:!0,children:(0,r.jsx)(B.e,{value:i.toString(),id:"text-file-with-edits-allowed",type:"text",onDataChange:(i,r)=>{n(r),X().parseString(r,((i,r)=>{if(i)console.error(i);else if(r){e("FINAL_STEP"),t.selections.configFileData=r;const i={...a};i.IMPORT_FROM_URL={},o(i)}}))},browseButtonText:"Upload"})}),(0,r.jsx)(u.E,{className:"pf-v5-u-color-400 pf-v5-u-font-size-sm",children:"An XML formatted file detailing the configuration of your IdP, minimally including the OpenID Connect Identity provider discovery URL"})]})};W.propTypes={rootUserChoices:g().object,rootValidation:g().object,updateStatus:g().func};const Z=W,J=({rootUserChoices:e})=>{const[t,i]=(0,s.useState)({importURL:{inputType:"DOMAIN",status:"default",message:""}});return(0,r.jsxs)(M.l,{children:[(0,r.jsx)(c.h,{headingLevel:"h2",children:"Import from URL"}),(0,r.jsxs)(D.g,{label:"URL",children:[(0,r.jsx)($.ks,{type:"text",id:"importURL",onChange:t=>{(t=>{e.current.selections[t.currentTarget.id]=t.currentTarget.value})(t)}}),(0,r.jsx)(G.E,{children:(0,r.jsx)(Y.j,{children:"import metadata from a remote identity provider discovery descriptor"})})]})]})};J.propTypes={rootUserChoices:g().object};const Q=J;var ee=i(4461),te=i(5886),ie=i(1864),re=i(2543),se=i.n(re),ne=i(6454),ae=i(9547),oe=i.n(ae);function le(e,...t){if(!e)return"";let i=e.replace(/%s|%d/g,(e=>{const i=t.shift();return String(i)}));return i=i.replace(/{(?:\d+)}/g,((e,i)=>{const r=t[parseInt(i,10)];return void 0!==r?String(r):e})),i}class de{static IDENTITY_PROVIDER_ENTITY_ID="@_entityID";static BINDING="@_Binding";static LOCATION="@_Location";static KEY_INFO="KeyInfo";static X509_DATA="X509Data";static X509_CERTIFICATE="X509Certificate";static DS_KEY_INFO="ds:KeyInfo";static DS_X509_DATA="ds:X509Data";static DS_X509_CERTIFICATE="ds:X509Certificate";static HTTP_POST_BINDING="urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST";static HTTP_REDIRECT_BINDING="urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Redirect"}const ce="identityProviderEntityId",ue="authenticationRequestsUrl",he="x509Certificate",pe="serviceProviderIssuer";class Ie{static INVALID_OR_MISSING_DATA="Invalid or missing data";static INVALID_OR_MISSING_IDPENTITYID="Invalid or missing IdP Entity ID";static INVALID_OR_MISSING_AUTH_REQUEST_URL="Invalid or missing Authentication Request URL";static INVALID_OR_MISSING_CERTIFICATE="Invalid or missing X509 Certificate";static CERTIFICATE_EXPIRED="Certificate is expired";static SUCCESS_MSG="loaded successfully";static FILE_SUCCESSFULLY_LOADED="%s "+Ie.SUCCESS_MSG+" (size: %dK)";static FILE_PARSING_ERROR="Error parsing XML: %s";static INVALID_FILE_TYPE="Invalid file type. Only XML files are allowed.";static MALICIOUS_FILE_DETECTED="Error: Invalid XML document.";static FILE_READ_ERROR="Error reading file";static SAML_XML_REQUIREMENTS="Upload an XML file with your IdP configuration. Max file size allowed is %d K";static FILE_TOO_LARGE="Must be an XML file no larger than %d KB"}const me=(0,s.forwardRef)((({rootUserChoices:e,maxKBSize:t,updateStatus:i},n)=>{const a=["text/xml"],[o,l]=(0,s.useState)(null),[d,c]=(0,s.useState)(""),[u,h]=(0,s.useState)(""),[p,I]=(0,s.useState)(null),[m,v]=(0,s.useState)(null),[x,j]=(0,s.useState)(!1),[S,g]=(0,s.useState)(!1),[f,y]=(0,s.useState)(!1);function C(){l(null),c(""),h(""),v(""),I(""),j(!1)}return(0,s.useImperativeHandle)(n,(()=>({getFile:()=>o}))),(0,r.jsxs)(D.g,{fieldId:"xml-file-with-restrictions",children:[(0,r.jsx)(B.e,{id:"xml-file-with-restrictions",type:"text",value:d,filename:u,filenamePlaceholder:"Drag and drop the SAML metadata file or upload one",onFileInputChange:(r,s)=>{if(C(),h(s.name),s){const r=new FileReader;r.onerror=()=>{y(!1),I(Ie.FILE_READ_ERROR)},r.onload=r=>{const n=r.target?.result;!function(e){return e.includes("<!DOCTYPE")||e.includes("<!ENTITY")||e.includes("SYSTEM")||(e.match(/<!ENTITY/gu)||[]).length>5||e.includes("&")&&!/&[a-zA-Z0-9]+;/u.test(e)}(n)?function(e){return a.includes(e.type)?e.size>1024*t&&(j(!0),!0):(I(Ie.INVALID_FILE_TYPE),v(null),!0)}(s)||function(t,r){try{const s=new ne.XMLParser({ignoreAttributes:!1,allowBooleanAttributes:!0,attributeNamePrefix:"@_",parseAttributeValue:!0,ignorePiTags:!0}).parse(t),n=s?.EntityDescriptor?.IDPSSODescriptor?.KeyDescriptor||s["md:EntityDescriptor"]?.["md:IDPSSODescriptor"]?.["md:KeyDescriptor"]||[],a=s.EntityDescriptor?.IDPSSODescriptor?.SingleSignOnService||s["md:EntityDescriptor"]?.["md:IDPSSODescriptor"]?.["md:SingleSignOnService"]||null,o=function(e){const t=e.EntityDescriptor||e["md:EntityDescriptor"];return t?.[de.IDENTITY_PROVIDER_ENTITY_ID]?t[de.IDENTITY_PROVIDER_ENTITY_ID]:null}(s),d=function(e){if(e||Array.isArray(e)){const t=e.find((e=>e[de.BINDING]===de.HTTP_POST_BINDING)),i=e.find((e=>e[de.BINDING]===de.HTTP_REDIRECT_BINDING));if(t?.[de.LOCATION])return t[de.LOCATION];if(i?.[de.LOCATION])return i[de.LOCATION]}return null}(a),c=function(e){const t=new Set;if(e)for(const i of Array.isArray(e)?e:[e]){const e=i?.[de.KEY_INFO]?.[de.X509_DATA],r=i?.[de.DS_KEY_INFO]?.[de.DS_X509_DATA];let s=[];e?s=Array.isArray(e?.[de.X509_CERTIFICATE])?e[de.X509_CERTIFICATE]:[e?.[de.X509_CERTIFICATE]]:r&&(s=Array.isArray(r?.[de.DS_X509_CERTIFICATE])?r[de.DS_X509_CERTIFICATE]:[r?.[de.DS_X509_CERTIFICATE]]);for(const e of s)e&&t.add(e)}return t}(n),u=function(e,t,i){if(!se().isString(e)||0===e.length)return Ie.INVALID_OR_MISSING_IDPENTITYID;if(!se().isString(t)||0===t.length)return Ie.INVALID_OR_MISSING_AUTH_REQUEST_URL;if(0===i.size)return Ie.INVALID_OR_MISSING_CERTIFICATE;try{const e=new Date,t=`-----BEGIN CERTIFICATE-----\n${i.values().next().value.match(/.{1,64}/gu)?.join("\n")}\n-----END CERTIFICATE-----`,r=oe().pki.certificateFromPem(t);if(e<r.validity.notBefore||e>r.validity.notAfter)return Ie.CERTIFICATE_EXPIRED}catch(e){return Ie.INVALID_OR_MISSING_CERTIFICATE}return Ie.SUCCESS_MSG}(o,d,c);if(u!==Ie.SUCCESS_MSG)throw new Error(u);e.selections[ce]=o,e.selections[ue]=d;const h=Array.from(c).join(",");e.selections[he]=h,e.selections.xmlFileWithRestrictions="selected",i(_.FINAL_STEP),j(!1),l(r),I(null),v(le(Ie.FILE_SUCCESSFULLY_LOADED,r.name,(r.size/1024).toFixed(2))),y(!0)}catch(e){y(!1),I(le(Ie.FILE_PARSING_ERROR,e.message))}}(n,s):(y(!1),I(Ie.MALICIOUS_FILE_DETECTED))},r.readAsText(s)}},onDataChange:(e,t)=>{c(t)},onReadStarted:(e,t)=>{I(""),v("")},onReadFinished:(e,t)=>{g(!0)},onClearClick:e=>{C(),g(!1)},dropzoneProps:{accept:{"text/xml":[".xml"]},maxSize:1024*t,onDropRejected:()=>{j(!0)}},validated:x?"error":"default",browseButtonText:"Upload",hideDefaultPreview:!0}),(0,r.jsx)(ie.e,{children:(0,r.jsxs)(G.E,{children:[(0,r.jsx)(Y.j,{variant:x?"error":"default",children:le(x?Ie.FILE_TOO_LARGE:Ie.SAML_XML_REQUIREMENTS,t)}),(m||p)&&(0,r.jsx)(Y.j,{variant:p?"error":"success",children:p??m})]})}),(0,r.jsx)("div",{className:"xml-highlighter",children:f&&d&&(0,r.jsx)(te.Q,{toggleText:S?"Show less":"Show more",onToggle:(e,t)=>{g(t)},isExpanded:S,children:(0,r.jsx)("div",{className:"highlighter-panel",children:d})})})]})}));me.displayName="SamlMetadataFile",me.propTypes={maxKBSize:g().number.isRequired};var ve=i(358),xe=i(1358);class je{static NO_SPECIAL_CHARS="This field is expected to consist only of alphanumeric characters. Spaces, dashes, and special characters will not be accepted.";static ENTITY_ID="The Entity ID attribute is in your SAML metadata configuration.";static IDENTITY_PROVIDER_ENTITY_ID="The Entity ID used to validate the issuer for received SAML assertions.";static SERVICE_PROVIDER_ISSUER='The issuer that will be used to uniquely identify the SAML Service Provider. This might also be referred to as a "client" or a "Service Provider Entity ID".';static AUTHENTICATION_REQUEST_URL="The URL that receives SAML authentication requests; i.e. the URL of your internal log in page.";static X509_CERTIFICATE=["A Base64 encoded certificate. This must not include the certificate preamble/ending: <code>(-----BEGIN/END CERTIFICATE-----).</code>","Multiple certificates may be included. Separate multiple certificates with a comma if you need to attach more than one.","An x509 certificate must be provided, as it is essential for signing assertions from the Service Provider to secure SAML communication."]}const Se=({rootUserChoices:e,updateStatus:t})=>{const[i,n]=(0,s.useState)(),{validations:a,setValidations:o}=U();(0,s.useEffect)((()=>{n((0,r.jsx)(me,{rootUserChoices:e,updateStatus:t,maxKBSize:100}));const i={...a};i.IMPORT_SAML_FROM_FILE={serviceProviderIssuer:{inputType:"ENTITYID",variant:"default",message:je.SERVICE_PROVIDER_ISSUER},xmlFileWithRestrictions:{inputType:"GLOBAL",variant:"default",message:""}},o(i)}),[]);const l=e=>{if("default"===e||"error"===e)return e};return(0,r.jsxs)(M.l,{children:[(0,r.jsx)(c.h,{headingLevel:"h2",children:"Import SAML from file"}),(0,r.jsxs)(D.g,{label:"Service provider issuer",isRequired:!0,onChange:i=>{(i=>{e.selections[i.target.id]=i.target.value,e.selections&&t(_.FINAL_STEP)})(i)},labelIcon:(0,r.jsx)(ee.A,{triggerAction:"hover",bodyContent:(0,r.jsx)("div",{children:"This field is expected to consist only of alphanumeric characters. Spaces, dashes, and special characters will not be accepted."}),children:(0,r.jsx)(h.$n,{variant:"plain",type:"button",onClick:e=>e.preventDefault(),className:`customPopover ${ve.A.formGroupLabelHelp}`,children:(0,r.jsx)(xe.Ay,{})})}),children:[(0,r.jsx)($.ks,{type:"text",id:pe}),(0,r.jsx)(G.E,{children:(0,r.jsx)(Y.j,{variant:l(a.IMPORT_SAML_FROM_FILE?.serviceProviderIssuer?.variant),children:a.IMPORT_SAML_FROM_FILE?.serviceProviderIssuer?.message||je.SERVICE_PROVIDER_ISSUER})})]}),(0,r.jsxs)(D.g,{label:"File upload",isRequired:!0,children:[i,(0,r.jsx)(G.E,{children:(0,r.jsx)(Y.j,{variant:l(a.IMPORT_SAML_FROM_FILE?.xmlFileWithRestrictions?.variant),children:a.IMPORT_SAML_FROM_FILE?.xmlFileWithRestrictions?.message})})]})]})};Se.propTypes={rootUserChoices:g().object,updateStatus:g().func};const ge=Se;var fe=i(5843);const ye=({primeNextStep:e,rootUserChoices:t})=>{const i=i=>{t.selections[i.target.id]=i.target.value,t.selections&&e(_.FINAL_STEP)},n=e=>{if("default"===e||"error"===e)return e},{validations:a,setValidations:o}=U();return(0,s.useEffect)((()=>{const e={...a};e.IMPORT_SAML_MANUALLY={identityProviderEntityId:{inputType:"ENTITYID",variant:"default",message:je.IDENTITY_PROVIDER_ENTITY_ID},serviceProviderIssuer:{inputType:"ENTITYID",variant:"default",message:je.SERVICE_PROVIDER_ISSUER},authenticationRequestsUrl:{inputType:"DOMAIN",variant:"default",message:je.AUTHENTICATION_REQUEST_URL},x509Certificate:{inputType:"x509",variant:"default",message:je.X509_CERTIFICATE.join("@")}},o(e)}),[]),(0,r.jsxs)(M.l,{children:[(0,r.jsx)(c.h,{headingLevel:"h2",children:"Configure SAML manually"}),(0,r.jsxs)(D.g,{label:"Identity provider Entity ID",isRequired:!0,onChange:e=>{i(e)},children:[(0,r.jsx)($.ks,{type:"text",id:ce}),(0,r.jsx)(G.E,{children:(0,r.jsx)(Y.j,{variant:n(a.IMPORT_SAML_MANUALLY?.identityProviderEntityId?.variant),children:a.IMPORT_SAML_MANUALLY?.identityProviderEntityId?.message||je.IDENTITY_PROVIDER_ENTITY_ID})})]}),(0,r.jsxs)(D.g,{label:"Authentication request url",isRequired:!0,onChange:e=>{i(e)},children:[(0,r.jsx)($.ks,{type:"text",id:ue}),(0,r.jsx)(G.E,{children:(0,r.jsx)(Y.j,{variant:n(a.IMPORT_SAML_MANUALLY?.authenticationRequestsUrl?.variant),children:a.IMPORT_SAML_MANUALLY?.authenticationRequestsUrl?.message||je.AUTHENTICATION_REQUEST_URL})})]}),(0,r.jsxs)(D.g,{label:"Service provider issuer",isRequired:!0,onChange:e=>{i(e)},labelIcon:(0,r.jsx)(ee.A,{triggerAction:"hover",bodyContent:(0,r.jsx)("div",{children:je.NO_SPECIAL_CHARS}),children:(0,r.jsx)(h.$n,{variant:"plain",type:"button",onClick:e=>e.preventDefault(),className:`customPopover ${ve.A.formGroupLabelHelp}`,children:(0,r.jsx)(xe.Ay,{})})}),children:[(0,r.jsx)($.ks,{type:"text",id:pe}),(0,r.jsx)(G.E,{children:(0,r.jsx)(Y.j,{variant:n(a.IMPORT_SAML_MANUALLY?.serviceProviderIssuer?.variant),children:a.IMPORT_SAML_MANUALLY?.serviceProviderIssuer?.message||je.SERVICE_PROVIDER_ISSUER})})]}),(0,r.jsxs)(D.g,{label:"x509 certificate",isRequired:!0,onChange:e=>{i(e)},children:[(0,r.jsx)(fe.fs,{resizeOrientation:"vertical",type:"text",id:he}),(0,r.jsx)(G.E,{children:(0,r.jsx)(Y.j,{variant:n(a.IMPORT_SAML_MANUALLY?.x509Certificate?.variant),children:(()=>{const e=a.IMPORT_SAML_MANUALLY?.x509Certificate?.message?.trim();return e?e.split("@").map(((e,t)=>(0,r.jsx)("p",{dangerouslySetInnerHTML:{__html:e}},t))):je.X509_CERTIFICATE.map(((e,t)=>(0,r.jsx)("p",{dangerouslySetInnerHTML:{__html:e}},t)))})()})})]})]})};var Ce=i(6165);const Ae=({accessToken:e})=>{const[t,i]=(0,s.useState)(""),n=(0,d.A)(),a=e=>(0,o.Gw)(n)+e;return(0,s.useEffect)((()=>{i((0,o.I)(e))}),[]),(0,r.jsxs)(M.l,{children:[(0,r.jsx)(c.h,{headingLevel:"h2",children:"Configure these URLs in your Identity Provider"}),(0,r.jsx)(u.E,{className:"pf-v5-u-color-400 pf-v5-u-font-size-sm",children:"Please review the following information and verify that these are entered where required in your organization’s identity provider."}),(0,r.jsx)(D.g,{label:"Service provider metadata URL",labelIcon:(0,r.jsx)(ee.A,{triggerAction:"hover",bodyContent:(0,r.jsx)("div",{children:"Service provider metadata used to integrate Red Hat with your identity provider."}),children:(0,r.jsx)(h.$n,{variant:"plain",type:"button",onClick:e=>e.preventDefault(),className:`customPopover ${ve.A.formGroupLabelHelp}`,children:(0,r.jsx)(xe.Ay,{})})}),children:(0,r.jsx)(Ce.Ck,{isReadOnly:!0,clickTip:"copied",children:a(`broker/${t}/endpoint/descriptor`)})}),(0,r.jsx)(D.g,{label:"Redirect URL / Assertion Consumption Service (ACS) URL",labelIcon:(0,r.jsx)(ee.A,{triggerAction:"hover",bodyContent:(0,r.jsx)("div",{children:"The redirect URL to use when configuring your identity provider. This is where your identity provider will redirect users to authenticate to Red Hat."}),children:(0,r.jsx)(h.$n,{variant:"plain",type:"button",onClick:e=>e.preventDefault(),className:`customPopover ${ve.A.formGroupLabelHelp}`,children:(0,r.jsx)(xe.Ay,{})})}),children:(0,r.jsx)(Ce.Ck,{isReadOnly:!0,clickTip:"copied",children:a(`broker/${t}/endpoint`)})})]})};var Te=i(4698),Re=i(6882);const Ee=({userChoices:e,setPreviousTriggered:t,currentState:i})=>{const{goToNextStep:s,goToPrevStep:n}=(0,Te.CV)(),{validations:a,setValidations:l}=U();return(0,r.jsxs)(Re.W,{children:[(0,r.jsx)(h.$n,{variant:"secondary",onClick:()=>{n(),t()},children:"Back"}),(0,r.jsx)(h.$n,{onClick:()=>{(0,o.Qe)(e,i,a,l)||s()},children:"Next"})]})};var _e=i(9915),Le=i(3543);const Oe=({userChoiceData:e,previous:t,currentState:i})=>{const s=(0,d.A)(),{goToNextStep:a,goToPrevStep:l}=(0,Te.CV)(),[c,u]=n().useState(!1),[p,I]=n().useState(),{validations:m,setValidations:v}=U();return(0,r.jsxs)(Re.W,{children:[(0,r.jsx)(h.$n,{variant:"secondary",onClick:()=>{l(),t()},children:"Back"}),(0,r.jsx)(h.$n,{onClick:()=>{(0,o.Qe)(e.current,i,m,v)?u(!1):(u(!0),T(s,{providerId:"OIDC_CONFIG"===e.current.selections.protocol?"oidc-improved":"saml-improved",identityProviderEntityId:e.current.selections[ce],authenticationRequestsUrl:e.current.selections[ue],serviceProviderEntityId:e.current.selections[pe],x509Certificate:e.current.selections[he].replace(/[\s\n\r]/gu,"")},(e=>{var t;e.error?(console.error("Error Type: "+e.error),console.error("Error Message: "+e.fields),t="Failed to upload config: "+e.fields,I((0,r.jsx)(_e.F,{variant:"danger",isInline:!0,isPlain:!0,title:t,timeout:8e3,onTimeout:()=>{I([])}})),u(!1)):(u(!1),a())})))},isLoading:c,children:"Next"}),(0,r.jsx)(Le._,{isLiveRegion:!0,className:"pf-v5-u-mt-sm",children:p})]})};Oe.propTypes={userChoiceData:g().object};const be=Oe;var Me=i(3873),De=i(678),Ne=i(3113);const Fe=()=>{const[e,t]=n().useState(!1);return(0,r.jsx)(Re.W,{children:(0,r.jsxs)(De.B,{hasGutter:!0,children:[(0,r.jsx)(Ne.a,{children:(0,r.jsx)(Me.S,{onChange:()=>{t(!e)},label:"I have verified that this information is properly set in my identity provider.",id:"confirmation",isChecked:e,isRequired:!0})}),(0,r.jsx)(Ne.a,{children:(0,r.jsx)(h.$n,{onClick:()=>{window.location.reload()},isDisabled:!e,children:"Submit"})})]})})};var Ue=i(7565);const Pe=({accessToken:e})=>{const t=(0,d.A)(),i=(0,s.useRef)({selections:{}}),[n,a]=(0,s.useState)(!1),[o,l]=(0,s.useState)(!1),[c,u]=(0,s.useState)(!0),[h,p]=(0,s.useState)(!0),[I,v]=(0,s.useState)(m);(0,s.useEffect)((()=>{A(t).then((e=>204===e.status?{status:""}:e.json())).then((e=>{"oidc-improved"===e.providerId||"saml-improved"===e.providerId?(v(e),u(!1),a(!0)):e.error?(u(!1),a(!1),l(!1)):(u(!1),a(!1),l(!0))})).catch((e=>{console.error("Error: ",e),u(!1)}))}),[]);const[x,j]=(0,s.useState)({CUSTOMER_INFORMATION:{},OIDC_CONFIG:{},SAML_CONFIG:{},IMPORT_FROM_FILE:{},IMPORT_FROM_URL:{},IMPORT_SAML_FROM_FILE:{},IMPORT_SAML_FROM_URL:{},IMPORT_SAML_MANUALLY:{}}),[S,g]=(0,s.useState)({currentState:_.CUSTOMER_INFORMATION,previousState:""}),[f,y]=(0,s.useState)({hideOIDC:!0,hideSAML:!0,hideImportFromURL:!0,hideImportFromFile:!0,hideImportManually:!0,hideFinish:!0}),C=e=>{let t;switch(e){case _.OIDC_CONFIG:t={...f},t.hideOIDC=!1,t.hideSAML=!0,y(t),g({currentState:e,previousState:_.CUSTOMER_INFORMATION});break;case _.SAML_CONFIG:t={...f},t.hideSAML=!1,t.hideOIDC=!0,y(t),g({currentState:e,previousState:_.CUSTOMER_INFORMATION});break;case _.IMPORT_FROM_FILE:t={...f},t.hideImportFromFile=!1,t.hideImportFromURL=!0,y(t),g({currentState:e,previousState:_.OIDC_CONFIG});break;case _.IMPORT_FROM_URL:t={...f},t.hideImportFromFile=!0,t.hideImportFromURL=!1,y(t),g({currentState:e,previousState:_.OIDC_CONFIG});break;case _.IMPORT_SAML_FROM_FILE:t={...f},t.hideImportManually=!0,t.hideImportFromFile=!1,y(t),g({currentState:e,previousState:_.SAML_CONFIG});break;case _.IMPORT_SAML_MANUALLY:t={...f},t.hideImportManually=!1,t.hideImportFromFile=!0,y(t),g({currentState:e,previousState:_.SAML_CONFIG});break;case _.IMPORT_SAML_FROM_URL:t={...f},t.hideImportFromURL=!1,y(t),g({currentState:e,previousState:_.SAML_CONFIG});break;case _.FINAL_STEP:t={...f},t.hideFinish=!1,y(t),g({currentState:e,previousState:S.previousState});break;default:y({hideOIDC:!0,hideSAML:!0,hideImportFromURL:!0,hideImportFromFile:!0,hideImportManually:!0,hideFinish:!0})}},T=e=>{const t=Object.keys(i.current.selections);for(let r=0;r<t.length;r++)e.includes(t[r])||delete i.current.selections[t[r]]},R=()=>{(e=>{switch(e){case _.OIDC_CONFIG:T(["protocol"]),g({currentState:e,previousState:_.CUSTOMER_INFORMATION}),y({hideOIDC:!1,hideSAML:!0,hideImportFromURL:!0,hideImportFromFile:!0,hideImportManually:!0,hideFinish:!0});break;case _.SAML_CONFIG:T(["protocol"]),g({currentState:e,previousState:_.CUSTOMER_INFORMATION}),y({hideOIDC:!0,hideSAML:!1,hideImportFromURL:!0,hideImportFromFile:!0,hideImportManually:!0,hideFinish:!0});break;case _.IMPORT_FROM_FILE:T(["clientId","clientSecret","inputMethod","protocol"]),g({currentState:e,previousState:_.OIDC_CONFIG}),y({hideOIDC:!1,hideSAML:!0,hideImportFromURL:!0,hideImportFromFile:!1,hideImportManually:!0,hideFinish:!0});break;case _.IMPORT_FROM_URL:T(["clientId","clientSecret","inputMethod","protocol"]),g({currentState:e,previousState:_.OIDC_CONFIG}),y({hideOIDC:!1,hideSAML:!0,hideImportFromURL:!1,hideImportFromFile:!0,hideImportManually:!0,hideFinish:!0});break;case _.IMPORT_SAML_FROM_URL:T(["clientId","clientSecret","inputMethod","protocol"]),g({currentState:e,previousState:_.SAML_CONFIG}),y({hideOIDC:!0,hideSAML:!1,hideImportFromURL:!1,hideImportFromFile:!0,hideImportManually:!1,hideFinish:!0});break;case _.IMPORT_SAML_MANUALLY:T(["clientId","clientSecret","inputMethod","protocol"]),g({currentState:e,previousState:_.SAML_CONFIG}),y({hideOIDC:!0,hideSAML:!1,hideImportFromURL:!0,hideImportFromFile:!0,hideImportManually:!1,hideFinish:!0});break;case _.IMPORT_SAML_FROM_FILE:T(["clientId","clientSecret","inputMethod","protocol"]),g({currentState:e,previousState:_.SAML_CONFIG}),y({hideOIDC:!0,hideSAML:!1,hideImportFromURL:!0,hideImportFromFile:!1,hideImportManually:!0,hideFinish:!0});break;default:T([""]),y({hideOIDC:!0,hideSAML:!0,hideImportFromURL:!0,hideImportFromFile:!0,hideImportManually:!0,hideFinish:!0})}})(S.previousState)};return(0,r.jsx)("div",{className:"flowPage",children:(0,r.jsx)(Ue.d8,{children:(0,r.jsx)("div",{children:(0,r.jsx)(P.Provider,{value:{validations:x,setValidations:j},children:(0,r.jsxs)(L.s,{onClose:()=>{},isProgressive:!0,children:[(0,r.jsx)(O.W,{id:"CUSTOMERINFORMATION",name:"Customer information",footer:(0,r.jsx)(Ee,{userChoices:i.current,setPreviousTriggered:R,currentState:_.CUSTOMER_INFORMATION}),children:(0,r.jsx)(w,{rootUserChoices:i.current,updateStatus:C})}),(0,r.jsx)(O.W,{id:"OIDCCONFIG",name:"OIDC Configuration",isHidden:f.hideOIDC,footer:(0,r.jsx)(Ee,{userChoices:i.current,setPreviousTriggered:R,currentState:"OIDC_CONFIG"}),children:(0,r.jsx)(z,{rootUserChoices:i.current,updateStatus:C})}),(0,r.jsx)(O.W,{id:"IMPORTFROMFILE",name:"Import config from file",isHidden:!(!f.hideOIDC&&!f.hideImportFromFile),footer:(0,r.jsx)(be,{userChoiceData:i,previous:R,currentState:_.IMPORT_FROM_FILE}),children:(0,r.jsx)(Z,{updateStatus:C,rootUserChoices:i.current})}),(0,r.jsx)(O.W,{id:"IMPORTFROMURL",name:"Import config from URL",isHidden:!(!f.hideOIDC&&!f.hideImportFromURL),footer:(0,r.jsx)(be,{userChoiceData:i,previous:R,currentState:_.IMPORT_FROM_URL}),children:(0,r.jsx)(Q,{rootUserChoices:i})}),(0,r.jsx)(O.W,{id:"SAMLCONFIG",name:"SAML configuration",isHidden:f.hideSAML,footer:(0,r.jsx)(Ee,{userChoices:i.current,setPreviousTriggered:R,currentState:"SAML_CONFIG"}),children:(0,r.jsx)(K,{rootUserChoices:i.current,updateStatus:C})}),(0,r.jsx)(O.W,{name:"Import SAML from file",id:"IMPORTSAMLFROMFILE",isHidden:!(!f.hideSAML&&!f.hideImportFromFile),footer:(0,r.jsx)(be,{userChoiceData:i,previous:R,currentState:_.IMPORT_SAML_FROM_FILE}),children:(0,r.jsx)(ge,{rootUserChoices:i.current,updateStatus:C})}),(0,r.jsx)(O.W,{name:"Configure SAML manually",id:"IMPORTSAMLMANUALLY",isHidden:!(!f.hideSAML&&!f.hideImportManually),footer:(0,r.jsx)(be,{userChoiceData:i,previous:R,currentState:_.IMPORT_SAML_MANUALLY}),children:(0,r.jsx)(ye,{primeNextStep:C,rootUserChoices:i.current})}),(0,r.jsx)(O.W,{id:"FINALSTEP",name:"Configure URLs in your IDP",isHidden:f.hideFinish,footer:(0,r.jsx)(Fe,{}),children:(0,r.jsx)(Ae,{accessToken:e})})]})})})})})};Pe.propTypes={accessToken:g().string};const ke=Pe;var we=i(168),$e=i(4091),Ge=i(1976);class Ye{static ISSUER="The issuer is how your identity provider identifies itself, which we verify on all identity-provider-issued tokens for added security.";static CLIENT_ID="The client identifier used to register the third party service. Some identity providers may refer to this as an Application";static CLIENT_SECRET="The secret value registered with this client.";static AUTHORIZATION_URL="The URL that performs authentication of the end-user.";static TOKEN_URL="The URL where an authorization code can be exchanged for an access token and ID token.";static PUBLIC_KEY="This public key will be used to verify the signature of the JWTs created by the identity provider.";static PUBLIC_KEY_ID="The key identifier (KID) for the provided Public Key field below."}const He=({baseData:e,editFunction:t,editableData:i,isCreation:s})=>{const n=()=>!s&&!(!e||!e.enabled);return(0,r.jsxs)("div",{children:[(0,r.jsxs)(D.g,{label:"Issuer",fieldId:"oidc-issuer",children:[(0,r.jsx)($.ks,{isDisabled:n(),onChange:t,type:"text",id:"oidc-issuer",name:"issuer",value:i.issuer}),(0,r.jsx)(ie.e,{children:(0,r.jsx)(G.E,{children:(0,r.jsx)(Y.j,{children:Ye.ISSUER})})})]}),(0,r.jsxs)(D.g,{label:"Client ID",fieldId:"oidc-client-id",children:[(0,r.jsx)($.ks,{isDisabled:n(),onChange:t,type:"text",id:"oidc-client-id",name:"clientId",value:i.clientId}),(0,r.jsx)(ie.e,{children:(0,r.jsx)(G.E,{children:(0,r.jsx)(Y.j,{children:Ye.CLIENT_ID})})})]}),(0,r.jsxs)(D.g,{label:"Client Secret",fieldId:"oidc-client-secret",children:[(0,r.jsx)($.ks,{isDisabled:n(),onChange:t,type:"text",id:"oidc-client-secret",name:"clientSecret",value:i.clientSecret}),(0,r.jsx)(ie.e,{children:(0,r.jsx)(G.E,{children:(0,r.jsx)(Y.j,{children:Ye.CLIENT_SECRET})})})]}),(0,r.jsxs)(D.g,{label:"Authorization URL",fieldId:"oidc-authorization-url-id",children:[(0,r.jsx)($.ks,{isDisabled:n(),onChange:t,type:"text",id:"oidc-token-url-id",name:"authorizationUrl",value:i.authorizationUrl}),(0,r.jsx)(ie.e,{children:(0,r.jsx)(G.E,{children:(0,r.jsx)(Y.j,{children:Ye.AUTHORIZATION_URL})})})]}),(0,r.jsxs)(D.g,{label:"Token URL",fieldId:"authorization-url",children:[(0,r.jsx)($.ks,{isDisabled:n(),onChange:t,type:"text",id:"authorization-url",name:"tokenUrl",value:i.tokenUrl}),(0,r.jsx)(ie.e,{children:(0,r.jsx)(G.E,{children:(0,r.jsx)(Y.j,{children:Ye.TOKEN_URL})})})]}),(0,r.jsxs)(D.g,{label:"Public Key ID",fieldId:"publicKeyId",children:[(0,r.jsx)($.ks,{isDisabled:n(),onChange:t,type:"text",id:"public-key-id",name:"publicKeyId",value:i.publicKeyId}),(0,r.jsx)(ie.e,{children:(0,r.jsx)(G.E,{children:(0,r.jsx)(Y.j,{children:Ye.PUBLIC_KEY_ID})})})]}),(0,r.jsxs)(D.g,{label:"Public Key",fieldId:"publicKey",children:[(0,r.jsx)($.ks,{isDisabled:n(),onChange:t,type:"text",id:"public-key",name:"publicKey",value:i.publicKey}),(0,r.jsx)(ie.e,{children:(0,r.jsx)(G.E,{children:(0,r.jsx)(Y.j,{children:Ye.PUBLIC_KEY})})})]})]})};var ze=i(8025),Ve=i(9923),Ke=i(928);const Be=({idpAlias:e,isOpen:t,onClose:i,recomputeAppState:s})=>{const n=(0,d.A)();return(0,r.jsxs)(ze.a,{titleIconVariant:"warning",title:"Disable identity provider?",isOpen:t,variant:ze.d.small,onClose:i,children:[(0,r.jsx)(Ve.c,{children:"Disabling your identity provider will allow users on your organization to sign-in using their Red Hat credentials."}),(0,r.jsxs)(Ke.j,{children:[(0,r.jsx)(h.$n,{variant:"danger",onClick:()=>(async()=>{await E(n,e),s(),i()})(),children:"Disable"}),(0,r.jsx)(h.$n,{variant:"link",onClick:i,children:"Cancel"})]})]})};var qe=i(5507);const Xe=({idpAlias:e,isOpen:t,onClose:i,recomputeAppState:n})=>{const a=(0,d.A)(),l=(0,o.Gw)(a),[p,I]=(0,s.useState)((0,r.jsx)(h.$n,{})),[m,v]=(0,s.useState)(!1),[x,j]=(0,s.useState)("info"),[S,g]=(0,s.useState)(""),[f,y]=(0,s.useState)((0,r.jsx)(u.E,{})),[C,A]=(0,s.useState)(""),T=()=>{I((0,r.jsx)(h.$n,{})),v(!0),j("info"),g("Identity provider testing"),y((0,r.jsx)(u.E,{children:"Testing will open a pop-up window that will authenticate with your configured identity provider. If you are not currently signed into this identity provider, please do so in the pop-up window. Please be sure that pop-ups are allowed in your browser."})),A("")};(0,s.useEffect)((()=>{T()}),[]);const R=()=>{i(),T()},_=async()=>{await E(a,e),n(),R()};return(0,r.jsx)(ze.a,{titleIconVariant:x,title:S,isOpen:t,variant:ze.d.medium,onClose:R,actions:[null!==p.key?p:[(0,r.jsx)(h.$n,{isDisabled:!m,variant:"primary",onClick:()=>{window.addEventListener("message",(e=>{l.includes(e.origin)&&function(e){!0===e.data.success?(I((0,r.jsx)(h.$n,{variant:"primary",onClick:_,children:"Enable"},"Enable")),j("success"),g("Test successful. Enable for your organization?"),y((0,r.jsx)(u.E,{children:"Enabling will require users on your organization to authenticate through your newly-configured identity provider on their next authentication. If you do not enable this now, you will have to re-test again before being allowed to enable this identity provider."}))):(I((0,r.jsx)(h.$n,{variant:"primary",onClick:R,children:"Dismiss"},"Dismiss")),j("danger"),g("Test failed"),y((0,r.jsxs)(u.E,{children:["Try looking over some ",(0,r.jsx)(qe.Link,{to:"https://access.redhat.com/articles/7092870",children:"common mistakes"})," and then re-testing. If that doesn’t help, ",(0,r.jsx)(qe.Link,{to:"https://access.redhat.com/support/",children:"contact support"}),"."]})),A(e.data.errorMsg))}(e)})),v(!1),y((0,r.jsx)(u.E,{children:"Please complete identity provider testing in pop-up window"})),window.open((()=>{const t={idp_alias:e},i=encodeURIComponent(JSON.stringify(t));return`${l}protocol/openid-connect/auth?client_id=idp-connectivity-testing-login-client&redirect_uri=${l}&response_mode=query&response_type=code&scope=openid&state=${i}`})(),"RH IdP Integration Testing","width=600,height=600,resizable,scrollbars")},children:"Test"},"Test"),(0,r.jsx)(h.$n,{variant:"link",onClick:R,children:"Cancel"},"cancel")]],children:(0,r.jsxs)(Ge.n,{children:[(0,r.jsx)(u.E,{children:f}),(0,r.jsx)(c.h,{headingLevel:"h3",hidden:!C,children:"Error:"}),(0,r.jsx)(u.E,{hidden:!C,children:C})]})})},We=({idpAlias:e,isOpen:t,onClose:i,recomputeAppState:s})=>{const n=(0,d.A)();return(0,r.jsxs)(ze.a,{titleIconVariant:"warning",title:"Delete identity provider?",isOpen:t,variant:ze.d.medium,onClose:i,children:[(0,r.jsxs)(Ve.c,{children:["Until a new integration is configured, users will log in with their Red Hat account credentials.",(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),"When a new integration is configured, users who previously linked their IdP user and Red Hat user will need to repeat this step once on their next log in."]}),(0,r.jsxs)(Ke.j,{children:[(0,r.jsx)(h.$n,{variant:"danger",onClick:()=>(async()=>{await async function(e,t){try{const i=await e.auth.getToken(),r=C(e)+`/${t}`,s=await fetch(r,{method:"DELETE",referrerPolicy:"no-referrer",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`},body:JSON.stringify({})});if(!s.ok)throw new Error(`Error: ${s.status} ${s.statusText}`);return s}catch(e){throw console.error("IdP deletion failed:",e),e}}(n,e),s(),i()})(),children:"Delete"}),(0,r.jsx)(h.$n,{variant:"link",onClick:i,children:"Cancel"})]})]})};class Ze{static variableConversion={identityProviderEntityId:"Identity provider Entity ID",authenticationRequestsUrl:"Single sign-on authentication request URL",serviceProviderEntityId:"Service provider issuer",x509Certificate:"x509 certificate",issuer:"Issuer",clientId:"client ID",clientSecret:"Client Secret",authorizationUrl:"Authorization URL",tokenUrl:"Token URL",publicKeyId:"Public Key ID",publicKey:"Public Key"};static getPrintableString(e){return this.variableConversion[e]??e}}class Je{static UPDATE_SUCCESS_MESSAGE="The IDP configuration was updated successfully.";static UPDATE_ERROR_TITLE="Error updating IDP configuration."}const Qe=({oidcData:e,milestoneThreeEnabled:t,recomputeAppState:i})=>{const a=(0,d.A)(),l=(0,o.Gw)(a),[p,I]=(0,s.useState)(!1),[m,v]=(0,s.useState)(!1),[x,j]=(0,s.useState)(!1),[S,g]=(0,s.useState)(!1),[f,y]=(0,s.useState)(e),[C,A]=n().useState(),T=()=>{document.getElementById("headerAnchor").scrollIntoView({behavior:"smooth"})},E=e=>{const t=[],i=Object.keys(e);i.forEach((i=>{t.push((0,r.jsxs)("div",{children:[(0,r.jsxs)("span",{className:"bolderKey",children:[Ze.getPrintableString(i),":"]})," ",e[i]]},i))})),i.length>0?(A((0,r.jsx)(_e.F,{variant:"danger",title:Je.UPDATE_ERROR_TITLE,children:t})),T()):A([])};return(0,r.jsxs)(M.l,{children:[(0,r.jsx)(Le._,{id:"userNotification",isLiveRegion:!0,className:"alertList",children:C}),(0,r.jsx)(He,{baseData:e,editableData:f,editFunction:e=>{S||g(!0);const t={...f};t[e.currentTarget.name]=e.currentTarget.value,y(t)},isCreation:!1}),(0,r.jsx)(c.h,{headingLevel:"h3",children:"URLs required for identity provider configuration"}),(0,r.jsx)(Ge.n,{children:(0,r.jsx)(u.E,{component:u.Y.p,children:"Use these URLs to assist in completing setup within your identity provider."})}),(0,r.jsx)(D.g,{label:"Service provider metadata URL",fieldId:"metadata-url",labelIcon:(0,r.jsx)(ee.A,{triggerAction:"hover",bodyContent:(0,r.jsx)("div",{children:"Service provider metadata used to integrate Red Hat with your identity provider."}),children:(0,r.jsx)(h.$n,{variant:"plain",type:"button",onClick:e=>e.preventDefault(),className:`customPopover ${ve.A.formGroupLabelHelp}`,children:(0,r.jsx)(xe.Ay,{})})}),children:(0,r.jsx)(Ce.Ck,{type:"text",id:"metadata-url",name:"metadata-url",isReadOnly:!0,children:`${l}.well-known/openid-configuration`})}),(0,r.jsx)(D.g,{label:"Redirect URL / Assertion Consumption Service (ACS) URL",fieldId:"redirect-url",labelIcon:(0,r.jsx)(ee.A,{triggerAction:"hover",bodyContent:(0,r.jsx)("div",{children:"The redirect URL to use when configuring your identity provider. This represents your company’s SSO Portal where users authenticate to Red Hat."}),children:(0,r.jsx)(h.$n,{variant:"plain",type:"button",onClick:e=>e.preventDefault(),className:`customPopover ${ve.A.formGroupLabelHelp}`,children:(0,r.jsx)(xe.Ay,{})})}),children:(0,r.jsx)(Ce.Ck,{type:"text",id:"redirect-url",name:"redirect-url",isReadOnly:!0,children:`${l}broker/${e.idpAlias}/endpoint`})}),(0,r.jsxs)($e.l,{children:[(0,r.jsx)(we.a,{children:t?e.enabled?(0,r.jsx)(we.a,{children:(0,r.jsx)(h.$n,{variant:"danger",onClick:()=>v(!0),children:"Disable"})}):S?(0,r.jsx)(h.$n,{onClick:()=>(()=>{E({});const{providerId:e,issuer:t,clientId:i,clientSecret:s,authorizationUrl:n,tokenUrl:o,publicKey:l,publicKeyId:d}=f;R(a,{providerId:e,issuer:t,clientId:i,clientSecret:s,authorizationUrl:n,tokenUrl:o,publicKey:l,publicKeyId:d},(e=>{if(e.error&&e.fields){const t=Array.isArray(e.fields)?Object.fromEntries(e.fields.map(((e,t)=>[`${t}`,e]))):e.fields;E(t)}else t=Je.UPDATE_SUCCESS_MESSAGE,A((0,r.jsx)(_e.F,{variant:"success",title:t,timeout:12e3,onTimeout:()=>{A([])}})),T(),g(!1),y((t=>({...t,lastUpdatedDate:e.lastUpdatedDate,lastUpdatedBy:e.lastUpdatedBy})));var t})).catch((e=>{console.error("Failed to update IdP:",e)}))})(),children:"Update"}):(0,r.jsx)(h.$n,{onClick:()=>I(!0),children:"Test and enable"}):(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(ee.A,{triggerAction:"hover","aria-label":"Hoverable popover",headerContent:(0,r.jsx)("div",{children:"Read-Only"}),bodyContent:(0,r.jsx)("div",{children:"This page currently shows a read-only version of your configuration. Forthcoming enhancements will provide the ability to edit."}),footerContent:"",children:(0,r.jsx)(we.a,{children:e.enabled?(0,r.jsx)(h.$n,{variant:"danger",isDisabled:!0,children:"Disable"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(h.$n,{variant:"primary",isDisabled:!0,children:"Test and enable"}),(0,r.jsx)(h.$n,{variant:"link",isDanger:!0,isDisabled:!0,children:"Delete identity provider"})]})})})})}),(0,r.jsx)(we.a,{children:(0,r.jsx)(h.$n,{variant:"link",onClick:()=>j(!0),isDanger:!0,children:"Delete identity provider"})}),m&&(0,r.jsx)(Be,{idpAlias:e.idpAlias,isOpen:m,onClose:()=>v(!1),recomputeAppState:i}),p&&(0,r.jsx)(Xe,{idpAlias:e.idpAlias,isOpen:p,onClose:()=>I(!1),recomputeAppState:i}),x&&(0,r.jsx)(We,{idpAlias:e.idpAlias,isOpen:x,onClose:()=>j(!1),recomputeAppState:i})]})]})},et=({baseData:e,editFunction:t,editableData:i})=>(0,r.jsxs)("div",{children:[(0,r.jsxs)(D.g,{label:"Identity provider Entity ID",fieldId:"saml-entity-id",labelIcon:(0,r.jsx)(ee.A,{triggerAction:"hover",bodyContent:(0,r.jsx)("div",{children:je.ENTITY_ID}),children:(0,r.jsx)(h.$n,{variant:"plain",type:"button",onClick:e=>e.preventDefault(),className:`customPopover ${ve.A.formGroupLabelHelp}`,children:(0,r.jsx)(xe.Ay,{})})}),children:[(0,r.jsx)($.ks,{isDisabled:e&&e.enabled,onChange:t,type:"text",id:"saml-entity-id",name:"identityProviderEntityId",value:i.identityProviderEntityId}),(0,r.jsx)(ie.e,{children:(0,r.jsx)(G.E,{children:(0,r.jsx)(Y.j,{children:je.ENTITY_ID})})})]}),(0,r.jsxs)(D.g,{label:"Single sign-on authentication request URL",fieldId:"saml-authn-request-url",children:[(0,r.jsx)($.ks,{isDisabled:e&&e.enabled,onChange:t,type:"text",id:"saml-authn-request-url",name:"authenticationRequestsUrl",value:i.authenticationRequestsUrl}),(0,r.jsx)(ie.e,{children:(0,r.jsx)(G.E,{children:(0,r.jsx)(Y.j,{children:je.AUTHENTICATION_REQUEST_URL})})})]}),(0,r.jsxs)(D.g,{label:"Service provider issuer",fieldId:"saml-provider-issuer",children:[(0,r.jsx)($.ks,{isDisabled:e&&e.enabled,onChange:t,type:"text",id:"saml-provider-issuer",name:"serviceProviderEntityId",value:i.serviceProviderEntityId}),(0,r.jsx)(ie.e,{children:(0,r.jsx)(G.E,{children:(0,r.jsx)(Y.j,{children:je.SERVICE_PROVIDER_ISSUER})})})]}),(0,r.jsxs)(D.g,{label:"x509 certificate",fieldId:"saml-x509-certificate",labelIcon:(0,r.jsx)(ee.A,{triggerAction:"hover",bodyContent:(0,r.jsx)("div",{children:"A PEM certificate that is used to check for signatures."}),children:(0,r.jsx)(h.$n,{variant:"plain",type:"button",onClick:e=>e.preventDefault(),className:`customPopover ${ve.A.formGroupLabelHelp}`,children:(0,r.jsx)(xe.Ay,{})})}),children:[(0,r.jsx)(fe.fs,{resizeOrientation:"vertical",isDisabled:e&&e.enabled,type:"text",onChange:t,id:"saml-authn-request-url",name:"x509Certificate",value:i.x509Certificate}),(0,r.jsx)(ie.e,{children:(0,r.jsx)(G.E,{children:je.X509_CERTIFICATE.map(((e,t)=>(0,r.jsx)(Y.j,{children:(0,r.jsx)("p",{dangerouslySetInnerHTML:{__html:e}})},t)))})})]})]}),tt=({baseUrl:e,idpAlias:t})=>(0,r.jsxs)("div",{children:[(0,r.jsx)(D.g,{label:"Service provider metadata URL",fieldId:"service-provider-metadata-url",labelIcon:(0,r.jsx)(ee.A,{triggerAction:"hover",bodyContent:(0,r.jsx)("div",{children:"Service provider metadata used to integrate Red Hat with your identity provider."}),children:(0,r.jsx)(h.$n,{variant:"plain",type:"button",onClick:e=>e.preventDefault(),className:`customPopover ${ve.A.formGroupLabelHelp}`,children:(0,r.jsx)(xe.Ay,{})})}),children:(0,r.jsx)(Ce.Ck,{type:"text",id:"service-provider-metadata-url",name:"service-provider-metadata-url",isReadOnly:!0,children:`${e}broker/${t}/endpoint/descriptor`})}),(0,r.jsx)(D.g,{label:"Redirect URL / Assertion Consumption Service (ACS) URL",fieldId:"redirect-url",labelIcon:(0,r.jsx)(ee.A,{triggerAction:"hover",bodyContent:(0,r.jsx)("div",{children:"The redirect URL to use when configuring your identity provider. This is where your identity provider will redirect users to authenticate to Red Hat."}),children:(0,r.jsx)(h.$n,{variant:"plain",type:"button",onClick:e=>e.preventDefault(),className:`customPopover ${ve.A.formGroupLabelHelp}`,children:(0,r.jsx)(xe.Ay,{})})}),children:(0,r.jsx)(Ce.Ck,{type:"text",id:"redirect-url",name:"redirect-url",isReadOnly:!0,children:`${e}broker/${t}/endpoint`})})]}),it=(0,s.createContext)({messages:[],setMessages:e=>{}});class rt{static variableConversion={identityProviderEntityId:"Identity provider Entity ID",authenticationRequestsUrl:"Single sign-on authentication request URL",serviceProviderEntityId:"Service provider issuer",x509Certificate:"x509 certificate",authorizationUrl:"Authorization URL",clientId:"Client ID",clientSecret:"Client Secret",issuer:"Issuer",tokenUrl:"Token URL",publicKey:"Public Key",publicKeyId:"Public Key Id"};static getPrintableString(e){return this.variableConversion[e]}}const st=()=>{document.getElementById("headerAnchor").scrollIntoView({behavior:"smooth"})},nt=(e,t)=>{if(void 0===e)return;const i=[],s=Object.keys(e);s.forEach((t=>{i.push((0,r.jsxs)("div",{children:[(0,r.jsxs)("span",{className:"bolderKey",children:[rt.getPrintableString(t),":"]})," ",e[t]]},t))})),s.length>0?(t((0,r.jsx)(_e.F,{variant:"danger",title:Je.UPDATE_ERROR_TITLE,children:i})),st()):t([])},at=({samlData:e,recomputeAppState:t})=>{const i=(0,d.A)(),n=(0,o.Gw)(i),[a,l]=(0,s.useState)(!1),[p,I]=(0,s.useState)(!1),[m,v]=(0,s.useState)(!1),[x,j]=(0,s.useState)(!1),[S,g]=(0,s.useState)(e),{setMessages:f}=(0,s.useContext)(it);return(0,r.jsxs)(M.l,{children:[(0,r.jsx)(et,{baseData:e,editableData:S,editFunction:e=>{x||j(!0);const t={...S};t[e.currentTarget.name]=e.currentTarget.value,g(t)}}),(0,r.jsx)(c.h,{headingLevel:"h3",children:"URLs required for identity provider configuration"}),(0,r.jsx)(Ge.n,{children:(0,r.jsx)(u.E,{component:u.Y.p,children:"Use these URLs to assist in completing setup within your identity provider."})}),(0,r.jsx)(tt,{baseUrl:n,idpAlias:e.idpAlias}),(0,r.jsxs)($e.l,{children:[(0,r.jsx)(we.a,{children:e.enabled?(0,r.jsx)(h.$n,{variant:"danger",onClick:()=>I(!0),children:"Disable"}):x?(0,r.jsx)(h.$n,{onClick:()=>(()=>{nt([],f);const{providerId:e,identityProviderEntityId:t,authenticationRequestsUrl:s,serviceProviderEntityId:n,x509Certificate:a}=S;R(i,{providerId:e,identityProviderEntityId:t,authenticationRequestsUrl:s,serviceProviderEntityId:n,x509Certificate:a},(e=>{if(e.error)nt(e.fields,f);else{((e,t)=>{t((0,r.jsx)(_e.F,{variant:"success",title:e,timeout:12e3,onTimeout:()=>{t([])}})),st()})(Je.UPDATE_SUCCESS_MESSAGE,f),j(!1);const t={...S};t.lastUpdatedDate=e.lastUpdatedDate,t.lastUpdatedBy=e.lastUpdatedBy,g(t)}}))})(),children:"Update"}):(0,r.jsx)(h.$n,{onClick:()=>l(!0),children:"Test and enable"})}),(0,r.jsx)(we.a,{children:(0,r.jsx)(h.$n,{variant:"link",onClick:()=>v(!0),isDanger:!0,children:"Delete identity provider"})}),p&&(0,r.jsx)(Be,{idpAlias:e.idpAlias,isOpen:p,onClose:()=>I(!1),recomputeAppState:t}),a&&(0,r.jsx)(Xe,{idpAlias:e.idpAlias,isOpen:a,onClose:()=>l(!1),recomputeAppState:t}),m&&(0,r.jsx)(We,{idpAlias:e.idpAlias,isOpen:m,onClose:()=>v(!1),recomputeAppState:t})]})]})};var ot=i(915),lt=i(983),dt=i(7877),ct=i(932),ut=i(9202),ht=i(8472);class pt{BLANK_VALUE="";format(e){return e.trim().length>0?e:this.BLANK_VALUE}}const It=({preValue:e,value:t,postValue:i,formatter:s=new pt})=>(0,r.jsxs)("div",{className:"audit-info",children:[e," ",s.format(t)," ",i," "]}),mt=({responseData:e,recomputeAppState:t})=>{const i=(0,l.useFlag)("iamconsole.IDPIntegration.m3"),[a,o]=(0,s.useState)((0,r.jsx)(ct.y,{}));return(0,s.useEffect)((()=>{"saml-improved"===e.providerId?o((0,r.jsx)(at,{samlData:e,recomputeAppState:t})):"oidc-improved"===e.providerId&&o((0,r.jsx)(Qe,{oidcData:e,milestoneThreeEnabled:i,recomputeAppState:t}))}),[e]),(0,r.jsx)(n().Fragment,{children:(0,r.jsx)(ot.Z,{isCompact:!1,isLarge:!0,children:(0,r.jsx)(lt.b,{children:(0,r.jsxs)(M.l,{children:[!i&&"oidc-improved"===e.providerId&&(0,r.jsx)(_e.F,{variant:"info",isInline:!0,title:"This page currently shows a read-only version of your configuration.",children:(0,r.jsx)("p",{children:"Forthcoming enhancements will provide the ability to edit."})}),(0,r.jsxs)(c.h,{headingLevel:"h1",className:"pf-v5-u-display-flex",children:[e.displayName,e.enabled?(0,r.jsx)(dt.J,{color:"green",icon:(0,r.jsx)(ut.Ay,{}),className:"pf-v5-u-ml-md",children:"Enabled"}):(0,r.jsx)(dt.J,{color:"grey",icon:(0,r.jsx)(ht.Ay,{}),className:"pf-v5-u-ml-md",children:"Disabled"})]}),(e.createdDate||e.lastUpdatedDate)&&(0,r.jsxs)(D.g,{fieldId:"audit-data",children:[e.createdDate&&(0,r.jsx)(It,{preValue:"Created on",value:new Date(e.createdDate).toLocaleDateString()}),e.lastUpdatedDate&&(0,r.jsx)(It,{preValue:"Last updated on",value:new Date(e.lastUpdatedDate).toLocaleTimeString(),postValue:"by "+e.lastUpdatedBy})]}),e.enabled&&"saml-improved"===e.providerId&&(0,r.jsx)(_e.F,{variant:"info",isInline:!0,title:"Disable your configuration to edit fields."}),a]})})})})},vt=({baseUrl:e,idpAlias:t})=>(0,r.jsxs)("div",{children:[(0,r.jsx)(D.g,{label:"Service provider metadata URL",fieldId:"service-provider-metadata-url",labelIcon:(0,r.jsx)(ee.A,{triggerAction:"hover",bodyContent:(0,r.jsx)("div",{children:"Service provider metadata used to integrate Red Hat with your identity provider."}),children:(0,r.jsx)(h.$n,{variant:"plain",type:"button",onClick:e=>e.preventDefault(),className:`customPopover ${ve.A.formGroupLabelHelp}`,children:(0,r.jsx)(xe.Ay,{})})}),children:(0,r.jsx)(Ce.Ck,{type:"text",id:"service-provider-metadata-url",name:"service-provider-metadata-url",isReadOnly:!0,children:`${e}broker/${t}/endpoint/descriptor`})}),(0,r.jsx)(D.g,{label:"Redirect URL / Assertion Consumption Service (ACS) URL",fieldId:"redirect-url",labelIcon:(0,r.jsx)(ee.A,{triggerAction:"hover",bodyContent:(0,r.jsx)("div",{children:"The redirect URL to use when configuring your identity provider. This is where your identity provider will redirect users to authenticate to Red Hat."}),children:(0,r.jsx)(h.$n,{variant:"plain",type:"button",onClick:e=>e.preventDefault(),className:`customPopover ${ve.A.formGroupLabelHelp}`,children:(0,r.jsx)(xe.Ay,{})})}),children:(0,r.jsx)(Ce.Ck,{type:"text",id:"redirect-url",name:"redirect-url",isReadOnly:!0,children:`${e}broker/${t}/endpoint`})})]}),xt=({chromeRef:e})=>{const[t,i]=(0,s.useState)({providerId:"",clientId:"",clientSecret:"",authorizationUrl:"",tokenUrl:"",issuer:"",publicKey:"",publicKeyId:""}),{setMessages:n}=(0,s.useContext)(it);return(0,r.jsx)(ot.Z,{children:(0,r.jsx)(lt.b,{children:(0,r.jsxs)(M.l,{children:[(0,r.jsx)(c.h,{headingLevel:"h1",children:"OIDC Creation Form"}),(0,r.jsx)(He,{editableData:t,editFunction:e=>{const r={...t};r[e.currentTarget.name]=e.currentTarget.value,i(r)},isCreation:!0}),(0,r.jsx)(c.h,{headingLevel:"h3",children:"URLs required for identity provider configuration"}),(0,r.jsx)(Ge.n,{children:(0,r.jsx)(u.E,{component:u.Y.p,children:"Use these URLs to assist in completing setup within your identity provider."})}),(0,r.jsx)(vt,{baseUrl:"something",idpAlias:"somethingElse"}),(0,r.jsx)($e.l,{children:(0,r.jsx)(we.a,{children:(0,r.jsx)(h.$n,{variant:"primary",onClick:()=>{const i={...t};i.providerId="oidc-improved",T(e,i,(e=>{e.error?nt(e.fields,n):location.reload()}))},children:"Create OIDC IDP"})})})]})})})},jt=({chromeRef:e})=>{const[t,i]=(0,s.useState)({identityProviderEntityId:"",authenticationRequestsUrl:"",serviceProviderEntityId:"",x509Certificate:"",providerId:""}),{setMessages:n}=(0,s.useContext)(it);return(0,r.jsx)(lt.b,{children:(0,r.jsxs)(M.l,{children:[(0,r.jsx)(c.h,{headingLevel:"h1",children:"SAML Creation form"}),(0,r.jsx)(et,{editableData:t,editFunction:e=>{const r={...t};r[e.currentTarget.name]=e.currentTarget.value,i(r)}}),(0,r.jsx)(c.h,{headingLevel:"h3",children:"URLs required for identity provider configuration"}),(0,r.jsx)(Ge.n,{children:(0,r.jsx)(u.E,{component:u.Y.p,children:"Use these URLs to assist in completing setup within your identity provider."})}),(0,r.jsx)(vt,{baseUrl:"Something",idpAlias:"somethingElse"}),(0,r.jsx)($e.l,{children:(0,r.jsx)(we.a,{children:(0,r.jsx)(h.$n,{variant:"primary",onClick:()=>{const i={...t};i.providerId="saml-improved",i.x509Certificate=t.x509Certificate.replace(/[\s\n\r]/gu,""),T(e,i,(e=>{e.error?nt(e.fields,n):location.reload()}))},children:"Create SAML IDP"})})})]})})};var St=i(4209),gt=i(7546),ft=i(167),yt=i(7725),Ct=i(4398),At=i(6229);const Tt=({configTypeChosen:e})=>{const[t,i]=n().useState(""),s="saml-card-input",a="oidc-card-input",o=t=>{t.currentTarget.id===s?e(_.SAML_CONFIG):e(_.OIDC_CONFIG),i(t.currentTarget.id)};return(0,r.jsxs)(lt.b,{children:[(0,r.jsx)(c.h,{headingLevel:"h1",size:"2xl",children:"Set up an identity provider"}),(0,r.jsx)(u.E,{className:"pf-v5-u-mt-lg pf-v5-u-text-color-required",children:"All fields are required."}),(0,r.jsx)(c.h,{headingLevel:"h2",size:"lg",className:"pf-v5-u-mt-lg",children:"Choose an identity provider protocol"}),(0,r.jsx)("br",{}),(0,r.jsxs)(yt.Z,{hasGutter:!0,minWidths:{default:"49%"},children:[(0,r.jsxs)(ot.Z,{id:"saml-card",isSelectable:!0,isClickable:!0,isClicked:t===s,isSelected:t===s,children:[(0,r.jsx)(Ct.a,{className:"pf-v5-u-pt-sm",selectableActions:{selectableActionId:s,selectableActionAriaLabelledby:"saml-card",name:"selected-card",variant:"single",onChange:o,hasNoOffset:!0},children:(0,r.jsxs)(At.Z,{className:"pf-v5-u-mt-sm",children:["SAML 2.0   ",(0,r.jsx)(dt.J,{color:"green",className:"pf-v5-u-ml-md",children:"Suggested"})]})}),(0,r.jsx)(lt.b,{children:(0,r.jsx)("p",{children:"SAML is often used with legacy systems due to its mature specifications and extensive support for complex identity federation scenarios."})})]}),(0,r.jsxs)(ot.Z,{id:"oidc-card",isSelectable:!0,isClickable:!0,isClicked:t===a,isSelected:t===a,children:[(0,r.jsx)(Ct.a,{className:"pf-v5-u-pt-sm",selectableActions:{selectableActionId:a,selectableActionAriaLabelledby:"oidc-card",name:"selected-card",variant:"single",onChange:o,hasNoOffset:!0},children:(0,r.jsx)(At.Z,{className:"pf-v5-u-mt-sm",children:"OpenID Connect"})}),(0,r.jsx)(lt.b,{children:(0,r.jsx)("p",{children:"OIDC is a modern, lightweight and flexible standard that simplifies configuration enabling easier use across diverse platforms."})})]})]})]})};Tt.propTypes={configTypeChosen:Function};const Rt=Tt,Et=({accessToken:e})=>{const t=(0,d.A)(),[i,o]=(0,s.useState)(!1),[c,p]=(0,s.useState)(!1),[I,v]=(0,s.useState)(!0),[x,j]=(0,s.useState)(!0),[S,g]=(0,s.useState)(m),[f,C]=(0,s.useState)(""),[T,R]=(0,s.useState)([]),E=(0,l.useFlag)("iamconsole.IDPIntegration.m3"),L=()=>{A(t).then((e=>204===e.status?{status:""}:e.json())).then((e=>{"oidc-improved"===e.providerId||"saml-improved"===e.providerId?(g(e),v(!1),o(!0)):e.error?(v(!1),o(!1),p(!1)):(v(!1),o(!1),p(!0))})).catch((e=>{console.error("Error: ",e),v(!1)}))};return(0,s.useEffect)((()=>{L()}),[]),(0,r.jsxs)(n().Fragment,{children:[(0,r.jsx)("span",{id:"headerAnchor"}),(0,r.jsxs)(St.A,{className:"wizardHeader",children:[(0,r.jsx)(gt.A,{title:"Identity Provider Integration",className:"pf-v5-u-mb-lg"}),(0,r.jsxs)(Ge.n,{children:["Manage identity provider integration for your organization."," ",(0,r.jsx)(u.E,{component:u.Y.a,className:c||i?"":"hiddenPage",children:(0,r.jsx)(h.$n,{variant:"link",href:"https://docs.redhat.com/en/documentation/red_hat_customer_portal/1/html/configuring_identity_provider_integration/index",target:"_blank",component:"a",isInline:!0,icon:(0,r.jsx)(ft.Ay,{}),iconPosition:"right",className:"pf-v5-u-ml-xs",children:"Learn more about identity provider integration"})})]})]}),(0,r.jsx)(it.Provider,{value:{messages:T,setMessages:R},children:(0,r.jsx)(Le._,{id:"userNotification",isLiveRegion:!0,className:"alertList",children:T})}),(0,r.jsxs)(Ue.d8,{children:[(0,r.jsx)("div",{className:!I&&i?"":"hiddenPage",children:(0,r.jsx)(mt,{responseData:S,recomputeAppState:L})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:!I&&!i&&x&&c?"initPage":"hiddenPage",children:(0,r.jsx)(y,{startIdpSetup:()=>{j(!1)}})}),(0,r.jsx)("div",{className:I||i||x||!c?"hiddenPage":"Page",children:E?(0,r.jsxs)(ot.Z,{children:[(0,r.jsx)(Rt,{configTypeChosen:C}),(0,r.jsx)("br",{}),f===_.SAML_CONFIG?(0,r.jsx)(jt,{chromeRef:t}):f===_.OIDC_CONFIG?(0,r.jsx)(xt,{chromeRef:t}):(0,r.jsx)("div",{className:"hiddenPage"})]}):(0,r.jsx)(ke,{accessToken:e})}),(0,r.jsx)("div",{className:I||i||!x||c?"hiddenPage":"Page",children:(0,r.jsx)(a.A,{})})]})]})]})};Et.propTypes={accessToken:g().string};const _t=Et,Lt=()=>{const e=(0,d.A)();let t=null;const[i,c]=(0,s.useState)({adminUser:!1,selfServiceIDP:(0,r.jsx)(a.A,{})}),u=(0,l.useFlag)("iamconsole.IDPIntegration.enabled");return(0,s.useEffect)((()=>{e?.appAction?.("identity-provider-integration"),e.auth.getToken().then((e=>{t=e,(0,o.X2)(t)?(0,o.X2)(t)&&u&&c({adminUser:!0,selfServiceIDP:(0,r.jsx)(_t,{accessToken:t})}):c({adminUser:!1,selfServiceIDP:(0,r.jsx)(I,{})})}))}),[]),(0,r.jsx)(n().Fragment,{children:i.selfServiceIDP})}},4747:(e,t,i)=>{"use strict";i.d(t,{Gw:()=>u,I:()=>o,J1:()=>h,Qe:()=>c,X2:()=>a,Xr:()=>l});var r=i(9547),s=i.n(r);function n(e){const t=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/");return JSON.parse(decodeURIComponent(window.atob(t).split("").map((e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2))).join("")))}function a(e){return n(e).is_org_admin}function o(e){return n(e).org_id}function l(e,t,i,r){const s={};s[t]=e,r({...i,...s})}const d=e=>{if(!/^[A-Za-z0-9+/]*={0,2}$/u.test(e)||e.length%4!=0)return!1;try{const t=s().util.decode64(e);return s().util.encode64(t)===e}catch{return!1}};function c(e,t,i,r){let n=!1;const a={};return Object.keys(i).forEach((r=>{a[r]={},r===t&&Object.keys(i[t]).forEach((t=>{const o=e&&e.selections[t],l=i[r][t].inputType,c=function(e,t,i){const r="This is invalid, please check for uncommonly used characters. Be sure to exclude the start and end block";if(!e)return{status:"error",message:"RADIO"===t?"A selection must be made":"This field can not be left empty"};let n,a;switch(t){case"GENERAL":a=!/[^A-Za-z0-9]/u.test(e),n={status:a?"default":"error",message:a?"":"This text is invalid please check for uncommonly used characters or spaces"};break;case"ENTITYID":a=/^[a-z0-9._:/?#@!&()*+,;=-]+$/iu.test(e),n={status:a?"default":"error",message:a?"":"This is invalid. This field is intended to consist of only alphanumeric characters and valid URL's"};break;case"DOMAIN":a=/^https:\/\/([a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)+)(:\d{1,5})?(\/\S*)?$|^http:\/\/localhost(:\d{1,5})?(\/\S*)?$/gu.test(e),n={status:a?"default":"error",message:a?"":"This field needs to be a valid URL"};break;case"x509":try{const t=e.replace(/[\s\n\r]/gu,"").split(",");for(const e of t)if(!d(e.trim()))return{status:"error",message:r};const i=new Date,a=t[0].trim(),o=`-----BEGIN CERTIFICATE-----\n${a.match(/.{1,64}/gu)?.join("\n")}\n-----END CERTIFICATE-----`,l=s().pki.certificateFromPem(o);if(i<l.validity.notBefore||i>l.validity.notAfter)return{status:"error",message:"Certificate is expired"};n={status:"default",message:""}}catch(e){return{status:"error",message:r}}break;default:n={status:"default",message:""}}return n}(o,l);"default"!==c.status&&(n=!0),a[r][t]={inputType:l,variant:c.status,message:c.message}}))})),r(a),n}const u=e=>"prod"===e.getEnvironment()?"https://sso.redhat.com/auth/realms/redhat-external/":"https://sso.stage.redhat.com/auth/realms/redhat-external/",h=(e,t)=>u(e)+t},4501:()=>{},6403:()=>{},5067:()=>{},1902:()=>{},1662:()=>{},4895:()=>{},7302:()=>{},3701:()=>{},1036:()=>{},6151:()=>{},1225:()=>{},6078:()=>{},545:()=>{},5937:()=>{},5637:()=>{},1289:()=>{},6752:()=>{},199:()=>{},2363:()=>{},310:()=>{},5340:()=>{},9838:()=>{}}]);
//# sourceMappingURL=../sourcemaps/Identity-Provider-Integration.fea090c002758fc2bdb53a27fb9d5152.js.map