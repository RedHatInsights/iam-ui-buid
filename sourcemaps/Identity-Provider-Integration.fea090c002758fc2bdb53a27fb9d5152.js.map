{"version":3,"file":"js/Identity-Provider-Integration.xxxxxxxxxxxxxxxxxxxx.js","mappings":"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","sources":["webpack:///./src/Components/DisabledPage/disabled-page.js","webpack:///./src/Components/NonAdminUser/non-admin-idp.tsx","webpack:///./src/Apps/IdpSelfService/CommonInterfaces/idp-response-types.ts","webpack:///./src/Apps/IdpSelfService/IdpNotSetup/idp-not-setup.tsx","webpack:///./src/Apps/IdpSelfService/ApiClient/idp-controller.ts","webpack:///./src/Apps/IdpSelfService/Constants/flow-step.ts","webpack:///./src/Apps/IdpSelfService/CommonInterfaces/validation-context.tsx","webpack:///./src/Apps/IdpSelfService/FirstStep/customer-information.tsx","webpack:///./src/Apps/IdpSelfService/SecondStep/oidc-configuration.tsx","webpack:///./src/Apps/IdpSelfService/SecondStep/saml-configuration.tsx","webpack:///./src/Apps/IdpSelfService/ThirdStep/import-from-file.tsx","webpack:///./src/Apps/IdpSelfService/ThirdStep/import-from-url.tsx","webpack:///./src/Utils/message-formatter-utils.ts","webpack:///./src/Apps/IdpSelfService/Constants/saml-metadata-constants.ts","webpack:///./src/Apps/IdpSelfService/CommonInterfaces/idp-request-types.ts","webpack:///./src/Components/FileUpload/SamlMetadataFile/saml-metadata-messages.ts","webpack:///./src/Components/FileUpload/SamlMetadataFile/saml-metadata-file.tsx","webpack:///./src/Utils/xml-utils.ts","webpack:///./src/Apps/IdpSelfService/Constants/saml-helper-text-messages.tsx","webpack:///./src/Apps/IdpSelfService/ThirdStep/import-saml-from-file.tsx","webpack:///./src/Apps/IdpSelfService/ThirdStep/import-saml-manual.tsx","webpack:///./src/Apps/IdpSelfService/FinalStep/urls-for-user.tsx","webpack:///./src/Apps/IdpSelfService/IdpFlowTemplate/generic-footer.tsx","webpack:///./src/Apps/IdpSelfService/IdpFlowTemplate/submit-footer.tsx","webpack:///./src/Apps/IdpSelfService/IdpFlowTemplate/finalize-footer.tsx","webpack:///./src/Apps/IdpSelfService/IdpFlowTemplate/flow-template.tsx","webpack:///./src/Apps/IdpSelfService/Constants/oidc-helper-text-messages.tsx","webpack:///./src/Apps/IdpSelfService/ProviderForms/oidc-form.tsx","webpack:///./src/Apps/IdpSelfService/Configured/disable-idp-modal.tsx","webpack:///./src/Apps/IdpSelfService/IdpTesting/idp-testing-modal.tsx","webpack:///./src/Apps/IdpSelfService/Configured/delete-idp-modal.tsx","webpack:///./src/Apps/IdpSelfService/Constants/idp-display-names.ts","webpack:///./src/Apps/IdpSelfService/Constants/idp-common-messages.tsx","webpack:///./src/Apps/IdpSelfService/Configured/configured-oidc-idp.tsx","webpack:///./src/Apps/IdpSelfService/ProviderForms/saml-form.tsx","webpack:///./src/Apps/IdpSelfService/ProviderForms/saml-static-content.tsx","webpack:///./src/Apps/IdpSelfService/CommonInterfaces/messages-context.ts","webpack:///./src/Apps/IdpSelfService/Constants/idpDisplayNames.ts","webpack:///./src/Apps/IdpSelfService/CommonInterfaces/messaging-functions.tsx","webpack:///./src/Apps/IdpSelfService/Configured/configured-saml-idp.tsx","webpack:///./src/Components/AuditInfo/formatters/simple-text.ts","webpack:///./src/Components/AuditInfo/audit-info.tsx","webpack:///./src/Apps/IdpSelfService/Configured/configured-idp.tsx","webpack:///./src/Apps/IdpSelfService/ProviderForms/oidc-static-content.tsx","webpack:///./src/Apps/IdpSelfService/Creation/create-oidc-idp.tsx","webpack:///./src/Apps/IdpSelfService/Creation/create-saml-idp.tsx","webpack:///./src/Apps/IdpSelfService/IdpNotSetup/choose-idp-type.tsx","webpack:///./src/Apps/IdpSelfService/IDPSelector/Idp-Selector.tsx","webpack:///./src/Routes/AuthenticationPolicy/identity-provider-integration.tsx","webpack:///./src/Utils/general-utils.ts"],"sourcesContent":["import './disabled-page.scss'\nimport React from 'react';\nimport {\n    Title,\n    Text\n} from '@patternfly/react-core';\nimport LockIcon from '@patternfly/react-icons/dist/esm/icons/lock-icon';\n\nconst DisabledPage = () => {\n\n    return <div className=\"disabledDiv\">\n        <LockIcon className=\"lockIcon\"/>\n        <Title headingLevel=\"h2\" size=\"xl\" className=\"pf-u-mt-lg\">This page is temporarily disabled or unavailable at this time</Title>\n        <Text className=\"pf-u-mt-lg\">Please check again at a another time or reach out to Red Hat customer service for additional support</Text>\n    </div>\n}\n\nexport default DisabledPage;\n","import './non-admin-user.scss'\nimport React from 'react';\nimport {\n    Title,\n    Text,\n    Button\n} from '@patternfly/react-core';\nimport LockIcon from '@patternfly/react-icons/dist/esm/icons/lock-icon';\n\nconst NonAdminIDP = () => {\n\n    const triggerRedirect = () => {\n        window.location.href = \"/iam/my-user-access\";\n    }\n    const myUserAccessLink = \"/iam/my-user-access\";\n\n    return <div className=\"nonAdminDiv\">\n                <LockIcon className=\"lockIcon\" />\n                <Title headingLevel=\"h2\" size=\"xl\" className=\"pf-v5-u-mt-lg\">Access permissions needed</Title>\n                <Text className=\"pf-v5-u-mt-lg\">\n                    To access Identity Provider Integration, ask your organization administrator(s) to adjust your permissions,\n                    or visit <Button variant=\"link\" href={myUserAccessLink} target={\"_blank\"} component=\"a\" isInline>My User Access</Button> to learn more about your permissions\n                </Text>\n                <Button onClick={triggerRedirect} className=\"pf-v5-u-mt-lg\">Return to home page</Button>\n            </div>\n}\n\nexport default NonAdminIDP;\n","export interface IdpResponseData {\n    providerId: string;\n    idpAlias: string;\n    displayName: string;\n    enabled: boolean;\n    createdDate: string;\n    lastUpdatedDate: string;\n    lastUpdatedBy: string;\n    error?: string;\n    fields?: string[];\n}\n\nexport const IdpResponseDataInitialState =\n    {idpAlias: '', displayName: '', enabled: false, providerId: '', createdDate: '', lastUpdatedDate: '', lastUpdatedBy: '' }\n\nexport interface SamlResponseData extends IdpResponseData {\n    identityProviderEntityId: string;\n    authenticationRequestsUrl: string;\n    x509Certificate: string;\n    serviceProviderEntityId: string;\n}\n\nexport interface OidcResponseData extends IdpResponseData {\n    issuer: string;\n    clientId: string;\n    clientSecret: string;\n    authorizationUrl: string;\n    tokenUrl: string;\n    publicKey: string;\n    publicKeyId: string;\n}\n\nexport interface errorResponseData {\n    [key: string]: string;\n}\n","import './idp-not-setup.scss'\nimport React from 'react';\nimport {\n    Title,\n    Text,\n    Button, Icon\n} from '@patternfly/react-core';\nimport CubesIcon from '@patternfly/react-icons/dist/esm/icons/cubes-icon';\nimport InfoCircleIcon from '@patternfly/react-icons/dist/esm/icons/info-circle-icon';\nimport PropTypes from \"prop-types\";\n\ninterface Props{\n    startIdpSetup: Function,\n}\n\nconst IdpNotSetup = ({startIdpSetup}: Props) => {\n\n    const handleButtonClick = () => {\n        startIdpSetup();\n    }\n\n    /**\n     * this is just a conditional rendering function that determines if we display the init page or the selection page\n     */\n    const renderStep = () => {\n        return (\n            <div className=\"notSetupDiv\">\n                <CubesIcon className=\"cubesIcon\"/>\n                <Title headingLevel=\"h2\" size=\"xl\" className=\"pf-v5-u-mt-lg\">No Identity Providers are currently\n                    configured</Title>\n                <Text className=\"pf-v5-u-mt-md\">Your organization has not integrated an identity provider. More\n                    information is available <Button variant=\"link\" target=\"_blank\"\n                                                     href=\"https://access.redhat.com/articles/7093475\" component=\"a\"\n                                                     isInline>here</Button>.</Text>\n                <Text><Icon status=\"info\" isInline><InfoCircleIcon/></Icon> Configure your identity provider, test and\n                    enable immediately, or return and enable when you&apos;re ready.</Text>\n                <Button className=\"pf-v5-u-mt-md\" variant=\"primary\" onClick={() => handleButtonClick()}>Integrate an identity provider</Button>\n            </div>\n        )\n    }\n\n    return renderStep();\n}\n\nIdpNotSetup.propTypes = {\n    configChosen: PropTypes.func\n}\n\nexport default IdpNotSetup;\n","import { getSSOApiUrl } from \"../../../Utils/general-utils\";\nimport { SubmittableChoices } from \"../CommonInterfaces/user-choices\";\nimport { ChromeAPI } from \"@redhat-cloud-services/types\";\nimport { getOrgId } from '../../../Utils/general-utils';\n\nfunction getSSOIdpApiUrl(chromeApi: ChromeAPI, specifier?: String) {\n    let target;\n    if (specifier) {\n        target = `apis/organizations/v1/identity-providers/${specifier}`;\n    } else {\n        target = `apis/organizations/v1/identity-providers`;\n    }\n\n    return getSSOApiUrl(chromeApi, target);\n}\n\nexport async function apiGetIdp(chromeApi: ChromeAPI): Promise<Response> {\n    try {\n        const token = await chromeApi.auth.getToken();\n        const response = await fetch(getSSOIdpApiUrl(chromeApi), {\n            method: 'GET',\n            referrerPolicy: 'no-referrer',\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${token}`\n            }\n        });\n\n        if (!response.ok) {\n            throw new Error(`Error: ${response.status} ${response.statusText}`);\n        }\n\n        return response;\n    } catch (error) {\n        console.error(\"Fetch failed:\", error);\n        throw error;\n    }\n}\n\nexport async function apiCreateIdp(chromeApi: ChromeAPI, createIdp: SubmittableChoices, callback: Function) {\n    try {\n        const token = await chromeApi.auth.getToken();\n        fetch(getSSOIdpApiUrl(chromeApi), {\n            method: 'POST',\n            referrerPolicy: 'no-referrer',\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${token}`\n            },\n            body: JSON.stringify(createIdp)\n        }).then((res) => {\n            res.json().then((body) => {\n                // check for error response\n                if (body.error) {\n                    const errorString = `${body.error_description}`;\n                    callback(body);\n                    throw new Error(errorString);\n                }\n                else {\n                    callback(body);\n                }\n            });\n        });\n    } catch (error) {\n        console.error(\"Create failed:\", error);\n        throw error;\n    }\n}\n\nexport async function apiUpdateIdp (chromeApi: ChromeAPI, updateIdp: SubmittableChoices, callback: Function) {\n    try {\n        const token = await chromeApi.auth.getToken();\n        fetch(getSSOIdpApiUrl(chromeApi, getOrgId(<string>token)), {\n            method: 'PATCH',\n            referrerPolicy: 'no-referrer',\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${token}`\n            },\n            body: JSON.stringify(updateIdp)\n        }).then((res) => {\n            res.json().then((body) => {\n                // check for error response\n                if (body.error) {\n                    const errorString = `${body.error_description}`;\n                    callback(body);\n                    throw new Error(errorString);\n                }\n                else {\n                    callback(body);\n                }\n            });\n        });\n    } catch (error) {\n        console.error(\"Update failed:\", error);\n        throw error;\n    }\n}\n\nexport async function apiToggleIdPStatus(chromeApi: ChromeAPI, idpAlias: String) {\n    try {\n        const token = await chromeApi.auth.getToken();\n        const apiStatusUrl = getSSOIdpApiUrl(chromeApi) + `/${idpAlias}/status`;\n        const response = await fetch(apiStatusUrl, {\n            method: 'PATCH',\n            referrerPolicy: 'no-referrer',\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${token}`\n            },\n            body: JSON.stringify({})\n        })\n\n        if (!response.ok) {\n            throw new Error(`Error: ${response.status} ${response.statusText}`);\n        }\n\n        return response;\n    } catch (error) {\n        console.error(\"Status update failed:\", error);\n        throw error;\n    }\n}\n\nexport async function apiDeleteIdp(chromeApi: ChromeAPI, idpAlias: String) {\n    try {\n        const token = await chromeApi.auth.getToken();\n        const deleteIdpUrl = getSSOIdpApiUrl(chromeApi) + `/${idpAlias}`;\n        const response = await fetch(deleteIdpUrl, {\n            method: 'DELETE',\n            referrerPolicy: 'no-referrer',\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${token}`\n            },\n            body: JSON.stringify({})\n        })\n\n        if (!response.ok) {\n            throw new Error(`Error: ${response.status} ${response.statusText}`);\n        }\n\n        return response;\n\n    } catch (error) {\n        console.error(\"IdP deletion failed:\", error);\n        throw error;\n    }\n}\n\n","export class FlowStep {\n\n    public static readonly OIDC_CONFIG = 'OIDC_CONFIG';\n\n    public static readonly SAML_CONFIG = 'SAML_CONFIG';\n\n    public static readonly IMPORT_FROM_FILE = 'IMPORT_FROM_FILE';\n\n    public static readonly IMPORT_FROM_URL = 'IMPORT_FROM_URL';\n\n    public static readonly IMPORT_SAML_FROM_FILE = 'IMPORT_SAML_FROM_FILE';\n\n    public static readonly IMPORT_SAML_FROM_URL = 'IMPORT_SAML_FROM_URL';\n\n    public static readonly IMPORT_SAML_MANUALLY = 'IMPORT_SAML_MANUALLY';\n\n    public static readonly FINAL_STEP = 'FINAL_STEP';\n\n    public static readonly CUSTOMER_INFORMATION = 'CUSTOMER_INFORMATION';\n\n}\n","import React, {createContext, useContext} from 'react';\nimport {InputValidation} from \"../CommonInterfaces/input-validation\";\n\nexport interface ValidationContextType {\n    validations: InputValidation,\n    setValidations: React.Dispatch<React.SetStateAction<any>>\n}\n\nexport const ValidationContext = createContext<ValidationContextType>({\n    validations: {\n        CUSTOMER_INFORMATION: {},\n        OIDC_CONFIG: {},\n        SAML_CONFIG: {},\n        IMPORT_FROM_FILE: {},\n        IMPORT_FROM_URL: {},\n        IMPORT_SAML_FROM_FILE: {},\n        IMPORT_SAML_FROM_URL: {},\n        IMPORT_SAML_MANUALLY: {}\n    },\n    // eslint-disable-next-line no-empty-function\n    setValidations: () => {}\n});\n\nexport const useValidationContext = () => {\n    const context = useContext(ValidationContext);\n    if (!context) {\n        throw new Error('Validation context not found');\n    }\n    return context;\n}\n\nexport default ValidationContext;\n","// step one of the flow https://miro.com/app/board/uXjVO_x__QE=/\n\nimport React, {useEffect} from 'react';\nimport {\n    Text,\n    Radio,\n    Title,\n    Form,\n    FormGroup, Tooltip\n} from '@patternfly/react-core';\nimport PropTypes from 'prop-types';\nimport {useValidationContext} from \"../CommonInterfaces/validation-context\";\nimport {UserChoices} from \"../CommonInterfaces/user-choices\";\n\ninterface Props {\n    rootUserChoices: UserChoices;\n    updateStatus: Function;\n}\n\n/**\n * handle input selection needs to update information being used to govern the application flow as well as the final api update object\n * (if needed this method could be shared between components and moved to general-utils.ts)\n */\n// eslint-disable-next-line max-params\nexport const handleInputSelection = (value: any, rootUserChoices: any, updateStatus: Function) => {\n    if (!rootUserChoices) { rootUserChoices = {}; }\n\n    if (!rootUserChoices.selections) { rootUserChoices.selections = {}; }\n\n    //  update the main data storage object with the new value\n    rootUserChoices.selections[value.target.name] = value.target.value;\n\n    if (rootUserChoices.selections.protocol) { updateStatus(rootUserChoices.selections.protocol); }\n};\n\nconst CustomerInformation = ({rootUserChoices, updateStatus} : Props) => {\n\n    const { validations, setValidations } = useValidationContext();\n\n    useEffect(() => {\n        const updated = {...validations};\n        updated.CUSTOMER_INFORMATION =\n                {\n                    'protocol': {\n                        inputType: 'RADIO',\n                        variant: 'default',\n                        message: ''\n                    }\n                };\n        setValidations(updated);\n    }, []);\n\n    const handleChange = (value: any) => {\n        handleInputSelection(value, rootUserChoices, updateStatus);\n    };\n\n\n    // pull from props.inputTrigger to handle change values\n    return <Form>\n                <Title headingLevel=\"h2\">Customer Information</Title>\n                <Text className=\"pf-v5-u-color-400 pf-v5-u-font-size-sm\">All fields are required</Text>\n\n                {/* TODO had to remove validated prop. PF5 suggests moving that logic to the text input's helperText, FormHelperText, or HelperTextItem */}\n\n                <FormGroup\n                    onChange={(value) => { handleChange(value) } }\n                    role=\"radiogroup\"\n                    fieldId=\"authType\"\n                    label=\"Choose identity provider protocol\"\n                    id=\"protocol\"\n                >\n                    <Tooltip content=\"This feature is not yet available\" position=\"left-start\">\n                        <Radio isDisabled={true} name=\"protocol\" id=\"oidc-protocol\" label=\"OpenID Connect\" value=\"OIDC_CONFIG\"/>\n                    </Tooltip>\n                    <Radio name=\"protocol\" id=\"saml-protocol\" label=\"SAML 2.0\" value=\"SAML_CONFIG\"/>\n                </FormGroup>\n            </Form>\n}\n\nCustomerInformation.propTypes = {\n    resetNextClicked: PropTypes.func,\n    rootUserChoices: PropTypes.object\n}\n\nexport default CustomerInformation;\n","// step two, choice 1 of the flow https://miro.com/app/board/uXjVO_x__QE=/\nimport React, {useEffect, useState} from 'react';\nimport {\n    TextInput,\n    Radio,\n    Form,\n    FormGroup,\n    HelperText,\n    HelperTextItem\n} from '@patternfly/react-core';\nimport {setStateValue} from '../../../Utils/general-utils';\nimport PropTypes from 'prop-types';\nimport {UserChoices} from '../CommonInterfaces/user-choices'\nimport {\n    useValidationContext\n} from \"../../../Apps/IdpSelfService/CommonInterfaces/validation-context\";\n\ninterface Props{\n    rootUserChoices: UserChoices;\n    updateStatus: Function;\n}\n\nconst OidcConfiguration = ({ rootUserChoices, updateStatus}: Props) => {\n    const [selections, setSelections] = useState<Object>();\n\n    /**\n     * handle selection needs to update information being used to govern\n     * the applicaton flow as well as the final api update object\n     */\n    const handleSelection = (value: any) => {\n        //  update the main data storage object with the new value\n        rootUserChoices.selections[value.target.id] = value.target.value;\n\n        if (rootUserChoices.selections.inputMethod) {\n            updateStatus(rootUserChoices.selections.inputMethod);\n        }\n    }\n\n    const parseVariantValue = (value: string | undefined): (\"default\" | \"error\" | undefined) => {\n        if (value === 'default' || value === 'error') {\n            return value;\n        }\n        // eslint-disable-next-line\n        return undefined;\n    }\n\n    const { validations, setValidations } = useValidationContext();\n\n    useEffect(() => {\n        const updated = {...validations};\n        updated.OIDC_CONFIG =\n            {\n                'clientId': {\n                    inputType: 'GENERAL',\n                    variant: 'default',\n                    message: 'The Red Hat client identifier registered within the customer identity provider. Your identity provider generates this client ID when a Red Hat client is added'\n                },\n                'clientSecret': {\n                    inputType: 'GENERAL',\n                    variant: 'default',\n                    message: 'Enter the client secret associated with your client identifier  by your identity provider'\n                },\n                'inputMethod': {\n                    inputType: 'RADIO',\n                    variant: 'default',\n                    message: ''\n                }\n            };\n        setValidations(updated);\n    }, []);\n\n    // @ts-ignore\n    return <Form>\n                <FormGroup\n                    label=\"Client ID/SP Entity ID\"\n                    onChange={(value) => { handleSelection(value) }}>\n                    <TextInput\n                        onChange={(_event, value) => setStateValue(value, \"clientId\", selections, setSelections)}\n                        type=\"text\"\n                        id=\"clientId\"\n                    />\n                    <HelperText>\n                        <HelperTextItem variant={ parseVariantValue(validations.OIDC_CONFIG?.clientId?.variant) }>\n                            { validations.OIDC_CONFIG?.clientId?.message }\n                        </HelperTextItem>\n                    </HelperText>\n                </FormGroup>\n\n                <FormGroup\n                    label=\"Client Secret\"\n                    onChange={(value) => { handleSelection(value) }}>\n                    <TextInput\n                        onChange={(_event, value) => setStateValue(value, \"clientSecret\", selections, setSelections)}\n                        type=\"text\"\n                        id=\"clientSecret\"\n                    />\n                    <HelperText>\n                        <HelperTextItem variant={parseVariantValue(validations.OIDC_CONFIG?.clientSecret?.variant)}>\n                            { validations.OIDC_CONFIG?.clientSecret?.message }\n                        </HelperTextItem>\n                    </HelperText>\n                </FormGroup>\n\n                <FormGroup\n                    onChange={(value) => { handleSelection(value) }}\n                    label=\"Load external IdP metadata from a config file or download it from a url\">\n                    <Radio name=\"inputChoice\" id=\"inputMethod\" label=\"Import from URL\" value=\"IMPORT_FROM_URL\"/>\n                    <Radio name=\"inputChoice\" id=\"inputMethod\" label=\"Import from file\" value=\"IMPORT_FROM_FILE\"/>\n                    <HelperText>\n                        <HelperTextItem variant={parseVariantValue(validations.OIDC_CONFIG?.inputMethod?.variant)}>\n                            { validations.OIDC_CONFIG?.inputMethod?.message }\n                        </HelperTextItem>\n                    </HelperText>\n                </FormGroup>\n            </Form>\n}\n\nOidcConfiguration.propTypes = {\n    resetNextClicked: PropTypes.func,\n    rootUserChoices: PropTypes.object\n}\n\nexport default OidcConfiguration;\n","// step two, choice 2 of the flow https://miro.com/app/board/uXjVO_x__QE=/\n\nimport {\n    Radio,\n    Form,\n    FormGroup, Title\n} from '@patternfly/react-core';\n\nimport React, {useEffect} from 'react';\nimport PropTypes from \"prop-types\";\nimport {UserChoices} from \"../CommonInterfaces/user-choices\";\nimport {useValidationContext} from \"../CommonInterfaces/validation-context\";\n\ninterface Props{\n    rootUserChoices: UserChoices;\n    updateStatus: Function;\n}\n\nconst SamlConfiguration = ({rootUserChoices, updateStatus}: Props) => {\n\n    const handleSelection = (value: any) => {\n\n        //  update the main data storage object with the new value\n        rootUserChoices.selections[value.target.name] = value.target.value;\n\n        if (rootUserChoices.selections.inputMethod) { updateStatus(rootUserChoices.selections.inputMethod); }\n    }\n\n    const { validations, setValidations } = useValidationContext();\n\n    useEffect(() => {\n        const updated = {...validations};\n        updated.SAML_CONFIG =\n            {\n            'inputMethod': {\n                inputType: 'RADIO',\n                variant: 'default',\n                message: ''\n            }\n        };\n        setValidations(updated);\n    }, []);\n\n    return <Form>\n                <Title headingLevel=\"h2\">SAML IdP configuration selection</Title>\n                <FormGroup\n                    onChange={(value) => { handleSelection(value) }}\n                    label=\"Load external identity provider metadata\">\n                    <Radio name=\"inputMethod\" id=\"inportFromFile\" label=\"Import SAML from file\" value=\"IMPORT_SAML_FROM_FILE\"/>\n                    <Radio name=\"inputMethod\" id=\"inportManually\" label=\"Import SAML manually\" value=\"IMPORT_SAML_MANUALLY\"/>\n                </FormGroup>\n            </Form>\n}\n\nSamlConfiguration.propTypes = {\n    resetNextClicked: PropTypes.func,\n    rootUserChoices: PropTypes.object,\n    updateStatus: PropTypes.func\n}\n\nexport default SamlConfiguration;\n","// step three, choice 3 of the flow https://miro.com/app/board/uXjVO_x__QE=/\n\nimport {\n    FileUpload,\n    Form,\n    FormGroup,\n    Title,\n    Text,\n} from '@patternfly/react-core';\nimport React, {useState} from 'react';\nimport xml2js from 'xml2js';\nimport PropTypes from \"prop-types\";\nimport {UserChoices} from \"../CommonInterfaces/user-choices\";\nimport {useValidationContext} from \"../CommonInterfaces/validation-context\";\n\ninterface Props {\n    updateStatus: Function;\n    rootUserChoices: UserChoices;\n}\n\nconst ImportFromFile = ({updateStatus, rootUserChoices}: Props) => {\n    const [fileData, setFileData] = useState(\"\");\n\n    const { validations, setValidations } = useValidationContext();\n\n\n    const handleFileData = (_event: any, data:string) => {\n        setFileData(data);\n        xml2js.parseString(data, (err, result) => {\n            if (err) {\n                console.error(err);\n            }\n            else if (result) {\n                updateStatus(\"FINAL_STEP\");\n                rootUserChoices.selections.configFileData = result;\n\n                /*\n                 * may need to submit a query at this point to the api to validate that the file chosen is good to go\n                 * alternatively a validation step could be added locally to check for the existence of required fields\n                 */\n                const update = {...validations};\n                update.IMPORT_FROM_URL = { };\n                setValidations(update);\n            }\n        })\n    }\n\n    return (\n        <Form>\n            <Title headingLevel=\"h2\">Import from file</Title>\n            <FormGroup label=\"File upload\" isRequired >\n                <FileUpload\n                    value={fileData.toString()}\n                    id=\"text-file-with-edits-allowed\"\n                    type=\"text\"\n                    onDataChange={handleFileData}\n                    browseButtonText=\"Upload\"\n                />\n            </FormGroup>\n            <Text className=\"pf-v5-u-color-400 pf-v5-u-font-size-sm\">An XML formatted file detailing the configuration of your IdP, minimally including the OpenID Connect Identity provider discovery URL</Text>\n        </Form>\n    )\n}\n\nImportFromFile.propTypes = {\n    rootUserChoices: PropTypes.object,\n    rootValidation: PropTypes.object,\n    updateStatus: PropTypes.func\n}\n\nexport default ImportFromFile;\n","// step three, choice 4 of the flow https://miro.com/app/board/uXjVO_x__QE=/\n\nimport {\n    TextInput,\n    Form,\n    FormGroup,\n    Title,\n    HelperText,\n    HelperTextItem\n} from '@patternfly/react-core';\nimport React, {useState} from 'react';\nimport PropTypes from \"prop-types\";\nimport {UserChoices} from \"../CommonInterfaces/user-choices\";\n\ninterface Props{\n    rootUserChoices: React.MutableRefObject<UserChoices>;\n}\n\nconst ImportFromUrl = ({rootUserChoices}: Props) => {\n\n    const [validations, setValidations] = useState({\n        'importURL': {\n            inputType: 'DOMAIN',\n            status: 'default',\n            message: ''\n        },\n    });\n\n    /**\n     * handle selection needs to update information being used to govern\n     * the application flow as well as the final api update object\n     */\n    const handleSelection = (value: React.FormEvent<HTMLInputElement>) => {\n\n        //  update the main data storage object with the new value\n        rootUserChoices.current.selections[value.currentTarget.id] = value.currentTarget.value;\n    }\n\n    return <Form>\n                <Title headingLevel=\"h2\">Import from URL</Title>\n                <FormGroup\n                    label=\"URL\">\n                    < TextInput\n                        type=\"text\"\n                        id=\"importURL\"\n                        onChange={(value) => { handleSelection(value) }}\n                    />\n                    <HelperText>\n                        <HelperTextItem>\n                            import metadata from a remote identity provider discovery descriptor\n                        </HelperTextItem>\n                    </HelperText>\n                </FormGroup>\n            </Form>\n\n}\n\nImportFromUrl.propTypes = {\n    rootUserChoices: PropTypes.object,\n}\n\nexport default ImportFromUrl;\n","/**\n * Formats a string message by replacing placeholders with provided arguments.\n * Currently, it supports both {n} style placeholders and %s for strings and %d for numbers.\n *\n * @param message - string message template containing placeholders.\n * @param args - any umber of string or number arguments to replace placeholders.\n * @returns formatted message.\n */\nexport function formatMessage(message: string, ...args: (string | number)[]): string {\n    if (!message) {\n        return '';\n    }\n\n    // eslint-disable-next-line no-unused-vars\n    let formattedMessage = message.replace(/%s|%d/g, (match) => {\n        const arg = args.shift();\n        return String(arg);\n    });\n\n    // eslint-disable-next-line require-unicode-regexp\n    formattedMessage = formattedMessage.replace(/{(?:\\d+)}/g, (match, index) => {\n        const arg = args[parseInt(index, 10)];\n        // eslint-disable-next-line no-undefined\n        return arg !== undefined ? String(arg) : match;\n    });\n\n    return formattedMessage;\n}\n","/*\n * SAML 2.0 specs\n * https://docs.oasis-open.org/security/saml/v2.0/saml-schema-metadata-2.0.xsd\n * https://docs.oasis-open.org/security/saml/v2.0/saml-metadata-2.0-os.pdf\n */\n\nexport class SamlMetadataConstants {\n\n    /*\n     * @_ is a fast-xml-parser prefix convention to differentiate between XML attributes and element content.\n     * The @ symbol signifies that it's an attribute, and the _ is added to the prefix to ensure clarity.\n     */\n\n    public static readonly IDENTITY_PROVIDER_ENTITY_ID = '@_entityID';\n\n    public static readonly BINDING = '@_Binding';\n\n    public static readonly LOCATION = '@_Location';\n\n    public static readonly KEY_INFO = 'KeyInfo';\n\n    public static readonly X509_DATA = 'X509Data';\n\n    public static readonly X509_CERTIFICATE = 'X509Certificate';\n\n    public static readonly DS_KEY_INFO = 'ds:KeyInfo';\n\n    public static readonly DS_X509_DATA = 'ds:X509Data';\n\n    public static readonly DS_X509_CERTIFICATE = 'ds:X509Certificate';\n\n    public static readonly HTTP_POST_BINDING = 'urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST';\n\n    public static readonly HTTP_REDIRECT_BINDING = 'urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Redirect';\n}\n","export interface IdpRequestData {\n    providerId: string;\n}\n\nexport const IDENTITY_PROVIDER_ENTITY_ID = \"identityProviderEntityId\";\nexport const AUTH_REQUEST_URL = \"authenticationRequestsUrl\";\nexport const X509_CERTIFICATE = \"x509Certificate\";\nexport const SERVICE_PROVIDER_ISSUER = \"serviceProviderIssuer\";\n\nexport interface SamlRequestData extends IdpRequestData {\n    identityProviderEntityId: string;\n    authenticationRequestsUrl: string;\n    x509Certificate: string;\n    serviceProviderEntityId: string;\n}\n\nexport interface OidcRequestData extends IdpRequestData {\n    clientId: string;\n    clientSecret: string;\n    authorizationUrl: string;\n    tokenUrl: string;\n    issuer: string;\n    publicKey: string;\n    publicKeyId: string;\n}\n","export class SamlMetadataMessages {\n\n    public static readonly INVALID_OR_MISSING_DATA = 'Invalid or missing data';\n\n    public static readonly INVALID_OR_MISSING_IDPENTITYID = \"Invalid or missing IdP Entity ID\"\n\n    public static readonly INVALID_OR_MISSING_AUTH_REQUEST_URL = \"Invalid or missing Authentication Request URL\"\n\n    public static readonly INVALID_OR_MISSING_CERTIFICATE = \"Invalid or missing X509 Certificate\"\n\n    public static readonly CERTIFICATE_EXPIRED = \"Certificate is expired\"\n\n    public static readonly SUCCESS_MSG = 'loaded successfully';\n\n    public static readonly FILE_SUCCESSFULLY_LOADED = '%s ' + SamlMetadataMessages.SUCCESS_MSG + ' (size: %dK)';\n\n    public static readonly FILE_PARSING_ERROR = 'Error parsing XML: %s';\n\n    public static readonly INVALID_FILE_TYPE = 'Invalid file type. Only XML files are allowed.';\n\n    public static readonly MALICIOUS_FILE_DETECTED = 'Error: Invalid XML document.';\n\n    public static readonly FILE_READ_ERROR = 'Error reading file';\n\n    public static readonly SAML_XML_REQUIREMENTS = 'Upload an XML file with your IdP configuration. Max file size allowed is %d K';\n\n    public static readonly FILE_TOO_LARGE = \"Must be an XML file no larger than %d KB\";\n\n}\n","import React, {forwardRef, useImperativeHandle, useState} from 'react';\nimport {\n    DropEvent,\n    ExpandableSection,\n    FileUpload,\n    FormGroup,\n    FormHelperText,\n    HelperText,\n    HelperTextItem\n} from '@patternfly/react-core';\n\nimport _ from 'lodash';\nimport './saml-metadata-file.scss'\nimport PropTypes from \"prop-types\";\nimport {XMLParser} from 'fast-xml-parser';\nimport forge from 'node-forge';\n\nimport {formatMessage} from \"../../../Utils/message-formatter-utils\";\nimport {FlowStep} from \"../../../Apps/IdpSelfService/Constants/flow-step\";\nimport {SamlMetadataConstants} from \"../../../Apps/IdpSelfService/Constants/saml-metadata-constants\";\nimport {SamlMetadataSchemaAttributes} from \"../../../Apps/IdpSelfService/CommonInterfaces/saml-metadata-file\";\nimport {UserChoices} from \"../../../Apps/IdpSelfService/CommonInterfaces/user-choices\";\nimport {\n    AUTH_REQUEST_URL,\n    IDENTITY_PROVIDER_ENTITY_ID,\n    X509_CERTIFICATE\n} from \"../../../Apps/IdpSelfService/CommonInterfaces/idp-request-types\";\nimport {containsPotentialThreats} from \"../../../Utils/xml-utils\";\nimport {SamlMetadataMessages} from \"../../../Components/FileUpload/SamlMetadataFile/saml-metadata-messages\";\n\ninterface Props {\n    rootUserChoices: UserChoices;\n    maxKBSize: number;\n    updateStatus: Function;\n}\n\nexport const SamlMetadataFile: React.FunctionComponent<Props> = forwardRef(({ rootUserChoices, maxKBSize, updateStatus}: Props, ref) => {\n    const allowedFileTypes = ['text/xml'];\n\n    const [file, setFile] = useState<File | null>(null);\n    const [value, setValue] = useState('');\n    const [filename, setFilename] = useState('');\n\n    const [errorMessage, setErrorMessage] = useState<string | null>(null);\n    const [successMessage, setSuccessMessage] = useState<string | null>(null);\n\n    const [isFileSizeRejected, setIsFileSizeRejected] = useState(false);\n    const [isExpanded, setIsExpanded] = useState(false);\n    const [isSafe, setIsSafe] = useState(false);\n\n    /*\n     * Add the following code to the import-saml-from-file.tsx (or the parent component)\n     * if you need to do extra handling of the file object or any attribute used in this component:\n     *const samlMetadataFileRef = useRef<any>(null);\n     *if (samlMetadataFileRef.current) {\n     *  const file = samlMetadataFileRef.current.getFile();\n     *}\n     */\n    useImperativeHandle(ref, () => ({\n        getFile: () => file\n    }));\n\n    function clear() {\n        setFile(null);\n        setValue('');\n        setFilename('');\n        setSuccessMessage('');\n        setErrorMessage('');\n        setIsFileSizeRejected(false);\n    }\n\n    // eslint-disable-next-line no-shadow\n    const onToggle = (_event: React.MouseEvent, isExpanded: boolean) => {\n        setIsExpanded(isExpanded);\n    };\n\n    function isValid(idpEntityID: string | null, location: string | null, certificates: Set<string>) {\n\n        if (!_.isString(idpEntityID) || idpEntityID.length === 0) {\n            return SamlMetadataMessages.INVALID_OR_MISSING_IDPENTITYID;\n        }\n        else if (!_.isString(location) || location.length === 0) {\n            return SamlMetadataMessages.INVALID_OR_MISSING_AUTH_REQUEST_URL;\n        }\n        else if (certificates.size === 0) {\n            return SamlMetadataMessages.INVALID_OR_MISSING_CERTIFICATE;\n        }\n\n        // check cert expiration\n        try {\n            const now = new Date();\n            // check only the first cert in the chain\n            const certWithHeaders = `-----BEGIN CERTIFICATE-----\\n${certificates.values().next().value.match(/.{1,64}/gu)?.join('\\n')}\\n-----END CERTIFICATE-----`\n            const cert = forge.pki.certificateFromPem(certWithHeaders);\n\n            if (now < cert.validity.notBefore || now > cert.validity.notAfter) {\n                return SamlMetadataMessages.CERTIFICATE_EXPIRED;\n            }\n        } catch (e) {\n            return SamlMetadataMessages.INVALID_OR_MISSING_CERTIFICATE;\n        }\n\n        return SamlMetadataMessages.SUCCESS_MSG;\n    }\n\n    /**\n     * XMLParser docs:\n     * https://github.com/NaturalIntelligence/fast-xml-parser/tree/master/docs/v5\n     * Config options:\n     * https://github.com/NaturalIntelligence/fast-xml-parser/blob/master/docs/v4/2.XMLparseOptions.md\n     * https://github.com/NaturalIntelligence/fast-xml-parser/blob/master/docs/v5/3.Options.md\n     */\n    // eslint-disable-next-line no-shadow\n    function parse(xml: string, file: File) {\n\n        function extractIdpEntityID(parsedXml: SamlMetadataSchemaAttributes) {\n            const entityDescriptor = parsedXml.EntityDescriptor || parsedXml['md:EntityDescriptor'];\n\n            if (entityDescriptor?.[SamlMetadataConstants.IDENTITY_PROVIDER_ENTITY_ID]) {\n                return entityDescriptor[SamlMetadataConstants.IDENTITY_PROVIDER_ENTITY_ID];\n            }\n            return null;\n        }\n\n        function extractLocation(services: any) {\n            if (services || Array.isArray(services)) {\n                const httpPostService = services.find((service: any) => service[SamlMetadataConstants.BINDING] === SamlMetadataConstants.HTTP_POST_BINDING);\n                const httpRedirectService = services.find((service: any) => service[SamlMetadataConstants.BINDING] === SamlMetadataConstants.HTTP_REDIRECT_BINDING);\n\n                // see: org.keycloak.broker.saml.SAMLIdentityProviderFactory#parseConfig\n                if (httpPostService?.[SamlMetadataConstants.LOCATION]) {\n                    return httpPostService[SamlMetadataConstants.LOCATION];\n                } else if (httpRedirectService?.[SamlMetadataConstants.LOCATION]) {\n                    return httpRedirectService[SamlMetadataConstants.LOCATION];\n                }\n            }\n            return null;\n        }\n\n        function extractX509Certificate(keyDescriptors: any) {\n            const certificates: Set<string> = new Set<string>();\n            if (keyDescriptors) {\n                // ensure we handle both single and multiple KeyDescriptor entries\n                for (const keyDescriptor of Array.isArray(keyDescriptors) ? keyDescriptors : [keyDescriptors]) {\n                    const x509Data = keyDescriptor?.[SamlMetadataConstants.KEY_INFO]?.[SamlMetadataConstants.X509_DATA];\n                    const dsX509Data = keyDescriptor?.[SamlMetadataConstants.DS_KEY_INFO]?.[SamlMetadataConstants.DS_X509_DATA];\n\n                    let certificatesArray = []\n\n                    // we need to handle both single and multiple <X509Certificate> entries\n                    if (x509Data) {\n                        certificatesArray = Array.isArray(x509Data?.[SamlMetadataConstants.X509_CERTIFICATE])\n                            ? x509Data[SamlMetadataConstants.X509_CERTIFICATE]\n                            : [x509Data?.[SamlMetadataConstants.X509_CERTIFICATE]];\n                    } else if (dsX509Data) {\n                        // maybe the metadata file uses <ds:XXX> as a prefix, so let's try handling w/ DS entries instead\n                        certificatesArray = Array.isArray(dsX509Data?.[SamlMetadataConstants.DS_X509_CERTIFICATE])\n                            ? dsX509Data[SamlMetadataConstants.DS_X509_CERTIFICATE]\n                            : [dsX509Data?.[SamlMetadataConstants.DS_X509_CERTIFICATE]];\n                    }\n\n                    // add the certificates found (ignores null/undefined entries)\n                    for (const certificate of certificatesArray) {\n                        if (certificate) {\n                            certificates.add(certificate);\n                        }\n                    }\n                }\n            }\n            return certificates;\n        }\n\n        try {\n            const parser = new XMLParser({\n                // ensure that attributes like SamlMetadataConstants.IDENTITY_PROVIDER_ENTITY_ID are captured and not ignored\n                ignoreAttributes: false,\n                // allows the parser to handle boolean attributes in the XML\n                allowBooleanAttributes: true,\n                attributeNamePrefix: '@_',\n                parseAttributeValue: true,\n                // ignores processing instructions <? .. ?> in the XML file as they are irrelevant.\n                ignorePiTags: true\n            });\n\n            const parsedXml: SamlMetadataSchemaAttributes = parser.parse(xml);\n            const keyDescriptors =\n                parsedXml?.EntityDescriptor?.IDPSSODescriptor?.KeyDescriptor ||\n                parsedXml['md:EntityDescriptor']?.['md:IDPSSODescriptor']?.['md:KeyDescriptor'] ||\n                [];\n            const services =\n                parsedXml.EntityDescriptor?.IDPSSODescriptor?.SingleSignOnService ||\n                parsedXml['md:EntityDescriptor']?.['md:IDPSSODescriptor']?.['md:SingleSignOnService'] ||\n                null;\n\n            const idpEntityID = extractIdpEntityID(parsedXml);\n            const location = extractLocation(services);\n            const certificates: Set<string> = extractX509Certificate(keyDescriptors);\n\n            const validationMessaging = isValid(idpEntityID, location, certificates);\n            if (!(validationMessaging === SamlMetadataMessages.SUCCESS_MSG)) {\n                throw new Error(validationMessaging);\n            }\n\n            //  update the main data storage object with the parsed values\n            rootUserChoices.selections[IDENTITY_PROVIDER_ENTITY_ID] = idpEntityID as string;\n            rootUserChoices.selections[AUTH_REQUEST_URL] = location as string;\n\n            const cert = Array.from(certificates).join(',');\n            rootUserChoices.selections[X509_CERTIFICATE] = cert;\n\n            /*\n             * TODO this is bad. Make better. Esseintially we are forcing the root user choices to have something present.\n             * this prevents the validator from failing and allows the interface to move forward when a file is uploaded\n             */\n            rootUserChoices.selections.xmlFileWithRestrictions = \"selected\";\n\n            updateStatus(FlowStep.FINAL_STEP);\n\n            setIsFileSizeRejected(false);\n            setFile(file);\n            setErrorMessage(null);\n            setSuccessMessage(formatMessage(SamlMetadataMessages.FILE_SUCCESSFULLY_LOADED, file.name, (file.size / 1024).toFixed(2)));\n            setIsSafe(true);\n        } catch (parseError) {\n            setIsSafe(false);\n            setErrorMessage(formatMessage(SamlMetadataMessages.FILE_PARSING_ERROR, (parseError as Error).message));\n        }\n    }\n\n    // eslint-disable-next-line no-shadow\n    function isFileSizeInvalid(file: File) {\n        if (!allowedFileTypes.includes(file.type)) {\n            setErrorMessage(SamlMetadataMessages.INVALID_FILE_TYPE);\n            setSuccessMessage(null);\n            return true;\n        }\n        if (file.size > (maxKBSize * 1024)) {\n            setIsFileSizeRejected(true);\n            return true;\n        }\n        return false;\n    }\n\n    // eslint-disable-next-line no-shadow\n    const handleFileInputChange = (_: any, file: File) => {\n        clear();\n        setFilename(file.name);\n\n        if (file) {\n            const reader = new FileReader();\n\n            reader.onerror = () => {\n                setIsSafe(false);\n                setErrorMessage(SamlMetadataMessages.FILE_READ_ERROR);\n            }\n\n            reader.onload = (event: ProgressEvent<FileReader>) => {\n                const xmlString = event.target?.result as string;\n                if (containsPotentialThreats(xmlString)) {\n                    setIsSafe(false);\n                    setErrorMessage(SamlMetadataMessages.MALICIOUS_FILE_DETECTED);\n                } else if (!isFileSizeInvalid(file)) {\n                    parse(xmlString, file);\n                }\n            };\n\n            reader.readAsText(file);\n        }\n    };\n\n    // eslint-disable-next-line no-shadow\n    const handleDataChange = (_event: DropEvent, value: string) => {\n        setValue(value);\n    };\n\n    // eslint-disable-next-line no-unused-vars\n    const handleClear = (_event: React.MouseEvent<HTMLButtonElement, MouseEvent>) => {\n        clear();\n        setIsExpanded(false);\n    };\n\n    const handleFileRejected = () => {\n        setIsFileSizeRejected(true);\n    };\n\n    // eslint-disable-next-line no-unused-vars\n    const handleFileReadStarted = (_event: DropEvent, _fileHandle: File) => {\n        setErrorMessage('');\n        setSuccessMessage('');\n    };\n\n    // eslint-disable-next-line no-unused-vars\n    const handleFileReadFinished = (_event: DropEvent, _fileHandle: File) => {\n        setIsExpanded(true);\n    };\n\n    return (\n        <FormGroup fieldId=\"xml-file-with-restrictions\">\n            <FileUpload\n                id=\"xml-file-with-restrictions\"\n                type=\"text\"\n                value={value}\n                filename={filename}\n                filenamePlaceholder=\"Drag and drop the SAML metadata file or upload one\"\n                onFileInputChange={handleFileInputChange}\n                onDataChange={handleDataChange}\n                onReadStarted={handleFileReadStarted}\n                onReadFinished={handleFileReadFinished}\n                onClearClick={handleClear}\n                dropzoneProps={{\n                    accept: {'text/xml': ['.xml']},\n                    maxSize: (maxKBSize * 1024),\n                    onDropRejected: handleFileRejected\n                }}\n                validated={isFileSizeRejected ? 'error' : 'default'}\n                browseButtonText=\"Upload\"\n                // this will hide the core component code preview block (which doesn't support syntax highlighting)\n                hideDefaultPreview/>\n            <FormHelperText>\n                <HelperText>\n                    <HelperTextItem variant={isFileSizeRejected ? 'error' : 'default'}>\n                        {isFileSizeRejected ? formatMessage(SamlMetadataMessages.FILE_TOO_LARGE, maxKBSize) : formatMessage(SamlMetadataMessages.SAML_XML_REQUIREMENTS, maxKBSize)}\n                    </HelperTextItem>\n                    {(successMessage || errorMessage) && (\n                        <HelperTextItem variant={errorMessage ? 'error' : 'success'}>\n                            {errorMessage ?? successMessage}\n                        </HelperTextItem>\n                    )}\n                </HelperText>\n            </FormHelperText>\n            <div className=\"xml-highlighter\">\n                {isSafe && value && (\n                    <ExpandableSection toggleText={isExpanded ? 'Show less' : 'Show more'} onToggle={onToggle} isExpanded={isExpanded}>\n                        <div className=\"highlighter-panel\">\n                            {value}\n                        </div>\n                    </ExpandableSection>\n                )}\n            </div>\n        </FormGroup>\n    );\n});\n\nSamlMetadataFile.displayName = \"SamlMetadataFile\";\n\nSamlMetadataFile.propTypes = {\n    maxKBSize: PropTypes.number.isRequired\n}\n\nexport default SamlMetadataFile;\n","/**\n * check for potentially dangerous XML elements:\n * - XXE (XML External Entity)\n * - XML Bomb (Billion Laughs Attack)\n * - Recursive Entity defs\n */\nexport function containsPotentialThreats(xmlString: string) {\n    return xmlString.includes('<!DOCTYPE') ||\n        xmlString.includes('<!ENTITY') ||\n        xmlString.includes('SYSTEM') ||\n        ((xmlString.match(/<!ENTITY/gu) || []).length > 5) ||\n        (xmlString.includes('&') && !(/&[a-zA-Z0-9]+;/u).test(xmlString));\n}\n","export class SamlHelperTextMessages {\n\n    public static readonly NO_SPECIAL_CHARS = 'This field is expected to consist only of alphanumeric characters. Spaces, dashes, and special characters will not be accepted.';\n\n    public static readonly ENTITY_ID = 'The Entity ID attribute is in your SAML metadata configuration.';\n\n    public static readonly IDENTITY_PROVIDER_ENTITY_ID = 'The Entity ID used to validate the issuer for received SAML assertions.';\n\n    public static readonly SERVICE_PROVIDER_ISSUER = 'The issuer that will be used to uniquely identify the SAML Service Provider. This might also be referred to as a \"client\" or a \"Service Provider Entity ID\".';\n\n    public static readonly AUTHENTICATION_REQUEST_URL = 'The URL that receives SAML authentication requests; i.e. the URL of your internal log in page.';\n\n    public static readonly X509_CERTIFICATE = [\n        'A Base64 encoded certificate. This must not include the certificate preamble/ending: <code>(-----BEGIN/END CERTIFICATE-----).</code>',\n        'Multiple certificates may be included. Separate multiple certificates with a comma if you need to attach more than one.',\n        'An x509 certificate must be provided, as it is essential for signing assertions from the Service Provider to secure SAML communication.'\n    ];\n\n}\n","// step three, choice 5 of the flow https://miro.com/app/board/uXjVO_x__QE=/\n\nimport {\n    Button,\n    Form,\n    FormGroup, HelperText, HelperTextItem, Popover, TextInput, Title\n} from '@patternfly/react-core';\nimport React, {ReactElement, useEffect, useState} from 'react';\nimport PropTypes from 'prop-types';\nimport {UserChoices} from \"../CommonInterfaces/user-choices\";\nimport {SamlMetadataFile} from \"../../../Components/FileUpload/SamlMetadataFile/saml-metadata-file\";\nimport {SERVICE_PROVIDER_ISSUER} from \"../CommonInterfaces/idp-request-types\";\nimport {FlowStep} from \"../Constants/flow-step\";\nimport {useValidationContext} from \"../CommonInterfaces/validation-context\";\nimport styles from \"@patternfly/react-styles/css/components/Form/form\";\nimport HelpIcon from \"@patternfly/react-icons/dist/dynamic/icons/help-icon\";\nimport {SamlHelperTextMessages} from \"../../../Apps/IdpSelfService/Constants/saml-helper-text-messages\";\n\ninterface Props {\n    rootUserChoices: UserChoices;\n    updateStatus: Function;\n}\n\nconst ImportSamlFromFile = ({ rootUserChoices, updateStatus}: Props) => {\n    const [samlMetadataFile, setSamlMetadataFile] = useState<ReactElement>()\n    const { validations, setValidations } = useValidationContext();\n    useEffect(() => {\n        setSamlMetadataFile(<SamlMetadataFile rootUserChoices={rootUserChoices}\n                                              updateStatus={updateStatus}\n                                              maxKBSize={ 100 }></SamlMetadataFile>);\n\n        const updateValidations = {...validations}\n\n        updateValidations.IMPORT_SAML_FROM_FILE = {\n            \"serviceProviderIssuer\": {\n                inputType: 'ENTITYID',\n                variant: 'default',\n                message: SamlHelperTextMessages.SERVICE_PROVIDER_ISSUER\n            },\n            'xmlFileWithRestrictions': {\n                inputType: 'GLOBAL',\n                variant: 'default',\n                message: ''\n            }\n        }\n\n        setValidations(updateValidations);\n    }, []);\n\n    const parseVariantValue = (value: string | undefined): (\"default\" | \"error\" | undefined) => {\n        if (value === 'default' || value === 'error') { return value; }\n        // eslint-disable-next-line\n        return undefined;\n    }\n\n    const handleSelection = (value: any) => {\n        rootUserChoices.selections[value.target.id] = value.target.value;\n        if (rootUserChoices.selections) { updateStatus(FlowStep.FINAL_STEP); }\n    }\n\n    return <Form>\n        <Title headingLevel=\"h2\">Import SAML from file</Title>\n        <FormGroup\n            label=\"Service provider issuer\"\n            isRequired\n            onChange={(value) => { handleSelection(value) }}\n            labelIcon={\n                <Popover\n                    triggerAction=\"hover\"\n                    bodyContent={\n                        <div>\n                            This field is expected to consist only of alphanumeric characters. Spaces, dashes, and special characters will not be accepted.\n                        </div>\n                    }>\n                    <Button\n                        variant=\"plain\"\n                        type=\"button\"\n                        onClick={(e) => e.preventDefault()}\n                        className={`customPopover ${styles.formGroupLabelHelp}`}>\n                        <HelpIcon />\n                    </Button>\n                </Popover>\n            }>\n            <TextInput\n                type=\"text\"\n                id={SERVICE_PROVIDER_ISSUER} />\n            <HelperText>\n                <HelperTextItem variant={ parseVariantValue(validations.IMPORT_SAML_FROM_FILE?.serviceProviderIssuer?.variant) }>\n                    { validations.IMPORT_SAML_FROM_FILE?.serviceProviderIssuer?.message || SamlHelperTextMessages.SERVICE_PROVIDER_ISSUER }\n                </HelperTextItem>\n            </HelperText>\n        </FormGroup>\n        <FormGroup label=\"File upload\" isRequired>\n            {samlMetadataFile}\n            <HelperText>\n                <HelperTextItem variant={ parseVariantValue(validations.IMPORT_SAML_FROM_FILE?.xmlFileWithRestrictions?.variant) }>\n                    { validations.IMPORT_SAML_FROM_FILE?.xmlFileWithRestrictions?.message }\n                </HelperTextItem>\n            </HelperText>\n        </FormGroup>\n    </Form>\n}\n\nImportSamlFromFile.propTypes = {\n    rootUserChoices: PropTypes.object,\n    updateStatus: PropTypes.func\n}\n\nexport default ImportSamlFromFile;\n","import React, {useEffect} from 'react';\nimport {\n    TextInput,\n    Form,\n    FormGroup,\n    HelperText,\n    HelperTextItem, TextArea, Title, Popover, Button\n} from '@patternfly/react-core';\nimport {UserChoices} from \"../../IdpSelfService/CommonInterfaces/user-choices\";\nimport {AUTH_REQUEST_URL, IDENTITY_PROVIDER_ENTITY_ID, X509_CERTIFICATE, SERVICE_PROVIDER_ISSUER} from \"../../../Apps/IdpSelfService/CommonInterfaces/idp-request-types\";\nimport {useValidationContext} from \"../../../Apps/IdpSelfService/CommonInterfaces/validation-context\";\nimport {FlowStep} from \"../../../Apps/IdpSelfService/Constants/flow-step\";\nimport styles from \"@patternfly/react-styles/css/components/Form/form\";\nimport HelpIcon from \"@patternfly/react-icons/dist/dynamic/icons/help-icon\";\nimport {SamlHelperTextMessages} from \"../../../Apps/IdpSelfService/Constants/saml-helper-text-messages\";\n\ninterface Props {\n    primeNextStep: Function;\n    rootUserChoices: UserChoices;\n}\nconst ImportSamlManual = ({primeNextStep, rootUserChoices}: Props) => {\n\n    /**\n     * updates the information being used to govern the application flow as well as the final api update object.\n     * @param value\n     */\n    const handleSelection = (value: any) => {\n        //  update the main data storage object with the new value\n        rootUserChoices.selections[value.target.id] = value.target.value;\n\n        if (rootUserChoices.selections) { primeNextStep(FlowStep.FINAL_STEP); }\n    }\n\n    const parseVariantValue = (value: string | undefined): (\"default\" | \"error\" | undefined) => {\n        if (value === 'default' || value === 'error') { return value; }\n        // eslint-disable-next-line\n        return undefined;\n    }\n\n\n    const { validations, setValidations } = useValidationContext();\n\n    useEffect(() => {\n        const updated = {...validations};\n        updated.IMPORT_SAML_MANUALLY =\n            {\n                'identityProviderEntityId': {\n                    inputType: 'ENTITYID',\n                    variant: 'default',\n                    message: SamlHelperTextMessages.IDENTITY_PROVIDER_ENTITY_ID\n                },\n                'serviceProviderIssuer': {\n                    inputType: 'ENTITYID',\n                    variant: 'default',\n                    message: SamlHelperTextMessages.SERVICE_PROVIDER_ISSUER\n                },\n                'authenticationRequestsUrl': {\n                    inputType: 'DOMAIN',\n                    variant: 'default',\n                    message: SamlHelperTextMessages.AUTHENTICATION_REQUEST_URL\n                },\n                'x509Certificate': {\n                    inputType: 'x509',\n                    variant: 'default',\n                    message: SamlHelperTextMessages.X509_CERTIFICATE.join('@')\n                }\n            };\n        setValidations(updated);\n    }, []);\n\n    return <Form>\n        <Title headingLevel=\"h2\">Configure SAML manually</Title>\n        <FormGroup\n            label=\"Identity provider Entity ID\"\n            isRequired\n            onChange={(value) => { handleSelection(value) }}>\n            <TextInput\n                type=\"text\"\n                id={IDENTITY_PROVIDER_ENTITY_ID} />\n            <HelperText>\n                <HelperTextItem variant={ parseVariantValue(validations.IMPORT_SAML_MANUALLY?.identityProviderEntityId?.variant) }>\n                    { validations.IMPORT_SAML_MANUALLY?.identityProviderEntityId?.message || SamlHelperTextMessages.IDENTITY_PROVIDER_ENTITY_ID }\n                </HelperTextItem>\n            </HelperText>\n        </FormGroup>\n\n        <FormGroup\n            label=\"Authentication request url\"\n            isRequired\n            onChange={(value) => { handleSelection(value) }}>\n            <TextInput\n                       type=\"text\"\n                       id={AUTH_REQUEST_URL} />\n            <HelperText>\n                <HelperTextItem variant={ parseVariantValue(validations.IMPORT_SAML_MANUALLY?.authenticationRequestsUrl?.variant) }>\n                    { validations.IMPORT_SAML_MANUALLY?.authenticationRequestsUrl?.message || SamlHelperTextMessages.AUTHENTICATION_REQUEST_URL }\n                </HelperTextItem>\n            </HelperText>\n        </FormGroup>\n\n        <FormGroup\n            label=\"Service provider issuer\"\n            isRequired\n            onChange={(value) => { handleSelection(value) }}\n            labelIcon={\n                <Popover\n                    triggerAction=\"hover\"\n                    bodyContent={\n                        <div>{SamlHelperTextMessages.NO_SPECIAL_CHARS}</div>\n                    }>\n                    <Button\n                        variant=\"plain\"\n                        type=\"button\"\n                        onClick={(e) => e.preventDefault()}\n                        className={`customPopover ${styles.formGroupLabelHelp}`}>\n                        <HelpIcon />\n                    </Button>\n                </Popover>\n            }>\n            <TextInput\n                       type=\"text\"\n                       id={SERVICE_PROVIDER_ISSUER} />\n            <HelperText>\n                <HelperTextItem variant={ parseVariantValue(validations.IMPORT_SAML_MANUALLY?.serviceProviderIssuer?.variant) }>\n                    { validations.IMPORT_SAML_MANUALLY?.serviceProviderIssuer?.message || SamlHelperTextMessages.SERVICE_PROVIDER_ISSUER }\n                </HelperTextItem>\n            </HelperText>\n        </FormGroup>\n\n        <FormGroup\n            label=\"x509 certificate\"\n            isRequired\n            onChange={(value) => { handleSelection(value) }}>\n            <TextArea resizeOrientation=\"vertical\"\n                      type=\"text\"\n                      id={X509_CERTIFICATE}/>\n            <HelperText>\n                <HelperTextItem variant={ parseVariantValue(validations.IMPORT_SAML_MANUALLY?.x509Certificate?.variant) }>\n                    {\n                        (() => {\n                            const message = validations.IMPORT_SAML_MANUALLY?.x509Certificate?.message?.trim();\n                            if (message) {\n                                // we need to treat the x509 message as an array because it has multiple messages\n                                return message.split('@')\n                                    .map((msg, index) => (\n                                        <p key={index} dangerouslySetInnerHTML={{__html: msg}}/>\n                                    ));\n                            }\n                            // if there is no validation message to throw, show the default helper text message defined in the constant\n                            return SamlHelperTextMessages.X509_CERTIFICATE.map((msg, index) => (\n                                <p key={index} dangerouslySetInnerHTML={{__html: msg}}/>\n                            ));\n                        })()\n                    }\n                </HelperTextItem>\n            </HelperText>\n        </FormGroup>\n\n    </Form>\n\n}\n\nexport default ImportSamlManual;\n","// Final page to display the urls of the flow https://miro.com/app/board/uXjVO_x__QE=/\n\nimport {Button, ClipboardCopy, Form, FormGroup, Popover, Text, Title} from '@patternfly/react-core';\nimport React, {useEffect, useState} from 'react';\nimport {useChrome} from \"@redhat-cloud-services/frontend-components/useChrome\";\nimport {getOrgId, getSSOBaseUrl} from \"../../../Utils/general-utils\";\nimport styles from \"@patternfly/react-styles/css/components/Form/form\";\nimport HelpIcon from \"@patternfly/react-icons/dist/esm/icons/help-icon\";\ninterface Props{\n    accessToken: string | null;\n}\nconst ImportSamlFromURL = ({accessToken} : Props) => {\n    const [orgId, setOrgId] = useState('');\n    const chrome = useChrome();\n\n    const getConfigURL = (path: string) => {\n        return getSSOBaseUrl(chrome) + path;\n    };\n\n    useEffect(() => {\n        setOrgId(getOrgId(accessToken!));\n    }, [])\n\n    return (\n        <Form>\n            <Title headingLevel=\"h2\">Configure these URLs in your Identity Provider</Title>\n            <Text className=\"pf-v5-u-color-400 pf-v5-u-font-size-sm\">Please review the following information and verify that these are entered where required in your organization’s identity provider.</Text>\n\n            <FormGroup\n                label=\"Service provider metadata URL\"\n                labelIcon={\n                    <Popover\n                        triggerAction=\"hover\"\n                        bodyContent={\n                            <div>\n                                Service provider metadata used to integrate Red Hat with your identity provider.\n                            </div>\n                        }>\n                        <Button\n                            variant=\"plain\"\n                            type=\"button\"\n                            onClick={(e) => e.preventDefault()}\n                            className={`customPopover ${styles.formGroupLabelHelp}`}>\n                            <HelpIcon />\n                        </Button>\n                    </Popover>\n                }>\n                <ClipboardCopy isReadOnly clickTip=\"copied\">\n                    {getConfigURL(`broker/${orgId}/endpoint/descriptor`)}\n                </ClipboardCopy>\n            </FormGroup>\n\n            <FormGroup\n                label=\"Redirect URL / Assertion Consumption Service (ACS) URL\"\n                labelIcon={\n                    <Popover\n                        triggerAction=\"hover\"\n                        bodyContent={\n                            <div>\n                                The redirect URL to use when configuring your identity provider. This is where your identity provider will redirect users to authenticate to Red Hat.\n                            </div>\n                        }>\n                        <Button\n                            variant=\"plain\"\n                            type=\"button\"\n                            onClick={(e) => e.preventDefault()}\n                            className={`customPopover ${styles.formGroupLabelHelp}`}>\n                            <HelpIcon />\n                        </Button>\n                    </Popover>\n                }>\n                <ClipboardCopy isReadOnly clickTip=\"copied\">\n                    {getConfigURL(`broker/${orgId}/endpoint`)}\n                </ClipboardCopy>\n            </FormGroup>\n        </Form>\n    )\n}\n\nexport default ImportSamlFromURL;\n","import React from 'react';\nimport { WizardFooterWrapper, useWizardContext} from '@patternfly/react-core/dist/esm/components/Wizard';\nimport { Button } from '@patternfly/react-core';\nimport { isFailureTriggered } from \"../../../Utils/general-utils\";\nimport {UserChoices} from \"../CommonInterfaces/user-choices\";\nimport {useValidationContext} from \"../CommonInterfaces/validation-context\";\n\n\ninterface Props {\n    userChoices: UserChoices;\n    setPreviousTriggered: Function;\n    currentState: string;\n}\n\nconst GenericFooter = ({userChoices, setPreviousTriggered, currentState}: Props) => {\n    const { goToNextStep, goToPrevStep } = useWizardContext();\n    const { validations, setValidations } = useValidationContext();\n\n    /**\n     * Governs what happens when the next button gets clicked. Important for allowing the back and forth communication\n     * between the footer element and the actual component being displayed when needing to perform steps such as validation.\n     */\n    const handleNextClick = () => {\n        if (!isFailureTriggered(userChoices, currentState, validations, setValidations)) {\n            goToNextStep();\n        }\n    }\n\n    /**\n     * on back click we need to be able to trigger the wizard context's default back functionality but we also need to\n     * handle the current state stored in the flowTemplate.\n     */\n    const handleBackClick = () => {\n        // handles wizard default functionality\n        goToPrevStep();\n        // custom logic to update the current flow state.\n        setPreviousTriggered();\n    }\n\n    return (\n        <WizardFooterWrapper>\n            <Button variant=\"secondary\" onClick={handleBackClick}>\n                Back\n            </Button>\n            <Button onClick={handleNextClick}>\n                Next\n            </Button>\n        </WizardFooterWrapper>\n    );\n}\n\nexport default GenericFooter;\n","import React, { MutableRefObject } from 'react';\nimport {\n    WizardFooterWrapper /* data-codemods */, useWizardContext /* data-codemods */\n} from '@patternfly/react-core/dist/esm/components/Wizard';\nimport { Button, Alert, AlertGroup } from '@patternfly/react-core';\nimport { isFailureTriggered } from \"../../../Utils/general-utils\";\nimport {SubmittableSAMLChoices, UserChoices} from \"../CommonInterfaces/user-choices\";\nimport {\n    AUTH_REQUEST_URL,\n    IDENTITY_PROVIDER_ENTITY_ID,\n    X509_CERTIFICATE,\n    SERVICE_PROVIDER_ISSUER\n} from \"../../../Apps/IdpSelfService/CommonInterfaces/idp-request-types\";\n\nimport PropTypes from \"prop-types\";\nimport { useValidationContext } from \"../CommonInterfaces/validation-context\";\nimport { apiCreateIdp } from \"../ApiClient/idp-controller\";\nimport { useChrome } from \"@redhat-cloud-services/frontend-components/useChrome\";\nimport {IdpResponseData} from \"@apps/IdpSelfService/CommonInterfaces/idp-response-types\";\n\ninterface Props {\n    userChoiceData: MutableRefObject<UserChoices>;\n    previous: Function;\n    currentState: string;\n}\n\nconst SubmitFooter = ({ userChoiceData, previous, currentState }: Props) => {\n    const chrome = useChrome();\n    const { goToNextStep, goToPrevStep } = useWizardContext();\n    const [isLoading, setIsLoading] = React.useState(false);\n    const [alerts, setAlerts] = React.useState<React.ReactNode>();\n    const { validations, setValidations } = useValidationContext();\n\n    /**\n     * convert the choice data to use the key's required by the api.\n     */\n    const filterChoiceData = (): SubmittableSAMLChoices => {\n        const provider = userChoiceData.current.selections.protocol === \"OIDC_CONFIG\" ? \"oidc-improved\" : \"saml-improved\"\n        const idpEID = userChoiceData.current.selections[IDENTITY_PROVIDER_ENTITY_ID];\n        const reqURL = userChoiceData.current.selections[AUTH_REQUEST_URL];\n        const serviceEID = userChoiceData.current.selections[SERVICE_PROVIDER_ISSUER];\n        const sanitizedCertChain = userChoiceData.current.selections[X509_CERTIFICATE].replace(/[\\s\\n\\r]/gu, '');\n\n        return {\n            providerId: provider,\n            identityProviderEntityId: idpEID,\n            authenticationRequestsUrl: reqURL,\n            serviceProviderEntityId: serviceEID,\n            x509Certificate: sanitizedCertChain,\n        }\n    }\n\n    /**\n     * function that allows us to trigger the error alert on unsuccessful api call.\n     */\n    const throwError = (message: string) => {\n        const timeout = 8000;\n        // eslint-disable-next-line react/jsx-key\n        setAlerts(<Alert variant=\"danger\" isInline isPlain title={message} timeout={timeout} onTimeout={() => { setAlerts([]) }} />)\n    }\n\n    const createIDPCall = () => {\n        apiCreateIdp(chrome, filterChoiceData(), (responseBody: IdpResponseData) => {\n            if (responseBody.error) {\n                console.error(\"Error Type: \" + responseBody.error);\n                console.error(\"Error Message: \" + responseBody.fields);\n                throwError(\"Failed to upload config: \" + responseBody.fields);\n\n                setIsLoading(false);\n            }\n            else {\n                setIsLoading(false)\n                goToNextStep();\n            }\n        })\n    }\n\n    /**\n     * Governs what happens when the next button gets clicked. Important for allowing the back and forth communication\n     * between the footer element and the actual component being displayed when needing to perform steps such as validation.\n     */\n    const handleNextClick = () => {\n        if (!isFailureTriggered(userChoiceData.current, currentState, validations, setValidations)) {\n            // trigger the spinner.\n            setIsLoading(true);\n            // fire the call to SSO.\n            createIDPCall();\n        } else {\n            setIsLoading(false);\n        }\n    }\n\n    const handleBackClick = () => {\n        goToPrevStep();\n        // custom logic to update the current flow state.\n        previous();\n    }\n\n    return (\n        <WizardFooterWrapper>\n            <Button variant=\"secondary\" onClick={handleBackClick}>\n                Back\n            </Button>\n            <Button onClick={handleNextClick} isLoading={isLoading}>Next</Button>\n            <AlertGroup isLiveRegion className=\"pf-v5-u-mt-sm\">\n                {alerts}\n            </AlertGroup>\n        </WizardFooterWrapper>\n    );\n}\n\nSubmitFooter.propTypes = {\n    userChoiceData: PropTypes.object,\n}\n\nexport default SubmitFooter;\n","import React from 'react';\nimport { WizardFooterWrapper} from '@patternfly/react-core/dist/esm/components/Wizard';\nimport { Button, Checkbox, Stack, StackItem } from '@patternfly/react-core';\n\nconst FinalizeFooter = () => {\n\n    const [checkState, setCheckState] = React.useState(false);\n    /**\n     * Governs what happens when the next button gets clicked. Important for allowing the back and forth communication\n     * between the footer element and the actual component being displayed when needing to perform steps such as validation.\n     */\n    const handleNextClick = () => {\n        window.location.reload();\n    }\n\n    /**\n     * handled\n     */\n    const handleCheckClick = () => {\n        setCheckState(!checkState);\n    }\n\n    return (\n        <WizardFooterWrapper>\n            <Stack hasGutter>\n                <StackItem>\n                    <Checkbox onChange={handleCheckClick} label=\"I have verified that this information is properly set in my identity provider.\" id=\"confirmation\" isChecked={checkState} isRequired></Checkbox>\n                </StackItem>\n                <StackItem>\n                    <Button onClick={handleNextClick} isDisabled={!checkState}>Submit</Button>\n                </StackItem>\n            </Stack>\n        </WizardFooterWrapper>\n    );\n}\n\nexport default FinalizeFooter;\n","import './flow-template.scss'\nimport React, {useState, useRef, useEffect} from 'react';\nimport {Wizard, WizardStep} from '@patternfly/react-core/dist/esm/components/Wizard';\nimport {IdpResponseData, IdpResponseDataInitialState} from \"../CommonInterfaces/idp-response-types\";\nimport {UserChoices} from '../CommonInterfaces/user-choices'\nimport {InputValidation} from '../CommonInterfaces/input-validation'\nimport CustomerInformation from '../FirstStep/customer-information';\nimport OIDCConfig from '../SecondStep/oidc-configuration';\nimport SAMLConfig from '../SecondStep/saml-configuration';\nimport ImportFromFile from '../ThirdStep/import-from-file';\nimport ImportFromUrl from '../ThirdStep/import-from-url';\nimport ImportSamlFromFile from '../ThirdStep/import-saml-from-file';\nimport ImportSamlManual from '../ThirdStep/import-saml-manual';\nimport URLsForUser from '../FinalStep/urls-for-user';\nimport GenericFooter from './generic-footer';\nimport SubmitFooter from './submit-footer';\nimport FinalizeFooter from './finalize-footer';\nimport PropTypes from \"prop-types\";\nimport {useChrome} from \"@redhat-cloud-services/frontend-components/useChrome\";\nimport {PageSection} from \"@patternfly/react-core\";\nimport {FlowStep} from \"../../../Apps/IdpSelfService/Constants/flow-step\";\nimport ValidationContext, {\n    ValidationContextType\n} from \"../../../Apps/IdpSelfService/CommonInterfaces/validation-context\";\nimport {apiGetIdp} from \"../ApiClient/idp-controller\";\n\ninterface Props {\n    accessToken: string\n}\n\nconst FlowTemplate = ({accessToken}: Props) => {\n    const chrome = useChrome();\n    // intended to serve as the main aggregate of data that gets sent to the server\n    const userChoices = useRef<UserChoices>({selections: {}});\n\n    // has the admin's account been configured with an idp. If so display the management screen.\n    const [isConfigured, setIsConfigured] = useState(false);\n    const [isAllowedToConfigure, setIsAllowedToConfigure] = useState(false);\n    const [isLoading, setIsLoading] = useState(true);\n    const [isInit, setIsInit] = useState(true);\n    const [idpData, setIdpData] = useState(IdpResponseDataInitialState);\n\n\n    const recomputeAppState = () => {\n        apiGetIdp(chrome)\n        .then(response => {\n            if (response.status === 204) {\n                return {status: ''};\n            }\n            return response.json()\n        })\n        .then((data: IdpResponseData) => {\n            if (data.providerId === 'oidc-improved' || data.providerId === 'saml-improved') {\n                setIdpData(data);\n                setIsLoading(false);\n                setIsConfigured(true);\n            } else if (data.error) {\n                setIsLoading(false);\n                setIsConfigured(false);\n                setIsAllowedToConfigure(false);\n            } else {\n                setIsLoading(false);\n                setIsConfigured(false);\n                setIsAllowedToConfigure(true);\n            }\n        })\n        .catch(error => {\n            console.error('Error: ', error);\n            setIsLoading(false);\n        })\n    }\n\n    useEffect(() => {\n        recomputeAppState();\n    }, [])\n\n    const defaultValue: ValidationContextType = {\n        validations: {\n            CUSTOMER_INFORMATION: {},\n            OIDC_CONFIG: {},\n            SAML_CONFIG: {},\n            IMPORT_FROM_FILE: {},\n            IMPORT_FROM_URL: {},\n            IMPORT_SAML_FROM_FILE: {},\n            IMPORT_SAML_FROM_URL: {},\n            IMPORT_SAML_MANUALLY: {}\n        },\n        // eslint-disable-next-line no-empty-function\n        setValidations: () => {\n        }\n    };\n\n    // handle the present validation state of the various steps.\n    const [validations, setValidations] = useState<InputValidation>(defaultValue.validations)\n\n    /**\n     * This object is intended to keep a map of the current flow state including next state and\n     * previous state when available.\n     */\n    const [flowState, setFlowState] = useState({\n        currentState: FlowStep.CUSTOMER_INFORMATION,\n        previousState: \"\"\n    })\n\n    /**\n     * seems to be a function required by default for wizard. test at later date to verify. If not then remove. Gets executed\n     * when the wizard isn't otherwise specified what to do.\n     */\n        // eslint-disable-next-line no-empty-function\n    const closeWizard = () => {\n        }\n\n    // manages what flow states are to be displayed from within the wizard\n    const [displayed, setDisplayed] = useState({\n        hideOIDC: true,\n        hideSAML: true,\n        hideImportFromURL: true,\n        hideImportFromFile: true,\n        hideImportManually: true,\n        hideFinish: true,\n    })\n\n    const triggerNextStep = (nextStep: string) => {\n        // Need to pull the current state, run checks, and\n        let newDisplay;\n\n        switch (nextStep) {\n            case FlowStep.OIDC_CONFIG:\n                newDisplay = {...displayed};\n                newDisplay.hideOIDC = false;\n                newDisplay.hideSAML = true;\n                setDisplayed(newDisplay);\n                setFlowState({\n                    currentState: nextStep,\n                    previousState: FlowStep.CUSTOMER_INFORMATION\n                });\n                break;\n            case FlowStep.SAML_CONFIG:\n                newDisplay = {...displayed};\n                newDisplay.hideSAML = false;\n                newDisplay.hideOIDC = true;\n                setDisplayed(newDisplay);\n                setFlowState({\n                    currentState: nextStep,\n                    previousState: FlowStep.CUSTOMER_INFORMATION\n                });\n                break;\n            case FlowStep.IMPORT_FROM_FILE:\n                newDisplay = {...displayed};\n                newDisplay.hideImportFromFile = false;\n                newDisplay.hideImportFromURL = true;\n                setDisplayed(newDisplay);\n                setFlowState({\n                    currentState: nextStep,\n                    previousState: FlowStep.OIDC_CONFIG\n                });\n                break;\n            case FlowStep.IMPORT_FROM_URL:\n                newDisplay = {...displayed};\n                newDisplay.hideImportFromFile = true;\n                newDisplay.hideImportFromURL = false;\n                setDisplayed(newDisplay);\n                setFlowState({\n                    currentState: nextStep,\n                    previousState: FlowStep.OIDC_CONFIG\n                });\n                break;\n            case FlowStep.IMPORT_SAML_FROM_FILE:\n                newDisplay = {...displayed};\n                newDisplay.hideImportManually = true;\n                newDisplay.hideImportFromFile = false;\n                setDisplayed(newDisplay);\n                setFlowState({\n                    currentState: nextStep,\n                    previousState: FlowStep.SAML_CONFIG\n                });\n                break;\n            case FlowStep.IMPORT_SAML_MANUALLY:\n                newDisplay = {...displayed};\n                newDisplay.hideImportManually = false;\n                newDisplay.hideImportFromFile = true;\n                setDisplayed(newDisplay);\n                setFlowState({\n                    currentState: nextStep,\n                    previousState: FlowStep.SAML_CONFIG\n                });\n                break;\n            case FlowStep.IMPORT_SAML_FROM_URL:\n                newDisplay = {...displayed};\n                newDisplay.hideImportFromURL = false;\n                setDisplayed(newDisplay);\n                setFlowState({\n                    currentState: nextStep,\n                    previousState: FlowStep.SAML_CONFIG\n                });\n                break;\n            case FlowStep.FINAL_STEP:\n                newDisplay = {...displayed};\n                newDisplay.hideFinish = false;\n                setDisplayed(newDisplay);\n                setFlowState({\n                    currentState: nextStep,\n                    previousState: flowState.previousState,\n                });\n                break;\n            default:\n                setDisplayed({\n                    hideOIDC: true,\n                    hideSAML: true,\n                    hideImportFromURL: true,\n                    hideImportFromFile: true,\n                    hideImportManually: true,\n                    hideFinish: true,\n                });\n\n        }\n\n    }\n\n    /**\n     *\n     * @param validChoices an array of strings representing the values that will remain in the selection list.\n     */\n    const pruneChoices = (validChoices: string[]) => {\n        const choicesKeys = Object.keys(userChoices.current.selections);\n        for (let i = 0; i < choicesKeys.length; i++) {\n            if (!validChoices.includes(choicesKeys[i])) {\n                // @ts-ignore\n                delete userChoices.current.selections[choicesKeys[i]];\n            }\n        }\n    }\n\n    const triggerBackStep = (prevStep: string) => {\n        switch (prevStep) {\n            case FlowStep.OIDC_CONFIG:\n                pruneChoices([\"protocol\"]);\n                setFlowState({\n                    currentState: prevStep,\n                    previousState: FlowStep.CUSTOMER_INFORMATION,\n                });\n                setDisplayed({\n                    hideOIDC: false,\n                    hideSAML: true,\n                    hideImportFromURL: true,\n                    hideImportFromFile: true,\n                    hideImportManually: true,\n                    hideFinish: true,\n                })\n                break;\n            case FlowStep.SAML_CONFIG:\n                pruneChoices([\"protocol\"]);\n                setFlowState({\n                    currentState: prevStep,\n                    previousState: FlowStep.CUSTOMER_INFORMATION,\n                });\n                setDisplayed({\n                    hideOIDC: true,\n                    hideSAML: false,\n                    hideImportFromURL: true,\n                    hideImportFromFile: true,\n                    hideImportManually: true,\n                    hideFinish: true,\n                })\n                break;\n            case FlowStep.IMPORT_FROM_FILE:\n                pruneChoices([\"clientId\", \"clientSecret\", \"inputMethod\", \"protocol\"]);\n                setFlowState({\n                    currentState: prevStep,\n                    previousState: FlowStep.OIDC_CONFIG,\n                });\n                setDisplayed({\n                    hideOIDC: false,\n                    hideSAML: true,\n                    hideImportFromURL: true,\n                    hideImportFromFile: false,\n                    hideImportManually: true,\n                    hideFinish: true,\n                })\n                break;\n            case FlowStep.IMPORT_FROM_URL:\n                pruneChoices([\"clientId\", \"clientSecret\", \"inputMethod\", \"protocol\"]);\n                setFlowState({\n                    currentState: prevStep,\n                    previousState: FlowStep.OIDC_CONFIG,\n                });\n                setDisplayed({\n                    hideOIDC: false,\n                    hideSAML: true,\n                    hideImportFromURL: false,\n                    hideImportFromFile: true,\n                    hideImportManually: true,\n                    hideFinish: true,\n                })\n                break;\n            case FlowStep.IMPORT_SAML_FROM_URL:\n                pruneChoices([\"clientId\", \"clientSecret\", \"inputMethod\", \"protocol\"]);\n                setFlowState({\n                    currentState: prevStep,\n                    previousState: FlowStep.SAML_CONFIG,\n                });\n                setDisplayed({\n                    hideOIDC: true,\n                    hideSAML: false,\n                    hideImportFromURL: false,\n                    hideImportFromFile: true,\n                    hideImportManually: false,\n                    hideFinish: true,\n                })\n                break;\n            case FlowStep.IMPORT_SAML_MANUALLY:\n                pruneChoices([\"clientId\", \"clientSecret\", \"inputMethod\", \"protocol\"]);\n                setFlowState({\n                    currentState: prevStep,\n                    previousState: FlowStep.SAML_CONFIG,\n                });\n                setDisplayed({\n                    hideOIDC: true,\n                    hideSAML: false,\n                    hideImportFromURL: true,\n                    hideImportFromFile: true,\n                    hideImportManually: false,\n                    hideFinish: true,\n                })\n                break;\n            case FlowStep.IMPORT_SAML_FROM_FILE:\n                pruneChoices([\"clientId\", \"clientSecret\", \"inputMethod\", \"protocol\"]);\n                setFlowState({\n                    currentState: prevStep,\n                    previousState: FlowStep.SAML_CONFIG,\n                });\n                setDisplayed({\n                    hideOIDC: true,\n                    hideSAML: false,\n                    hideImportFromURL: true,\n                    hideImportFromFile: false,\n                    hideImportManually: true,\n                    hideFinish: true,\n                })\n                break;\n            default:\n                pruneChoices([\"\"]);\n                setDisplayed({\n                    hideOIDC: true,\n                    hideSAML: true,\n                    hideImportFromURL: true,\n                    hideImportFromFile: true,\n                    hideImportManually: true,\n                    hideFinish: true,\n                })\n        }\n    }\n\n    const setBackTriggered = () => {\n        triggerBackStep(flowState.previousState)\n    }\n\n    return (\n        <div className=\"flowPage\">\n            <PageSection>\n                <div>\n                    <ValidationContext.Provider value={{validations, setValidations}}>\n                        <Wizard\n                            onClose={closeWizard}\n                            isProgressive>\n\n                            {/* Standard customer config. Every flow requires this */}\n                            <WizardStep\n                                id={'CUSTOMERINFORMATION'}\n                                name={'Customer information'}\n                                footer={\n                                    <GenericFooter\n                                        userChoices={userChoices.current}\n                                        setPreviousTriggered={setBackTriggered}\n                                        currentState={FlowStep.CUSTOMER_INFORMATION}\n                                    />\n                                }>\n                                <CustomerInformation\n                                    rootUserChoices={userChoices.current}\n                                    updateStatus={triggerNextStep}\n                                />\n                            </WizardStep>\n\n                            {/* OIDC Config. Only run through if a customer chooses OIDC configuration */}\n                            <WizardStep\n                                id={'OIDCCONFIG'}\n                                name={'OIDC Configuration'}\n                                isHidden={displayed.hideOIDC}\n                                footer={\n                                    <GenericFooter\n                                        userChoices={userChoices.current}\n                                        setPreviousTriggered={setBackTriggered}\n                                        currentState={'OIDC_CONFIG'}\n                                    />\n                                }>\n                                <OIDCConfig\n                                    rootUserChoices={userChoices.current}\n                                    updateStatus={triggerNextStep}\n                                />\n                            </WizardStep>\n\n                            <WizardStep\n                                id={'IMPORTFROMFILE'}\n                                name={'Import config from file'}\n                                isHidden={!(!displayed.hideOIDC && !displayed.hideImportFromFile)}\n                                footer={\n                                    <SubmitFooter\n                                        userChoiceData={userChoices}\n                                        previous={setBackTriggered}\n                                        currentState={FlowStep.IMPORT_FROM_FILE}\n                                    />\n                                }>\n                                <ImportFromFile\n                                    updateStatus={triggerNextStep}\n                                    rootUserChoices={userChoices.current}\n                                />\n                            </WizardStep>\n\n                            <WizardStep\n                                id={'IMPORTFROMURL'}\n                                name={'Import config from URL'}\n                                isHidden={!(!displayed.hideOIDC && !displayed.hideImportFromURL)}\n                                footer={\n                                    <SubmitFooter\n                                        userChoiceData={userChoices}\n                                        previous={setBackTriggered}\n                                        currentState={FlowStep.IMPORT_FROM_URL}\n                                    />\n                                }>\n                                <ImportFromUrl\n                                    rootUserChoices={userChoices}\n                                />\n                            </WizardStep>\n\n                            {/* SAML Config. Only run through if the customer chooses a SAML configuration */}\n                            <WizardStep\n                                id={'SAMLCONFIG'}\n                                name={'SAML configuration'}\n                                isHidden={displayed.hideSAML}\n                                footer={\n                                    <GenericFooter\n                                        userChoices={userChoices.current}\n                                        setPreviousTriggered={setBackTriggered}\n                                        currentState={'SAML_CONFIG'}\n                                    />\n                                }>\n                                <SAMLConfig\n                                    rootUserChoices={userChoices.current}\n                                    updateStatus={triggerNextStep}\n                                />\n                            </WizardStep>\n\n                            <WizardStep\n                                name={'Import SAML from file'}\n                                id={'IMPORTSAMLFROMFILE'}\n                                isHidden={!(!displayed.hideSAML && !displayed.hideImportFromFile)}\n                                footer={\n                                    <SubmitFooter\n                                        userChoiceData={userChoices}\n                                        previous={setBackTriggered}\n                                        currentState={FlowStep.IMPORT_SAML_FROM_FILE}\n                                    />\n                                }>\n                                <ImportSamlFromFile\n                                    rootUserChoices={userChoices.current}\n                                    updateStatus={triggerNextStep}\n                                />\n\n                            </WizardStep>\n                            <WizardStep\n                                name={'Configure SAML manually'}\n                                id={'IMPORTSAMLMANUALLY'}\n                                isHidden={!(!displayed.hideSAML && !displayed.hideImportManually)}\n                                footer={\n                                    <SubmitFooter\n                                        userChoiceData={userChoices}\n                                        previous={setBackTriggered}\n                                        currentState={FlowStep.IMPORT_SAML_MANUALLY}\n                                    />\n                                }>\n\n                                <ImportSamlManual\n                                    primeNextStep={triggerNextStep}\n                                    rootUserChoices={userChoices.current}\n                                />\n\n                            </WizardStep>\n\n                            {/* Final steps of the process. again any selection will show the following two steps.*/}\n                            <WizardStep\n                                id={'FINALSTEP'}\n                                name={'Configure URLs in your IDP'}\n                                isHidden={displayed.hideFinish}\n                                footer={\n                                    <FinalizeFooter/>\n                                }>\n                                {/* should support both SAML and OIDC params */}\n                                <URLsForUser accessToken={accessToken}/>\n                            </WizardStep>\n                        </Wizard>\n                    </ValidationContext.Provider>\n                </div>\n            </PageSection>\n        </div>\n    );\n}\n\n\nFlowTemplate.propTypes = {\n    accessToken: PropTypes.string\n}\n\nexport default FlowTemplate;\n","export class OidcHelperTextMessages {\n    public static readonly ISSUER = 'The issuer is how your identity provider identifies itself, which we verify on all identity-provider-issued tokens for added security.';\n\n    public static readonly CLIENT_ID = 'The client identifier used to register the third party service. Some identity providers may refer to this as an Application';\n\n    public static readonly CLIENT_SECRET = 'The secret value registered with this client.';\n\n    public static readonly AUTHORIZATION_URL = 'The URL that performs authentication of the end-user.';\n\n    public static readonly TOKEN_URL = 'The URL where an authorization code can be exchanged for an access token and ID token.';\n\n    public static readonly PUBLIC_KEY = 'This public key will be used to verify the signature of the JWTs created by the identity provider.';\n\n    public static readonly PUBLIC_KEY_ID = 'The key identifier (KID) for the provided Public Key field below.';\n\n}\n","import {OidcResponseData} from \"@apps/IdpSelfService/CommonInterfaces/idp-response-types\";\nimport {\n    Button,\n    FormGroup,\n    FormHelperText,\n    HelperText,\n    HelperTextItem,\n    Popover,\n    TextInput\n} from \"@patternfly/react-core\";\nimport styles from \"@patternfly/react-styles/css/components/Form/form\";\nimport HelpIcon from \"@patternfly/react-icons/dist/esm/icons/help-icon\";\nimport React from \"react\";\nimport {OidcHelperTextMessages} from \"../Constants/oidc-helper-text-messages\";\n\ninterface Props {\n    baseData?: OidcResponseData,\n    editableData: any,\n    editFunction: any,\n    isCreation: boolean\n}\n\nconst OIDCForm = ({baseData, editFunction, editableData, isCreation}: Props) => {\n\n    const isDisabled = () => {\n        if (isCreation) {\n            return false;\n        } else if (baseData && baseData.enabled) {\n            return true;\n        }\n        return false;\n    }\n\n    return (\n        <div>\n            <FormGroup\n                label=\"Issuer\"\n                fieldId=\"oidc-issuer\">\n                <TextInput isDisabled={isDisabled()} onChange={editFunction} type=\"text\" id=\"oidc-issuer\" name=\"issuer\" value={editableData.issuer} />\n                <FormHelperText>\n                    <HelperText>\n                        <HelperTextItem>{OidcHelperTextMessages.ISSUER}</HelperTextItem>\n                    </HelperText>\n                </FormHelperText>\n            </FormGroup>\n\n            <FormGroup\n                label=\"Client ID\"\n                fieldId=\"oidc-client-id\">\n                <TextInput isDisabled={isDisabled()} onChange={editFunction} type=\"text\" id=\"oidc-client-id\" name=\"clientId\" value={editableData.clientId} />\n                <FormHelperText>\n                    <HelperText>\n                        <HelperTextItem>{OidcHelperTextMessages.CLIENT_ID}</HelperTextItem>\n                    </HelperText>\n                </FormHelperText>\n            </FormGroup>\n\n            <FormGroup\n                label=\"Client Secret\"\n                fieldId=\"oidc-client-secret\">\n                <TextInput isDisabled={isDisabled()} onChange={editFunction} type=\"text\" id=\"oidc-client-secret\" name=\"clientSecret\" value={editableData.clientSecret} />\n                <FormHelperText>\n                    <HelperText>\n                        <HelperTextItem>{OidcHelperTextMessages.CLIENT_SECRET}</HelperTextItem>\n                    </HelperText>\n                </FormHelperText>\n            </FormGroup>\n\n            <FormGroup\n                label=\"Authorization URL\"\n                fieldId=\"oidc-authorization-url-id\">\n                <TextInput isDisabled={isDisabled()} onChange={editFunction} type=\"text\" id=\"oidc-token-url-id\" name=\"authorizationUrl\" value={editableData.authorizationUrl} />\n\n                <FormHelperText>\n                    <HelperText>\n                        <HelperTextItem>{OidcHelperTextMessages.AUTHORIZATION_URL}</HelperTextItem>\n                    </HelperText>\n                </FormHelperText>\n            </FormGroup>\n\n            <FormGroup\n                label=\"Token URL\"\n                fieldId=\"authorization-url\">\n                <TextInput isDisabled={isDisabled()} onChange={editFunction} type=\"text\" id=\"authorization-url\" name=\"tokenUrl\" value={editableData.tokenUrl}/>\n                <FormHelperText>\n                    <HelperText>\n                        <HelperTextItem>{OidcHelperTextMessages.TOKEN_URL}</HelperTextItem>\n                    </HelperText>\n                </FormHelperText>\n            </FormGroup>\n\n            <FormGroup\n                label=\"Public Key ID\"\n                fieldId=\"publicKeyId\">\n                <TextInput isDisabled={isDisabled()} onChange={editFunction} type=\"text\" id=\"public-key-id\" name=\"publicKeyId\" value={editableData.publicKeyId} />\n                <FormHelperText>\n                    <HelperText>\n                        <HelperTextItem>{OidcHelperTextMessages.PUBLIC_KEY_ID}</HelperTextItem>\n                    </HelperText>\n                </FormHelperText>\n            </FormGroup>\n\n            <FormGroup\n                label=\"Public Key\"\n                fieldId=\"publicKey\">\n                <TextInput isDisabled={isDisabled()} onChange={editFunction} type=\"text\" id=\"public-key\" name=\"publicKey\" value={editableData.publicKey} />\n                <FormHelperText>\n                    <HelperText>\n                        <HelperTextItem>{OidcHelperTextMessages.PUBLIC_KEY}</HelperTextItem>\n                    </HelperText>\n                </FormHelperText>\n            </FormGroup>\n        </div>\n    )\n}\n\nexport default OIDCForm;\n","import React from \"react\";\nimport { Button, Modal, ModalVariant } from \"@patternfly/react-core\";\nimport { apiToggleIdPStatus } from \"../ApiClient/idp-controller\";\nimport { useChrome } from \"@redhat-cloud-services/frontend-components/useChrome\";\nimport { ModalBody, ModalFooter } from \"@patternfly/react-core/next\";\n\ninterface Props {\n    idpAlias: string,\n    isOpen: boolean,\n    onClose: () => void,\n    recomputeAppState: () => void\n}\n\nexport const DisableIdpModal = ({ idpAlias, isOpen, onClose, recomputeAppState }: Props) => {\n    const chrome = useChrome();\n\n    const disableIdp = async () => {\n        await apiToggleIdPStatus(chrome, idpAlias);\n        recomputeAppState();\n        onClose();\n    }\n\n    return (\n        <Modal\n            titleIconVariant={'warning'}\n            title=\"Disable identity provider?\"\n            isOpen={isOpen}\n            variant={ModalVariant.small}\n            onClose={onClose}\n        >\n            <ModalBody>\n                Disabling your identity provider will allow users on your organization to sign-in using their Red Hat credentials.\n            </ModalBody>\n            <ModalFooter>\n                <Button variant=\"danger\" onClick={() => disableIdp()}>\n                    Disable\n                </Button>\n                <Button variant=\"link\" onClick={onClose}>\n                    Cancel\n                </Button>\n            </ModalFooter>\n        </Modal>\n    )\n}\n","import {Button, Modal, ModalVariant, Text, TextContent, Title} from \"@patternfly/react-core\";\nimport React, {useEffect, useState} from \"react\";\nimport { getSSOBaseUrl } from \"../../../Utils/general-utils\";\nimport {useChrome} from \"@redhat-cloud-services/frontend-components/useChrome\";\nimport {Link} from \"react-router-dom\";\nimport {apiToggleIdPStatus} from \"../ApiClient/idp-controller\";\n\ninterface Props {\n    idpAlias: string,\n    isOpen: boolean,\n    onClose: () => void,\n    recomputeAppState: () => void\n}\n\nconst IdpTestingModal = ({ idpAlias, isOpen, onClose, recomputeAppState }: Props) => {\n    const chrome = useChrome();\n    const ssoBaseUrl = getSSOBaseUrl(chrome);\n\n    const [primaryModalAction, setPrimaryModalAction] = useState(<Button />);\n    const [testBtnEnabled, setTestBtnEnabled] = useState(false);\n    const [idpTestingModalIcon, setIdpTestingModalIcon] = useState<\"info\"|\"danger\"|\"success\">(\"info\");\n    const [idpTestingModalTitle, setIdpTestingModalTitle] = useState(\"\");\n    const [idpTestingModalBody, setIdpTestingModalBody] = useState(<Text></Text>);\n    const [idpTestingModalErrorBody, setIdpTestingModalErrorBody] = useState(\"\");\n\n    const resetTestingModal = () => {\n        setPrimaryModalAction(<Button />);\n        setTestBtnEnabled(true);\n        setIdpTestingModalIcon(\"info\");\n        setIdpTestingModalTitle(\"Identity provider testing\");\n        setIdpTestingModalBody(<Text>Testing will open a pop-up window that will authenticate with your configured identity provider. If you are not currently signed into this identity provider, please do so in the pop-up window. Please be sure that pop-ups are allowed in your browser.</Text>);\n        setIdpTestingModalErrorBody(\"\");\n    }\n\n    useEffect(() => {\n        resetTestingModal();\n    }, []);\n\n    const dismissTestingModal = () => {\n        onClose();\n        resetTestingModal();\n    }\n\n    const getTestUrl = () => {\n        const idpAliasJson = { 'idp_alias': idpAlias }\n        const idpAliasJsonString = encodeURIComponent(JSON.stringify(idpAliasJson));\n        return `${ssoBaseUrl}protocol/openid-connect/auth?client_id=idp-connectivity-testing-login-client&redirect_uri=${ssoBaseUrl}&response_mode=query&response_type=code&scope=openid&state=${idpAliasJsonString}`;\n    }\n\n    const enableIdP = async () => {\n        await apiToggleIdPStatus(chrome, idpAlias);\n        recomputeAppState();\n        dismissTestingModal();\n    }\n\n    function processEventData(event: MessageEvent<any>) {\n        if (event.data.success === true) {\n            setPrimaryModalAction(<Button key=\"Enable\" variant=\"primary\" onClick={enableIdP}>Enable</Button>)\n            setIdpTestingModalIcon(\"success\")\n            setIdpTestingModalTitle(\"Test successful. Enable for your organization?\")\n            setIdpTestingModalBody(<Text>Enabling will require users on your organization to authenticate through\n                your newly-configured identity provider on their next authentication. If you do not enable this now,\n                you will have to re-test again before being allowed to enable this identity provider.</Text>)\n        } else {\n            setPrimaryModalAction(<Button key=\"Dismiss\" variant=\"primary\"\n                                          onClick={dismissTestingModal}>Dismiss</Button>)\n            setIdpTestingModalIcon(\"danger\")\n            setIdpTestingModalTitle(\"Test failed\")\n            setIdpTestingModalBody(<Text>Try looking over some <Link\n                to=\"https://access.redhat.com/articles/7092870\">common mistakes</Link> and then re-testing. If that\n                doesn’t help, <Link to={\"https://access.redhat.com/support/\"}>contact support</Link>.</Text>)\n            setIdpTestingModalErrorBody(event.data.errorMsg);\n        }\n    }\n\n    const handleTestBtn = () => {\n        // this must be executed before the popup is triggered\n        window.addEventListener(\"message\", (event) => {\n            if (ssoBaseUrl.includes(event.origin)) {\n                processEventData(event);\n            }\n        });\n\n        setTestBtnEnabled(false);\n        setIdpTestingModalBody(<Text>Please complete identity provider testing in pop-up window</Text>);\n\n        window.open(getTestUrl(), \"RH IdP Integration Testing\", 'width=600,height=600,resizable,scrollbars');\n    }\n\n    return (\n        <Modal\n            titleIconVariant={idpTestingModalIcon}\n            title={idpTestingModalTitle}\n            isOpen={isOpen}\n            variant={ModalVariant.medium}\n            onClose={dismissTestingModal}\n            actions={[\n                primaryModalAction.key !== null ? primaryModalAction\n                : [\n                    <Button isDisabled={!testBtnEnabled} key=\"Test\" variant=\"primary\" onClick={handleTestBtn}>\n                        Test\n                    </Button>,\n                    <Button key=\"cancel\" variant=\"link\" onClick={dismissTestingModal}>\n                        Cancel\n                    </Button>\n                ]\n            ]}\n        >\n            <TextContent>\n                <Text>{idpTestingModalBody}</Text>\n                <Title headingLevel={\"h3\"} hidden={!idpTestingModalErrorBody}>Error:</Title>\n                <Text hidden={!idpTestingModalErrorBody}>{idpTestingModalErrorBody}</Text>\n            </TextContent>\n        </Modal>\n    )\n}\n\nexport { IdpTestingModal };\n","import React from \"react\";\nimport { Button, Modal, ModalVariant } from \"@patternfly/react-core\";\nimport { apiDeleteIdp } from \"../ApiClient/idp-controller\";\nimport { useChrome } from \"@redhat-cloud-services/frontend-components/useChrome\";\nimport { ModalBody, ModalFooter } from \"@patternfly/react-core/next\";\n\ninterface Props {\n  idpAlias: string,\n  isOpen: boolean,\n  onClose: () => void,\n  recomputeAppState: () => void\n}\n\nexport const DeleteIdpModal = ({ idpAlias, isOpen, onClose, recomputeAppState }: Props) => {\n  const chrome = useChrome();\n\n  const deleteIdp = async () => {\n    await apiDeleteIdp(chrome, idpAlias);\n    recomputeAppState();\n    onClose();\n  }\n\n  return (\n    <Modal\n      titleIconVariant={'warning'}\n      title=\"Delete identity provider?\"\n      isOpen={isOpen}\n      variant={ModalVariant.medium}\n      onClose={onClose}\n    >\n      <ModalBody>\n        Until a new integration is configured, users will log in with their Red Hat account credentials.\n        <br/><br/>\n        When a new integration is configured, users who previously linked their IdP user and Red Hat user will need to\n        repeat this step once on their next log in.\n      </ModalBody>\n      <ModalFooter>\n        <Button variant=\"danger\" onClick={() => deleteIdp()}>\n          Delete\n        </Button>\n        <Button variant=\"link\" onClick={onClose}>\n          Cancel\n        </Button>\n      </ModalFooter>\n    </Modal>\n  )\n}\n\n","export abstract class IdpDisplayNames {\n\n    private static variableConversion: Record<string, string> = {\n        \"identityProviderEntityId\": \"Identity provider Entity ID\",\n        \"authenticationRequestsUrl\": \"Single sign-on authentication request URL\",\n        \"serviceProviderEntityId\": \"Service provider issuer\",\n        \"x509Certificate\": \"x509 certificate\",\n        \"issuer\": \"Issuer\",\n        \"clientId\": \"client ID\",\n        \"clientSecret\": \"Client Secret\",\n        \"authorizationUrl\": \"Authorization URL\",\n        \"tokenUrl\": \"Token URL\",\n        \"publicKeyId\": \"Public Key ID\",\n        \"publicKey\": \"Public Key\"\n    }\n\n    public static getPrintableString(varName :string): string {\n        return this.variableConversion[varName] ?? varName;\n    }\n}\n","export class IdpCommonMessages {\n    public static readonly UPDATE_SUCCESS_MESSAGE = 'The IDP configuration was updated successfully.';\n\n    public static readonly UPDATE_ERROR_TITLE = 'Error updating IDP configuration.';\n}\n","import React, {ReactElement, useState} from 'react';\nimport './configured-oidc-idp.scss'\nimport {IdpResponseData, OidcResponseData} from \"../CommonInterfaces/idp-response-types\";\nimport {\n    ActionList,\n    ActionListItem,\n    Alert,\n    AlertGroup,\n    Button,\n    ClipboardCopy,\n    Form,\n    FormGroup,\n    Popover,\n    Text,\n    TextContent,\n    TextVariants,\n    Title\n} from '@patternfly/react-core';\nimport HelpIcon from '@patternfly/react-icons/dist/esm/icons/help-icon';\nimport { useChrome } from \"@redhat-cloud-services/frontend-components/useChrome\";\nimport { getSSOBaseUrl } from \"../../../Utils/general-utils\";\nimport styles from \"@patternfly/react-styles/css/components/Form/form\";\nimport OIDCForm from \"../ProviderForms/oidc-form\";\nimport {DisableIdpModal} from \"../Configured/disable-idp-modal\";\nimport {IdpTestingModal} from \"../IdpTesting/idp-testing-modal\";\nimport {DeleteIdpModal} from \"../Configured/delete-idp-modal\";\nimport {IdpDisplayNames} from \"../../IdpSelfService/Constants/idp-display-names\";\nimport {IdpCommonMessages} from \"../../IdpSelfService/Constants/idp-common-messages\";\nimport {apiUpdateIdp} from \"../../IdpSelfService/ApiClient/idp-controller\";\n\ninterface Props {\n    oidcData: OidcResponseData,\n    recomputeAppState: () => void,\n    milestoneThreeEnabled: boolean\n}\n\nconst ConfiguredOidcIdp = ({ oidcData, milestoneThreeEnabled, recomputeAppState }: Props) => {\n    const chrome = useChrome();\n    const ssoBaseUrl = getSSOBaseUrl(chrome);\n    const [isTestingModalVisible, toggleTestingModalVisibility] = useState(false);\n    const [isDisabledModalVisible, toggleIsDisabledModalVisible] = useState(false);\n    const [isDeleteModalVisible, toggleIsDeleteModalVisible] = useState(false);\n    const [isEditing, setIsEditing] = useState(false);\n    const [inputData, setInputData] = useState<OidcResponseData>(oidcData);\n    const [alerts, setAlerts] = React.useState<React.ReactNode>();\n\n    // the time in milliseconds that messages will be displayed on the page\n    const messageTimeout = 12000;\n\n    /**\n     * triggered by onChange of each of the inputs, this simply updates the current state for the inputData.\n     * @param editEvent the event value provided by the event.\n     */\n    const onEdit = (editEvent:any) => {\n        if (!isEditing) {\n            setIsEditing(true);\n        }\n        const existingInput = {...inputData};\n        // @ts-ignore\n        existingInput[editEvent.currentTarget.name] = editEvent.currentTarget.value;\n        setInputData(existingInput)\n    }\n\n    const scrollToTop = () => {\n        document.getElementById('headerAnchor')!.scrollIntoView({behavior: 'smooth'});\n    }\n\n    /**\n     * throws a fresh alert component into the alert block with green background to indicate success\n     * @param message the text displayed in the alert\n     */\n    const showSuccessMessage = (message: string) => {\n        setAlerts(<Alert variant=\"success\" title={message} timeout={messageTimeout} onTimeout={() => { setAlerts([]) }}/>);\n        scrollToTop();\n    }\n\n    /**\n     * throws a fresh alert component into the alert block with red background to indicate an error.\n     * @param messages the text displayed in the error.\n     */\n    const setErrorMessage = (messages: Record<string, string>) => {\n        const errorList: ReactElement[] = [];\n        const keysList = Object.keys(messages);\n        keysList.forEach(key => {\n            errorList.push(<div key={key}><span className=\"bolderKey\">{IdpDisplayNames.getPrintableString(key)}:</span> {messages[key]}</div>)\n        })\n        if (keysList.length > 0) {\n            setAlerts(<Alert variant=\"danger\" title={IdpCommonMessages.UPDATE_ERROR_TITLE}>{errorList}</Alert>);\n            scrollToTop();\n        }\n        else {\n            setAlerts([]);\n        }\n    }\n\n    /**\n     * submit api request to update the existing idp configuration settings.\n     */\n    const updateIdpSettings = () => {\n        setErrorMessage({});\n\n        // need to destructure the existing inputData\n        const {\n            providerId,\n            issuer,\n            clientId,\n            clientSecret,\n            authorizationUrl,\n            tokenUrl,\n            publicKey,\n            publicKeyId\n        } = inputData;\n\n        const updateData = {\n            providerId,\n            issuer,\n            clientId,\n            clientSecret,\n            authorizationUrl,\n            tokenUrl,\n            publicKey,\n            publicKeyId\n        }\n\n        apiUpdateIdp(chrome, updateData, (responseBody: IdpResponseData) => {\n            if (responseBody.error && responseBody.fields) {\n                const errorFields = Array.isArray(responseBody.fields)\n                    ? Object.fromEntries(responseBody.fields.map((msg, index) => [`${index}`, msg]))\n                    : responseBody.fields;\n\n                setErrorMessage(errorFields);\n            } else {\n                showSuccessMessage(IdpCommonMessages.UPDATE_SUCCESS_MESSAGE);\n                setIsEditing(false);\n                setInputData(prevData => ({\n                    ...prevData,\n                    lastUpdatedDate: responseBody.lastUpdatedDate,\n                    lastUpdatedBy: responseBody.lastUpdatedBy\n                }));\n            }\n        }).catch((error) => {\n            console.error(\"Failed to update IdP:\", error);\n        });\n    }\n\n    /**\n     *  determines the action button that should be displayed.\n     */\n    const actionButton = () => {\n        if (milestoneThreeEnabled) {\n            if (oidcData.enabled) {\n                return (\n                    <ActionListItem>\n                    <Button variant={\"danger\"} onClick={() => toggleIsDisabledModalVisible(true)}>\n                        Disable\n                    </Button>\n                    </ActionListItem>\n                )\n            }\n            if (isEditing) {\n                return (\n                    <Button onClick={() => updateIdpSettings()}>\n                        Update\n                    </Button>\n                )\n            }\n            return (\n                <Button onClick={() => toggleTestingModalVisibility(true)}>\n                    Test and enable\n                </Button>\n            );\n        }\n        return (\n            <>\n                <Popover\n                    triggerAction=\"hover\"\n                    aria-label=\"Hoverable popover\"\n                    headerContent={<div>Read-Only</div>}\n                    bodyContent={<div>This page currently shows a read-only version of your configuration. Forthcoming\n                        enhancements will provide the ability to edit.</div>}\n                    footerContent=\"\">\n                    <ActionListItem>\n                        {oidcData.enabled\n                            ? <Button variant=\"danger\" isDisabled>\n                                Disable\n                            </Button>\n                            : <>\n                                <Button variant=\"primary\" isDisabled>\n                                    Test and enable\n                                </Button>\n                                <Button variant=\"link\" isDanger isDisabled>\n                                    Delete identity provider\n                                </Button>\n                            </>\n                        }\n                    </ActionListItem>\n                </Popover>\n            </>\n        )\n    }\n\n    return (\n        <Form>\n            <AlertGroup id=\"userNotification\" isLiveRegion className=\"alertList\">\n                {alerts}\n            </AlertGroup>\n\n            <OIDCForm baseData={oidcData} editableData={inputData} editFunction={onEdit} isCreation={false}/>\n\n            <Title headingLevel={\"h3\"}>URLs required for identity provider configuration</Title>\n\n            <TextContent>\n                <Text component={TextVariants.p}>\n                    Use these URLs to assist in completing setup within your identity provider.\n                </Text>\n            </TextContent>\n\n            <FormGroup\n                label=\"Service provider metadata URL\"\n                fieldId=\"metadata-url\"\n                labelIcon={\n                    <Popover\n                        triggerAction=\"hover\"\n                        bodyContent={\n                            <div>\n                                Service provider metadata used to integrate Red Hat with your identity provider.\n                            </div>\n                        }>\n                        <Button\n                            variant=\"plain\"\n                            type=\"button\"\n                            onClick={(e) => e.preventDefault()}\n                            className={`customPopover ${styles.formGroupLabelHelp}`}>\n                            <HelpIcon/>\n                        </Button>\n                    </Popover>\n                }>\n                <ClipboardCopy\n                    type=\"text\"\n                    id=\"metadata-url\"\n                    name=\"metadata-url\"\n                    isReadOnly>\n                    {`${ssoBaseUrl}.well-known/openid-configuration`}\n                </ClipboardCopy>\n            </FormGroup>\n\n            <FormGroup\n                label=\"Redirect URL / Assertion Consumption Service (ACS) URL\"\n                fieldId=\"redirect-url\"\n                labelIcon={\n                    <Popover\n                        triggerAction=\"hover\"\n                        bodyContent={\n                            <div>\n                                The redirect URL to use when configuring your identity provider. This represents your company’s SSO Portal where users authenticate to Red Hat.\n                            </div>\n                        }>\n                        <Button\n                            variant=\"plain\"\n                            type=\"button\"\n                            onClick={(e) => e.preventDefault()}\n                            className={`customPopover ${styles.formGroupLabelHelp}`}>\n                            <HelpIcon/>\n                        </Button>\n                    </Popover>\n                }>\n                <ClipboardCopy\n                    type=\"text\"\n                    id=\"redirect-url\"\n                    name=\"redirect-url\"\n                    isReadOnly>\n                    {`${ssoBaseUrl}broker/${oidcData.idpAlias}/endpoint`}\n                </ClipboardCopy>\n            </FormGroup>\n\n            <ActionList>\n                <ActionListItem>\n                    {actionButton()}\n                </ActionListItem>\n                <ActionListItem>\n                    <Button variant=\"link\" onClick={() => toggleIsDeleteModalVisible(true)} isDanger>\n                        Delete identity provider\n                    </Button>\n                </ActionListItem>\n                {isDisabledModalVisible && <DisableIdpModal idpAlias={oidcData.idpAlias} isOpen={isDisabledModalVisible}\n                                                            onClose={() => toggleIsDisabledModalVisible(false)}\n                                                            recomputeAppState={recomputeAppState}/>}\n                {isTestingModalVisible && <IdpTestingModal idpAlias={oidcData.idpAlias} isOpen={isTestingModalVisible}\n                                                           onClose={() => toggleTestingModalVisibility(false)}\n                                                           recomputeAppState={recomputeAppState}/>}\n                {isDeleteModalVisible && <DeleteIdpModal idpAlias={oidcData.idpAlias} isOpen={isDeleteModalVisible}\n                                                         onClose={() => toggleIsDeleteModalVisible(false)}\n                                                         recomputeAppState={recomputeAppState}/>}\n            </ActionList>\n        </Form>\n    )\n}\n\nexport default ConfiguredOidcIdp;\n","import {\n    Button,\n    FormGroup,\n    FormHelperText,\n    HelperText,\n    HelperTextItem,\n    Popover, TextArea,\n    TextInput\n} from \"@patternfly/react-core\";\nimport {SamlHelperTextMessages} from \"../Constants/saml-helper-text-messages\";\nimport styles from \"@patternfly/react-styles/css/components/Form/form\";\nimport HelpIcon from \"@patternfly/react-icons/dist/esm/icons/help-icon\";\nimport React from \"react\";\nimport {SamlResponseData} from \"../CommonInterfaces/idp-response-types\";\n\ninterface Props {\n    baseData?: SamlResponseData,\n    editableData: any,\n    editFunction: any,\n}\n\nconst SAMLForm = ({baseData, editFunction, editableData}: Props) => {\n    return (\n        <div>\n            <FormGroup\n                label=\"Identity provider Entity ID\"\n                fieldId=\"saml-entity-id\"\n                labelIcon={\n                    <Popover\n                        triggerAction=\"hover\"\n                        bodyContent={\n                            <div>{SamlHelperTextMessages.ENTITY_ID}</div>\n                        }>\n                        <Button\n                            variant=\"plain\"\n                            type=\"button\"\n                            onClick={(e) => e.preventDefault()}\n                            className={`customPopover ${styles.formGroupLabelHelp}`}>\n                            <HelpIcon />\n                        </Button>\n                    </Popover>\n                }>\n                <TextInput isDisabled={baseData && baseData.enabled} onChange={editFunction} type=\"text\" id=\"saml-entity-id\" name=\"identityProviderEntityId\" value={editableData.identityProviderEntityId} />\n                <FormHelperText>\n                    <HelperText>\n                        <HelperTextItem>{SamlHelperTextMessages.ENTITY_ID}</HelperTextItem>\n                    </HelperText>\n                </FormHelperText>\n            </FormGroup>\n\n            <FormGroup\n                label=\"Single sign-on authentication request URL\"\n                fieldId=\"saml-authn-request-url\">\n                <TextInput isDisabled={ baseData && baseData.enabled} onChange={editFunction} type=\"text\" id=\"saml-authn-request-url\" name=\"authenticationRequestsUrl\" value={editableData.authenticationRequestsUrl} />\n                <FormHelperText>\n                    <HelperText>\n                        <HelperTextItem>{SamlHelperTextMessages.AUTHENTICATION_REQUEST_URL}</HelperTextItem>\n                    </HelperText>\n                </FormHelperText>\n            </FormGroup>\n\n            <FormGroup\n                label=\"Service provider issuer\"\n                fieldId=\"saml-provider-issuer\">\n                <TextInput isDisabled={ baseData && baseData.enabled} onChange={editFunction} type=\"text\" id=\"saml-provider-issuer\" name=\"serviceProviderEntityId\" value={editableData.serviceProviderEntityId} />\n                <FormHelperText>\n                    <HelperText>\n                        <HelperTextItem>{SamlHelperTextMessages.SERVICE_PROVIDER_ISSUER}</HelperTextItem>\n                    </HelperText>\n                </FormHelperText>\n            </FormGroup>\n\n            <FormGroup\n                label=\"x509 certificate\"\n                fieldId=\"saml-x509-certificate\"\n                labelIcon={\n                    <Popover\n                        triggerAction=\"hover\"\n                        bodyContent={\n                            <div>A PEM certificate that is used to check for signatures.</div>\n                        }>\n                        <Button\n                            variant=\"plain\"\n                            type=\"button\"\n                            onClick={(e) => e.preventDefault()}\n                            className={`customPopover ${styles.formGroupLabelHelp}`}>\n                            <HelpIcon />\n                        </Button>\n                    </Popover>\n                }>\n                <TextArea resizeOrientation=\"vertical\" isDisabled={baseData && baseData.enabled} type=\"text\" onChange={editFunction} id=\"saml-authn-request-url\" name=\"x509Certificate\" value={editableData.x509Certificate} />\n                <FormHelperText>\n                    <HelperText>\n                        {SamlHelperTextMessages.X509_CERTIFICATE.map((message, index) => (\n                            <HelperTextItem key={index}>\n                                <p dangerouslySetInnerHTML={{__html: message}}/>\n                            </HelperTextItem>\n                        ))}\n                    </HelperText>\n                </FormHelperText>\n            </FormGroup>\n        </div>\n    )\n}\n\nexport default SAMLForm;\n","import {Button, ClipboardCopy, FormGroup, Popover} from \"@patternfly/react-core\";\nimport styles from \"@patternfly/react-styles/css/components/Form/form\";\nimport HelpIcon from \"@patternfly/react-icons/dist/esm/icons/help-icon\";\nimport React from \"react\";\n\ninterface Props {\n    baseUrl: string;\n    idpAlias: string;\n}\n\nconst SamlStaticContent = ({baseUrl, idpAlias}: Props) => {\n\n    return (\n        <div>\n            <FormGroup\n                label=\"Service provider metadata URL\"\n                fieldId=\"service-provider-metadata-url\"\n                labelIcon={\n                    <Popover\n                        triggerAction=\"hover\"\n                        bodyContent={\n                            <div>\n                                Service provider metadata used to integrate Red Hat with your identity provider.\n                            </div>\n                        }>\n                        <Button\n                            variant=\"plain\"\n                            type=\"button\"\n                            onClick={(e) => e.preventDefault()}\n                            className={`customPopover ${styles.formGroupLabelHelp}`}>\n                            <HelpIcon />\n                        </Button>\n                    </Popover>\n                }>\n                <ClipboardCopy\n                    type=\"text\"\n                    id=\"service-provider-metadata-url\"\n                    name=\"service-provider-metadata-url\"\n                    isReadOnly>\n                    {`${baseUrl}broker/${idpAlias}/endpoint/descriptor`}\n                </ClipboardCopy>\n            </FormGroup>\n\n            <FormGroup\n                label=\"Redirect URL / Assertion Consumption Service (ACS) URL\"\n                fieldId=\"redirect-url\"\n                labelIcon={\n                    <Popover\n                        triggerAction=\"hover\"\n                        bodyContent={\n                            <div>\n                                The redirect URL to use when configuring your identity provider. This is where your identity provider will redirect users to authenticate to Red Hat.\n                            </div>\n                        }>\n                        <Button\n                            variant=\"plain\"\n                            type=\"button\"\n                            onClick={(e) => e.preventDefault()}\n                            className={`customPopover ${styles.formGroupLabelHelp}`}>\n                            <HelpIcon />\n                        </Button>\n                    </Popover>\n                }>\n                <ClipboardCopy\n                    type=\"text\"\n                    id=\"redirect-url\"\n                    name=\"redirect-url\"\n                    isReadOnly>\n                    {`${baseUrl}broker/${idpAlias}/endpoint`}\n                </ClipboardCopy>\n            </FormGroup>\n        </div>\n    )\n}\n\nexport default SamlStaticContent;\n","import { createContext } from \"react\";\n\n// @ts-ignore\nconst messagesContext = createContext({\n    messages: [],\n    setMessages: (message:any) => {}\n});\n\nexport default messagesContext;\n","export abstract class IdpDisplayNames {\n\n    private static variableConversion = {\n        \"identityProviderEntityId\": \"Identity provider Entity ID\",\n        \"authenticationRequestsUrl\": \"Single sign-on authentication request URL\",\n        \"serviceProviderEntityId\": \"Service provider issuer\",\n        \"x509Certificate\": \"x509 certificate\",\n        \"authorizationUrl\": \"Authorization URL\",\n        \"clientId\": \"Client ID\",\n        \"clientSecret\": \"Client Secret\",\n        \"issuer\": \"Issuer\",\n        \"tokenUrl\": \"Token URL\",\n        \"publicKey\": \"Public Key\",\n        \"publicKeyId\": \"Public Key Id\",\n    }\n\n    public static getPrintableString(varName :string): string {\n        // @ts-ignore\n        return this.variableConversion[varName];\n    }\n}\n","import React, {ReactElement} from 'react';\nimport {Alert} from \"@patternfly/react-core\";\nimport {IdpDisplayNames} from \"../Constants/idpDisplayNames\";\nimport {IdpCommonMessages} from \"../Constants/idp-common-messages\";\nimport {errorResponseData} from \"../CommonInterfaces/idp-response-types\";\n\nconst scrollToTop = () => {\n    document.getElementById('headerAnchor')!.scrollIntoView({behavior: 'smooth'});\n}\n\nexport const showErrorMessage = (messages: errorResponseData | undefined, setMessages: Function): void => {\n    if (messages === undefined) {\n        return;\n    }\n    const errorList: ReactElement[] = [];\n    const keysList = Object.keys(messages!);\n    keysList.forEach(key => {\n        errorList.push(<div key={key}><span className=\"bolderKey\">{IdpDisplayNames.getPrintableString(key)}:</span> {messages[key]}</div>)\n    })\n    if (keysList.length > 0) {\n        setMessages(<Alert variant=\"danger\" title={IdpCommonMessages.UPDATE_ERROR_TITLE}>{errorList}</Alert>);\n        scrollToTop();\n    }\n    else {\n        setMessages([]);\n    }\n}\n\n// the time in milliseconds that messages will be displayed on the page\nconst messageTimeout = 12000;\n\n/**\n * throws a fresh alert component into the alert block with green background to indicate success\n * @param message the text displayed in the alert\n * @param setMessages the setter function that needs to be passed from the provided context\n */\nexport const showSuccessMessage = (message: string, setMessages: Function) => {\n    setMessages(<Alert variant=\"success\" title={message} timeout={messageTimeout} onTimeout={() => { setMessages([]) }}/>);\n    scrollToTop();\n}\n","import React, {useState, useContext} from 'react';\nimport './configured-saml-idp.scss'\nimport {errorResponseData, IdpResponseData, SamlResponseData} from \"../CommonInterfaces/idp-response-types\";\nimport {\n    ActionList,\n    ActionListItem,\n    Button,\n    Form,\n    Text,\n    TextContent,\n    TextVariants,\n    Title\n} from '@patternfly/react-core';\nimport { useChrome } from \"@redhat-cloud-services/frontend-components/useChrome\";\nimport { getSSOBaseUrl } from \"../../../Utils/general-utils\";\nimport { IdpTestingModal } from \"../IdpTesting/idp-testing-modal\";\nimport { DisableIdpModal } from \"../Configured/disable-idp-modal\";\nimport { DeleteIdpModal } from './delete-idp-modal';\nimport {apiUpdateIdp} from \"../ApiClient/idp-controller\";\nimport SAMLForm from '../ProviderForms/saml-form';\nimport SamlStaticContent from \"../ProviderForms/saml-static-content\";\nimport messagesContext from \"../CommonInterfaces/messages-context\";\nimport {showSuccessMessage, showErrorMessage} from '../CommonInterfaces/messaging-functions';\nimport {IdpCommonMessages} from \"../Constants/idp-common-messages\";\n\ninterface Props {\n    samlData: SamlResponseData,\n    recomputeAppState: () => void\n}\n\nconst ConfiguredSamlIdp = ({ samlData, recomputeAppState }: Props) => {\n    const chrome = useChrome();\n    const ssoBaseUrl = getSSOBaseUrl(chrome);\n    const [isTestingModalVisible, toggleTestingModalVisibility] = useState(false);\n    const [isDisabledModalVisible, toggleIsDisabledModalVisible] = useState(false);\n    const [isDeleteModalVisible, toggleIsDeleteModalVisible] = useState(false);\n    const [isEditing, setIsEditing] = useState(false);\n    const [inputData, setInputData] = useState<SamlResponseData>(samlData);\n\n    const {setMessages} = useContext(messagesContext);\n\n    /**\n     * triggered by onChange of each of the inputs, this simply updates the current state for the inputData.\n     * @param editEvent the event value provided by the event.\n     */\n    const onEdit = (editEvent:any) => {\n        if (!isEditing) {\n            setIsEditing(true);\n        }\n        const existingInput = {...inputData};\n        // @ts-ignore\n        existingInput[editEvent.currentTarget.name] = editEvent.currentTarget.value;\n        setInputData(existingInput)\n    }\n\n\n    /**\n     * submit api request to update the existing idp configuration settings.\n     */\n    const updateIdpSettings = () => {\n        showErrorMessage([] as unknown as errorResponseData, setMessages);\n\n        // need to destructure the existing inputData\n        const {\n            providerId,\n            identityProviderEntityId,\n            authenticationRequestsUrl,\n            serviceProviderEntityId,\n            x509Certificate\n        } = inputData;\n\n        const updateData = {\n            providerId,\n            identityProviderEntityId,\n            authenticationRequestsUrl,\n            serviceProviderEntityId,\n            x509Certificate\n        }\n\n        apiUpdateIdp(chrome, updateData, (responseBody: IdpResponseData) => {\n            // show some form of toast indicating that the update was successful.\n            if (responseBody.error) {\n                showErrorMessage(responseBody.fields as unknown as errorResponseData, setMessages);\n            }\n            else {\n                showSuccessMessage(IdpCommonMessages.UPDATE_SUCCESS_MESSAGE, setMessages);\n                // after a successful update be sure to reset the editing state\n                setIsEditing(false);\n                // update the last updated messages\n                const existingInput = {...inputData};\n                existingInput.lastUpdatedDate = responseBody.lastUpdatedDate\n                existingInput.lastUpdatedBy = responseBody.lastUpdatedBy;\n                setInputData(existingInput)\n            }\n        });\n    }\n\n    /**\n     *  determines the action button that should be displayed.\n     */\n    const actionButton = () => {\n        if (samlData.enabled) {\n            return (\n                <Button variant={\"danger\"} onClick={() => toggleIsDisabledModalVisible(true)}>\n                    Disable\n                </Button>\n            )\n        }\n        if (isEditing) {\n            return (\n                <Button onClick={() => updateIdpSettings()}>\n                    Update\n                </Button>\n            )\n        }\n        return (\n            <Button onClick={() => toggleTestingModalVisibility(true)}>\n                Test and enable\n            </Button>\n        )\n    }\n\n    return (\n        <Form>\n\n            {/* Render default SAML form components */}\n            <SAMLForm baseData={samlData} editableData={inputData} editFunction={onEdit} />\n\n            {/* Statically generated content specific for configured SAML */}\n            <Title headingLevel={\"h3\"}>URLs required for identity provider configuration</Title>\n\n            <TextContent>\n                <Text component={TextVariants.p}>\n                    Use these URLs to assist in completing setup within your identity provider.\n                </Text>\n            </TextContent>\n\n            <SamlStaticContent baseUrl={ssoBaseUrl} idpAlias={samlData.idpAlias} />\n\n            <ActionList>\n                <ActionListItem>\n                    {actionButton()}\n                </ActionListItem>\n                <ActionListItem>\n                    <Button variant=\"link\" onClick={() => toggleIsDeleteModalVisible(true)} isDanger>\n                        Delete identity provider\n                    </Button>\n                </ActionListItem>\n                {isDisabledModalVisible && <DisableIdpModal idpAlias={samlData.idpAlias} isOpen={isDisabledModalVisible}\n                                                            onClose={() => toggleIsDisabledModalVisible(false)}\n                                                            recomputeAppState={recomputeAppState}/>}\n                {isTestingModalVisible && <IdpTestingModal idpAlias={samlData.idpAlias} isOpen={isTestingModalVisible}\n                                                           onClose={() => toggleTestingModalVisibility(false)}\n                                                           recomputeAppState={recomputeAppState}/>}\n                {isDeleteModalVisible && <DeleteIdpModal idpAlias={samlData.idpAlias} isOpen={isDeleteModalVisible}\n                                                         onClose={() => toggleIsDeleteModalVisible(false)}\n                                                         recomputeAppState={recomputeAppState}/>}\n            </ActionList>\n        </Form>\n    )\n}\n\nexport default ConfiguredSamlIdp;\n","import {AuditTypeFormatter} from '../../../Components/AuditInfo/audit-info';\n\nexport class SimpleText implements AuditTypeFormatter {\n    readonly BLANK_VALUE = '';\n\n    // eslint-disable-next-line class-methods-use-this\n    format(value: string): string {\n        if (value.trim().length > 0) {\n            return value;\n        }\n        return this.BLANK_VALUE;\n    }\n}\n","import React from 'react';\nimport {SimpleText} from \"../../Components/AuditInfo/formatters/simple-text\";\nimport './audit-info.scss'\n\nexport interface AuditTypeFormatter {\n    // eslint-disable-next-line no-unused-vars\n    format(value: string): string;\n}\n\ntype AuditInfoProps = {\n    preValue?: string;\n    value: string;\n    postValue?: string;\n    formatter?: AuditTypeFormatter;\n};\n\nconst AuditInfo: React.FC<AuditInfoProps> = ({ preValue, value, postValue, formatter = new SimpleText() }) => {\n    return <div className={'audit-info'}>{preValue} {formatter.format(value)} {postValue} </div>;\n};\n\nexport default AuditInfo;\n","import './configured-idp.scss';\nimport ConfiguredOidcIdp from './configured-oidc-idp';\nimport ConfiguredSamlIdp from './configured-saml-idp';\nimport React, {useState, useEffect, ReactElement} from 'react';\nimport {\n    Alert,\n    Card,\n    CardBody, Form, FormGroup, Label,\n    Spinner, Title\n} from '@patternfly/react-core';\n\nimport {IdpResponseData, OidcResponseData, SamlResponseData} from \"../CommonInterfaces/idp-response-types\";\nimport {useFlag} from \"@unleash/proxy-client-react\";\nimport CheckCircleIcon from \"@patternfly/react-icons/dist/esm/icons/check-circle-icon\";\nimport WrenchIcon from \"@patternfly/react-icons/dist/esm/icons/wrench-icon\";\nimport AuditInfo from \"../../../Components/AuditInfo/audit-info\";\n\ninterface Props {\n    responseData: IdpResponseData,\n    recomputeAppState: () => void\n}\n\nconst ConfiguredIdp = ({responseData, recomputeAppState}: Props) => {\n\n    // flag to control which values get displayed\n    const isM3Enabled = useFlag('iamconsole.IDPIntegration.m3');\n\n    const [providerType, setProviderType] = useState<ReactElement>(\n       <Spinner/>\n    )\n\n    useEffect(() => {\n        if (responseData.providerId === 'saml-improved') {\n            setProviderType(<ConfiguredSamlIdp samlData={responseData as SamlResponseData} recomputeAppState={recomputeAppState}/>);\n        }\n        else if (responseData.providerId === 'oidc-improved') {\n            setProviderType(<ConfiguredOidcIdp oidcData={responseData as OidcResponseData} milestoneThreeEnabled={isM3Enabled} recomputeAppState={recomputeAppState}/>);\n        }\n    }, [responseData]);\n\n    return (\n        <React.Fragment>\n            <Card isCompact={false} isLarge={true}>\n                <CardBody>\n                    <Form>\n                        { !isM3Enabled && responseData.providerId === 'oidc-improved' &&\n                            <Alert variant=\"info\" isInline title=\"This page currently shows a read-only version of your configuration.\">\n                                <p>Forthcoming enhancements will provide the ability to edit.</p>\n                            </Alert>\n                        }\n\n                        <Title headingLevel={\"h1\"} className=\"pf-v5-u-display-flex\">\n                            {responseData.displayName}\n                            {responseData.enabled\n                                ? <Label color=\"green\" icon={<CheckCircleIcon />} className=\"pf-v5-u-ml-md\">\n                                    Enabled\n                                </Label>\n                                : <Label color=\"grey\" icon={<WrenchIcon />} className=\"pf-v5-u-ml-md\">\n                                    Disabled\n                                </Label>\n                            }\n                        </Title>\n\n                        { (responseData.createdDate || responseData.lastUpdatedDate) && (\n                            <FormGroup fieldId=\"audit-data\">\n                                { responseData.createdDate && (\n                                    <AuditInfo preValue={'Created on'} value={new Date(responseData.createdDate).toLocaleDateString()}/>\n                                )}\n                                { responseData.lastUpdatedDate && (\n                                    <AuditInfo preValue={'Last updated on'} value={new Date(responseData.lastUpdatedDate).toLocaleTimeString()} postValue={'by ' + responseData.lastUpdatedBy}/>\n                                )}\n                            </FormGroup>\n                        )}\n\n                        { responseData.enabled && responseData.providerId === \"saml-improved\" &&\n                            <Alert variant=\"info\" isInline title=\"Disable your configuration to edit fields.\" />\n                        }\n                        {providerType}\n                    </Form>\n                </CardBody>\n            </Card>\n        </React.Fragment>\n    )\n}\n\nexport default ConfiguredIdp;\n","import {Button, ClipboardCopy, FormGroup, Popover} from \"@patternfly/react-core\";\nimport styles from \"@patternfly/react-styles/css/components/Form/form\";\nimport HelpIcon from \"@patternfly/react-icons/dist/esm/icons/help-icon\";\nimport React from \"react\";\n\ninterface Props {\n    baseUrl: string;\n    idpAlias: string;\n}\n\nconst OidcStaticContent = ({baseUrl, idpAlias}: Props) => {\n\n    return (\n        <div>\n            <FormGroup\n                label=\"Service provider metadata URL\"\n                fieldId=\"service-provider-metadata-url\"\n                labelIcon={\n                    <Popover\n                        triggerAction=\"hover\"\n                        bodyContent={\n                            <div>\n                                Service provider metadata used to integrate Red Hat with your identity provider.\n                            </div>\n                        }>\n                        <Button\n                            variant=\"plain\"\n                            type=\"button\"\n                            onClick={(e) => e.preventDefault()}\n                            className={`customPopover ${styles.formGroupLabelHelp}`}>\n                            <HelpIcon />\n                        </Button>\n                    </Popover>\n                }>\n                <ClipboardCopy\n                    type=\"text\"\n                    id=\"service-provider-metadata-url\"\n                    name=\"service-provider-metadata-url\"\n                    isReadOnly>\n                    {`${baseUrl}broker/${idpAlias}/endpoint/descriptor`}\n                </ClipboardCopy>\n            </FormGroup>\n\n            <FormGroup\n                label=\"Redirect URL / Assertion Consumption Service (ACS) URL\"\n                fieldId=\"redirect-url\"\n                labelIcon={\n                    <Popover\n                        triggerAction=\"hover\"\n                        bodyContent={\n                            <div>\n                                The redirect URL to use when configuring your identity provider. This is where your identity provider will redirect users to authenticate to Red Hat.\n                            </div>\n                        }>\n                        <Button\n                            variant=\"plain\"\n                            type=\"button\"\n                            onClick={(e) => e.preventDefault()}\n                            className={`customPopover ${styles.formGroupLabelHelp}`}>\n                            <HelpIcon />\n                        </Button>\n                    </Popover>\n                }>\n                <ClipboardCopy\n                    type=\"text\"\n                    id=\"redirect-url\"\n                    name=\"redirect-url\"\n                    isReadOnly>\n                    {`${baseUrl}broker/${idpAlias}/endpoint`}\n                </ClipboardCopy>\n            </FormGroup>\n        </div>\n    )\n}\n\nexport default OidcStaticContent;\n","\nimport React, {useState, useContext} from 'react';\nimport OIDCForm from '../ProviderForms/oidc-form';\nimport {\n    ActionList,\n    ActionListItem,\n    Button,\n    Card,\n    CardBody,\n    Form,\n    Text,\n    TextContent,\n    TextVariants,\n    Title\n} from \"@patternfly/react-core\";\nimport {OidcRequestData} from \"../CommonInterfaces/idp-request-types\";\nimport OidcStaticContent from \"../ProviderForms/oidc-static-content\";\nimport {apiCreateIdp} from \"../ApiClient/idp-controller\";\nimport {showErrorMessage} from \"../CommonInterfaces/messaging-functions\";\nimport messagesContext from \"../CommonInterfaces/messages-context\";\nimport {errorResponseData, IdpResponseData} from \"../CommonInterfaces/idp-response-types\";\n\ninterface Props {\n    chromeRef: any\n}\n\nconst CreateOidcIdp = ({chromeRef}: Props) => {\n\n    const [inputData, setInputData] = useState<OidcRequestData>(\n        {\n            providerId: \"\",\n            clientId: \"\",\n            clientSecret: \"\",\n            authorizationUrl: \"\",\n            tokenUrl: \"\",\n            issuer: \"\",\n            publicKey: \"\",\n            publicKeyId: \"\"\n        }\n    );\n    const {setMessages} = useContext(messagesContext);\n\n    const createIDPCall = () => {\n        const cleanRequest = {...inputData};\n        cleanRequest.providerId = \"oidc-improved\";\n        apiCreateIdp(chromeRef, cleanRequest, (responseBody: IdpResponseData) => {\n            if (responseBody.error) {\n                showErrorMessage(responseBody.fields as unknown as errorResponseData, setMessages);\n            }\n            else {\n                location.reload();\n            }\n        })\n    }\n\n    /**\n     * Called when a field gets edited. We needed a function that cloned the existing inputData, made the changes,\n     * and then applied them\n     * @param editEvent The event triggered when updating text within the form\n     */\n    const editInputFields = (editEvent: any) => {\n        const existingInput = {...inputData};\n        // @ts-ignore\n        existingInput[editEvent.currentTarget.name] = editEvent.currentTarget.value;\n        setInputData(existingInput);\n    }\n\n    return (\n        <Card>\n            <CardBody>\n                <Form>\n                    <Title headingLevel={\"h1\"}>OIDC Creation Form</Title>\n                    <OIDCForm editableData={inputData} editFunction={editInputFields} isCreation={true} />\n\n                    {/* Statically generated content specific for configured SAML */}\n                    <Title headingLevel={\"h3\"}>URLs required for identity provider configuration</Title>\n\n                    <TextContent>\n                        <Text component={TextVariants.p}>\n                            Use these URLs to assist in completing setup within your identity provider.\n                        </Text>\n                    </TextContent>\n\n                    <OidcStaticContent baseUrl={\"something\"} idpAlias={\"somethingElse\"}/>\n\n                    <ActionList>\n                        <ActionListItem>\n                            <Button variant=\"primary\" onClick={createIDPCall}>\n                                Create OIDC IDP\n                            </Button>\n                        </ActionListItem>\n                    </ActionList>\n                </Form>\n            </CardBody>\n        </Card>\n    )\n}\nexport default CreateOidcIdp;\n","\nimport React, {useState, useContext} from 'react';\nimport SAMLForm from '../ProviderForms/saml-form';\nimport {\n    ActionList,\n    ActionListItem,\n    Button,\n    Card,\n    CardBody, CardTitle,\n    Form,\n    Text,\n    TextContent, TextVariants,\n    Title\n} from \"@patternfly/react-core\";\nimport {SamlRequestData} from \"../CommonInterfaces/idp-request-types\";\nimport OidcStaticContent from \"../ProviderForms/oidc-static-content\";\nimport {apiCreateIdp} from \"../ApiClient/idp-controller\";\nimport { showErrorMessage } from '../CommonInterfaces/messaging-functions';\nimport messagesContext from \"../CommonInterfaces/messages-context\";\nimport {errorResponseData, IdpResponseData} from \"../CommonInterfaces/idp-response-types\";\n\ninterface Props {\n    chromeRef: any\n}\n\nconst CreateOidcIdp = ({chromeRef}: Props) => {\n    const [inputData, setInputData] = useState<SamlRequestData>(\n        {\n            identityProviderEntityId: \"\",\n            authenticationRequestsUrl: \"\",\n            serviceProviderEntityId: \"\",\n            x509Certificate: \"\",\n            providerId: \"\"\n        }\n    );\n    const {setMessages} = useContext(messagesContext);\n\n    /**\n     * Triggered by the create button at the bottom of the screen, this function makes the call to the Create api\n     * endpoint.\n     */\n    const createIDPCall = () => {\n        const cleanRequest = {...inputData};\n        cleanRequest.providerId = \"saml-improved\";\n        cleanRequest.x509Certificate = inputData.x509Certificate.replace(/[\\s\\n\\r]/gu, '');\n        apiCreateIdp(chromeRef, cleanRequest, (responseBody: IdpResponseData) => {\n            if (responseBody.error) {\n                showErrorMessage(responseBody.fields as unknown as errorResponseData, setMessages);\n            }\n            else {\n                location.reload();\n            }\n        })\n    }\n\n    /**\n     * Called when a field gets edited. We needed a function that cloned the existing inputData, made the changes,\n     * and then applied them\n     * @param editEvent The event triggered when updating text within the form\n     */\n    const editInputFields = (editEvent:any) => {\n        const existingInput = {...inputData}\n        // @ts-ignore\n        existingInput[editEvent.currentTarget.name] = editEvent.currentTarget.value;\n        setInputData(existingInput);\n    }\n\n    return (\n        <CardBody>\n            <Form>\n                <Title headingLevel={\"h1\"}>SAML Creation form</Title>\n                <SAMLForm editableData={inputData} editFunction={editInputFields}/>\n\n                {/* Statically generated content specific for configured SAML */}\n                <Title headingLevel={\"h3\"}>URLs required for identity provider configuration</Title>\n\n                <TextContent>\n                    <Text component={TextVariants.p}>\n                        Use these URLs to assist in completing setup within your identity provider.\n                    </Text>\n                </TextContent>\n\n                <OidcStaticContent baseUrl={\"Something\"} idpAlias={\"somethingElse\"}/>\n\n                <ActionList>\n                    <ActionListItem>\n                        <Button variant=\"primary\" onClick={createIDPCall}>\n                            Create SAML IDP\n                        </Button>\n                    </ActionListItem>\n                </ActionList>\n            </Form>\n        </CardBody>\n    )\n}\nexport default CreateOidcIdp;\n","import React from 'react';\nimport {\n    Card,\n    CardBody,\n    CardHeader,\n    Gallery,\n    Title,\n    CardTitle,\n    Text, Label\n} from \"@patternfly/react-core\";\nimport {FlowStep} from '../Constants/flow-step';\n\ninterface Props {\n    configTypeChosen: Function\n}\n\nconst ChooseIdpType = ({configTypeChosen}: Props) => {\n\n    const [isChecked, setIsChecked] = React.useState('');\n    const samlId = 'saml-card-input';\n    const oidcId = 'oidc-card-input';\n\n    const onChange = (event: React.FormEvent<HTMLInputElement>) => {\n        if (event.currentTarget.id === samlId) {\n            configTypeChosen(FlowStep.SAML_CONFIG);\n        } else {\n            configTypeChosen(FlowStep.OIDC_CONFIG);\n        }\n\n        setIsChecked(event.currentTarget.id);\n    }\n\n    return (\n\n        <CardBody>\n            <Title headingLevel=\"h1\" size=\"2xl\">Set up an identity provider</Title>\n            <Text className=\"pf-v5-u-mt-lg pf-v5-u-text-color-required\">All fields are required.</Text>\n            <Title headingLevel=\"h2\" size=\"lg\" className=\"pf-v5-u-mt-lg\">Choose an identity provider protocol</Title>\n            <br/>\n            <Gallery hasGutter minWidths={{\n                default: '49%'\n            }}>\n                    <Card id=\"saml-card\" isSelectable isClickable isClicked={isChecked === samlId} isSelected={isChecked === samlId}>\n                        <CardHeader className=\"pf-v5-u-pt-sm\"\n                            selectableActions={{\n                                selectableActionId: samlId,\n                                selectableActionAriaLabelledby: 'saml-card',\n                                name: 'selected-card',\n                                variant: 'single',\n                                onChange,\n                                hasNoOffset: true\n                            }}>\n                            <CardTitle className=\"pf-v5-u-mt-sm\">SAML 2.0   <Label color=\"green\" className=\"pf-v5-u-ml-md\">Suggested</Label></CardTitle>\n                        </CardHeader>\n                        <CardBody>\n                            <p>SAML is often used with legacy systems due to its mature specifications and extensive support for complex identity federation scenarios.</p>\n                        </CardBody>\n                    </Card>\n                 <Card id=\"oidc-card\" isSelectable isClickable isClicked={isChecked === oidcId} isSelected={isChecked === oidcId}>\n                        <CardHeader className=\"pf-v5-u-pt-sm\"\n                            selectableActions={{\n                                selectableActionId: oidcId,\n                                selectableActionAriaLabelledby: 'oidc-card',\n                                name: 'selected-card',\n                                variant: 'single',\n                                onChange,\n                                hasNoOffset: true\n                            }}>\n                            <CardTitle className=\"pf-v5-u-mt-sm\">OpenID Connect</CardTitle>\n                        </CardHeader>\n                        <CardBody>\n                            <p>OIDC is a modern, lightweight and flexible standard that simplifies configuration enabling easier use across diverse platforms.</p>\n                        </CardBody>\n                    </Card>\n            </Gallery>\n        </CardBody>\n    )\n}\n\nChooseIdpType.propTypes = {\n    configTypeChosen: Function\n}\n\n\nexport default ChooseIdpType;\n","import './idp-selector.scss'\nimport React, {useState, useEffect} from 'react';\nimport {IdpResponseData, IdpResponseDataInitialState} from \"../CommonInterfaces/idp-response-types\";\nimport { useFlag } from '@unleash/proxy-client-react';\nimport IdpNotSetup from \"../IdpNotSetup/idp-not-setup\";\nimport PropTypes from \"prop-types\";\nimport {useChrome} from \"@redhat-cloud-services/frontend-components/useChrome\";\nimport {apiGetIdp} from '../ApiClient/idp-controller';\nimport {FlowStep} from '../Constants/flow-step';\nimport FlowTemplate from '../IdpFlowTemplate/flow-template';\nimport ConfiguredIdp from '../Configured/configured-idp';\nimport CreateOidcIdp from \"../Creation/create-oidc-idp\";\nimport CreateSamlIdp from \"../Creation/create-saml-idp\";\nimport {PageHeader, PageHeaderTitle} from \"@redhat-cloud-services/frontend-components/PageHeader\";\nimport {AlertGroup, Button, Card, PageSection, Text, TextContent, TextVariants} from \"@patternfly/react-core\";\nimport ExternalLinkSquareAltIcon from \"@patternfly/react-icons/dist/esm/icons/external-link-alt-icon\";\nimport messagesContext from \"../CommonInterfaces/messages-context\";\nimport DisabledPage from \"../../../Components/DisabledPage/disabled-page\";\nimport ChooseIdpType from \"../IdpNotSetup/choose-idp-type\";\n\ninterface Props {\n    accessToken: string\n}\n\nconst IdpSelector = ({accessToken}: Props) => {\n    const chrome = useChrome();\n\n    // has the admin's account been configured with an idp. If so display the management screen.\n    const [isConfigured, setIsConfigured] = useState(false);\n    const [isAllowedToConfigure, setIsAllowedToConfigure] = useState(false);\n    const [isLoading, setIsLoading] = useState(true);\n    const [isInit, setIsInit] = useState(true);\n    const [idpData, setIdpData] = useState(IdpResponseDataInitialState);\n    const [configFlow, setConfigFlow] = useState(\"\");\n    const [messages, setMessages] = useState([]);\n\n    const isM3Enabled = useFlag('iamconsole.IDPIntegration.m3');\n    const docsLink = \"https://docs.redhat.com/en/documentation/red_hat_customer_portal/1/html/configuring_identity_provider_integration/index\";\n\n    const recomputeAppState = () => {\n        apiGetIdp(chrome)\n        .then(response => {\n            if (response.status === 204) {\n                return {status: ''};\n            }\n            return response.json()\n        })\n        .then((data: IdpResponseData) => {\n            if (data.providerId === 'oidc-improved' || data.providerId === 'saml-improved') {\n                setIdpData(data);\n                setIsLoading(false);\n                setIsConfigured(true);\n            } else if (data.error) {\n                setIsLoading(false);\n                setIsConfigured(false);\n                setIsAllowedToConfigure(false);\n            } else {\n                setIsLoading(false);\n                setIsConfigured(false);\n                setIsAllowedToConfigure(true);\n            }\n        })\n        .catch(error => {\n            console.error('Error: ', error);\n            setIsLoading(false);\n        })\n    }\n\n    useEffect(() => {\n        recomputeAppState();\n    }, [])\n\n    /**\n     * handles the correct configuration path to display. called directly in the jsx\n     * and relies on the configFlow state\n     *\n     * Will need to update this method once the new card page is in place\n     */\n    const configPathChosen = () => {\n        if (configFlow === FlowStep.SAML_CONFIG) {\n            return <CreateSamlIdp chromeRef={chrome}/>\n        } else if (configFlow === FlowStep.OIDC_CONFIG) {\n            // return OIDC page\n            return <CreateOidcIdp chromeRef={chrome}/>\n        }\n\n        return <div className=\"hiddenPage\"></div>;\n    }\n\n    const configPathChosenInit = () => {\n        if (isM3Enabled) {\n            return (\n                <Card>\n                    <ChooseIdpType configTypeChosen={setConfigFlow}/>\n                    <br/>\n                    { configPathChosen() }\n                </Card>\n            )\n        }\n        return <FlowTemplate accessToken={accessToken}/>\n\n    }\n\n    return (\n        <React.Fragment>\n            <span id=\"headerAnchor\"></span>\n            <PageHeader className=\"wizardHeader\">\n                <PageHeaderTitle title=\"Identity Provider Integration\" className=\"pf-v5-u-mb-lg\"/>\n                <TextContent>\n                    Manage identity provider integration for your organization.{' '}\n                    <Text component={TextVariants.a}\n                          className={(isAllowedToConfigure || isConfigured) ? '' : \"hiddenPage\"}>\n                        <Button variant=\"link\" href={docsLink} target=\"_blank\" component=\"a\" isInline\n                                icon={<ExternalLinkSquareAltIcon/>} iconPosition=\"right\" className=\"pf-v5-u-ml-xs\">\n                            Learn more about identity provider integration\n                        </Button>\n                    </Text>\n                </TextContent>\n            </PageHeader>\n            <messagesContext.Provider value={{messages, setMessages}}>\n                <AlertGroup id=\"userNotification\" isLiveRegion className=\"alertList\">\n                    {messages}\n                </AlertGroup>\n            </messagesContext.Provider>\n\n            <PageSection>\n                <div className={!isLoading && isConfigured ? '' : 'hiddenPage'}>\n                    <ConfiguredIdp responseData={idpData} recomputeAppState={recomputeAppState}/>\n                </div>\n                <div>\n                    <div\n                        className={(!isLoading && !isConfigured && isInit && isAllowedToConfigure) ? 'initPage' : 'hiddenPage'}>\n                        <IdpNotSetup startIdpSetup={() => {\n                            setIsInit(false);\n                        }}/>\n                    </div>\n                    <div\n                        className={(!isLoading && !isConfigured && !isInit && isAllowedToConfigure) ? 'Page' : 'hiddenPage'}>\n                        {configPathChosenInit()}\n                    </div>\n                    <div\n                        className={(!isLoading && !isConfigured && isInit && !isAllowedToConfigure) ? 'Page' : 'hiddenPage'}>\n                        <DisabledPage></DisabledPage>\n                    </div>\n                </div>\n            </PageSection>\n        </React.Fragment>\n    );\n}\n\n\nIdpSelector.propTypes = {\n    accessToken: PropTypes.string\n}\n\nexport default IdpSelector;\n","import './identity-provider-integration.scss';\nimport React, { useState, useEffect } from 'react';\nimport DisabledPage from \"../../Components/DisabledPage/disabled-page\";\nimport {isAdminUser} from '../../Utils/general-utils';\nimport {useFlag} from \"@unleash/proxy-client-react\";\nimport {useChrome} from '@redhat-cloud-services/frontend-components/useChrome';\nimport NonAdminIDP from \"../../Components/NonAdminUser/non-admin-idp\";\nimport IdpSelector from \"../../Apps/IdpSelfService/IDPSelector/Idp-Selector\";\n\n\nconst IdentityProviderIntegration = () => {\n    const chrome = useChrome();\n    let userToken = null;\n    const [currentUser, updateUser] = useState({\n        adminUser: false,\n        selfServiceIDP: <DisabledPage/>\n    })\n    const isSelfServiceIDPEnabled = useFlag('iamconsole.IDPIntegration.enabled');\n\n    useEffect(() => {\n        // eslint-disable-next-line no-undef\n        chrome?.appAction?.('identity-provider-integration');\n        // eslint-disable-next-line no-undef\n        chrome.auth.getToken().then(token => {\n            userToken = token;\n            if (!isAdminUser(userToken!)) {\n                updateUser({\n                    adminUser: false,\n                    selfServiceIDP: <NonAdminIDP/>\n                })\n                return;\n            }\n            // if the user is in fact and admin user then render TwoFactorCheckOld\n            if (isAdminUser(userToken!) && isSelfServiceIDPEnabled) {\n                updateUser({\n                    adminUser: true,\n                    selfServiceIDP: <IdpSelector accessToken={userToken!} />\n                })\n            }\n        })\n    }, []);\n\n    return (\n        <React.Fragment>\n            {currentUser.selfServiceIDP}\n        </React.Fragment>\n    )\n}\n\nexport default IdentityProviderIntegration\n","import {ValidationTemplate} from \"../Apps/IdpSelfService/CommonInterfaces/oidc-validation\";\nimport {UserChoices} from \"../Apps/IdpSelfService/CommonInterfaces/user-choices\";\nimport forge from 'node-forge';\n\nfunction parseToken (token :string) {\n    // eslint-disable-next-line no-magic-numbers\n    const base64Url = token.split('.')[1];\n    // eslint-disable-next-line require-unicode-regexp\n    const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');\n    const jsonPayload = JSON.parse(decodeURIComponent(window.atob(base64).split('')\n        .map(\n            (c) => {\n                // eslint-disable-next-line no-magic-numbers\n                return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);\n            }\n        )\n        .join('')));\n    return jsonPayload;\n}\n\nexport function isAdminUser (token :string) {\n    return parseToken(token).is_org_admin;\n}\n\n\nexport function getOrgId (token :string) {\n    return parseToken(token).org_id;\n}\n\ninterface Updatable{\n    [key:string]: string\n}\n\n/**\n *\n * @param {*} value\n * @param {*} key\n * @param {*} stateObject\n * @param {*} updateFunction\n */\n// eslint-disable-next-line max-params\nexport function setStateValue (value :string, key :string, stateObject:Object|undefined, updateFunction :Function) {\n\n    const updatedValue :Updatable = {};\n    updatedValue[key] = value;\n    const updated = {\n        ...stateObject,\n        ...updatedValue\n    }\n\n    updateFunction(updated);\n}\n\ninterface VerificationResult {\n    status: string;\n    message: string;\n}\n\nconst isBase64 = (str: string): boolean => {\n    if (!(/^[A-Za-z0-9+/]*={0,2}$/u).test(str) || str.length % 4 !== 0) {\n        return false;\n    }\n\n    try {\n        const decoded = forge.util.decode64(str);\n        const reEncoded = forge.util.encode64(decoded);\n        return reEncoded === str;\n    } catch {\n        return false;\n    }\n};\n\n/**\n *\n * @param {String} input value to be checked based on the provided type\n * @param {String} type effectively and enum used to specify the type of check we need to run\n * @param {boolean} required is this a required field\n * @returns String message to be relayed to the user pertaining to the invalid input\n * // success, warning, error, or default\n */\nexport function verifyInput (input:string, type:string, required:boolean) :VerificationResult {\n    const INVALID_CERT_MESSAGE = 'This is invalid, please check for uncommonly used characters. Be sure to exclude the start and end block';\n    const INVALID_ENTITYID_MESSAGE = 'This is invalid. This field is intended to consist of only alphanumeric characters and valid URL\\'s'\n    const EXPIRED_CERT_MESSAGE = 'Certificate is expired';\n    const INVALID_TEXT_MESSAGE = 'This text is invalid please check for uncommonly used characters or spaces';\n    const INVALID_URL_MESSAGE = 'This field needs to be a valid URL';\n\n    if (required && !input) {\n        return {\n            status: 'error',\n            message: type === 'RADIO' ? 'A selection must be made' : 'This field can not be left empty'\n        }\n    }\n\n    let verified: VerificationResult;\n    let results: boolean;\n\n    switch (type) {\n        case 'GENERAL':\n            results = !(/[^A-Za-z0-9]/u).test(input);\n            verified = {\n                status: results ? 'default' : 'error',\n                message: results ? '' : INVALID_TEXT_MESSAGE\n            }\n            break;\n        case 'ENTITYID':\n            results = (/^[a-z0-9._:/?#@!&()*+,;=-]+$/iu).test(input);\n            verified = {\n                status: results ? 'default' : 'error',\n                message: results ? '' : INVALID_ENTITYID_MESSAGE\n            }\n            break;\n        case 'DOMAIN':\n            // eslint-disable-next-line\n            results = (/^https:\\/\\/([a-zA-Z0-9-]+(\\.[a-zA-Z0-9-]+)+)(:\\d{1,5})?(\\/\\S*)?$|^http:\\/\\/localhost(:\\d{1,5})?(\\/\\S*)?$/gu).test(input)\n            verified = {\n                status: results ? 'default' : 'error',\n                message: results ? '' : INVALID_URL_MESSAGE\n            }\n            break;\n        case 'x509':\n            try {\n                // strip out white spaces and line breaks\n                const sanitizedCertChainArray = input.replace(/[\\s\\n\\r]/gu, '').split(',');\n\n                // check if all cert chain is properly encoded in base64\n                for (const cert of sanitizedCertChainArray) {\n                    if (!isBase64(cert.trim())) {\n                        return {\n                            status: 'error',\n                            message: INVALID_CERT_MESSAGE\n                        };\n                    }\n                }\n\n                // check cert expiration (verify only the first cert in the chain)\n                const now = new Date();\n                const firstCertInTheChain = sanitizedCertChainArray[0].trim();\n                const certWithHeaders = `-----BEGIN CERTIFICATE-----\\n${firstCertInTheChain.match(/.{1,64}/gu)?.join('\\n')}\\n-----END CERTIFICATE-----`\n                const cert = forge.pki.certificateFromPem(certWithHeaders);\n\n                if (now < cert.validity.notBefore || now > cert.validity.notAfter) {\n                    return {\n                        status: 'error',\n                        message: EXPIRED_CERT_MESSAGE\n                    }\n                }\n\n                verified = {\n                    status: 'default',\n                    message: '',\n                }\n            } catch (e) {\n                return {\n                    status: 'error',\n                    message: INVALID_CERT_MESSAGE\n                }\n            }\n            break;\n        default:\n            verified = {\n                status: 'default',\n                message: ''\n            }\n    }\n\n    return verified;\n}\n\n/**\n * \n * @param {Object} choices state object containing all of the users input data\n * @param {Object} validations validations object pre-set to govern what the inputs are intended to be\n * @param {function} setValidations function used to update active validations.\n * @param {String} currentState variable being changed\n * @return {boolean} represents the current pass fail state for the provided validation set\n */\n// eslint-disable-next-line\nexport function isFailureTriggered (choices :UserChoices, currentState :string, validations: ValidationTemplate, setValidations: Function) {\n    let failureTriggered = false;\n    const update: ValidationTemplate = {};\n    Object.keys(validations).forEach(validationKey => {\n        update[validationKey] = {};\n        if (validationKey === currentState) {\n            Object.keys(validations[currentState]).forEach(field => {\n\n                const submittedValue = choices && choices.selections[field];\n                // @ts-ignorer\n                const submittedType = validations[validationKey][field].inputType;\n\n                // @ts-ignore\n                const verificationObject: VerificationResult = verifyInput(submittedValue, submittedType, true);\n\n                if (verificationObject.status !== 'default') {\n                    failureTriggered = true;\n                }\n\n                // @ts-ignore\n                update[validationKey][field] = {\n                    inputType: submittedType,\n                    variant: verificationObject.status,\n                    message: verificationObject.message\n                }\n            });\n        }\n    });\n\n    setValidations(update);\n    return failureTriggered;\n}\n\nexport const getSSOBaseUrl = (chromeApi: any) => {\n    if (chromeApi.getEnvironment() === 'prod') {\n        return \"https://sso.redhat.com/auth/realms/redhat-external/\";\n    }\n    return \"https://sso.stage.redhat.com/auth/realms/redhat-external/\";\n}\n\nexport const getSSOApiUrl = (chromeApi: any, apiPath: string) => {\n    return getSSOBaseUrl(chromeApi) + apiPath;\n}\n\nexport const setupBackTriggerNotification = () => {\n    window.addEventListener(\"popstate\", () => {\n        // eslint-disable-next-line no-alert\n        alert(\"Please note that use of the back arrow on this page will cause you to lose your currently configured data\");\n    })\n}\n"],"names":["className","headingLevel","size","Title","Text","Button","variant","href","target","component","isInline","onClick","window","location","IdpResponseDataInitialState","idpAlias","displayName","enabled","providerId","createdDate","lastUpdatedDate","lastUpdatedBy","IdpNotSetup","startIdpSetup","Icon","I","status","propTypes","configChosen","getSSOIdpApiUrl","chromeApi","specifier","async","apiGetIdp","token","auth","getToken","response","fetch","method","referrerPolicy","headers","ok","Error","statusText","error","console","apiCreateIdp","createIdp","callback","body","JSON","stringify","then","res","json","errorString","error_description","apiUpdateIdp","updateIdp","apiToggleIdPStatus","apiStatusUrl","FlowStep","static","ValidationContext","createContext","validations","CUSTOMER_INFORMATION","OIDC_CONFIG","SAML_CONFIG","IMPORT_FROM_FILE","IMPORT_FROM_URL","IMPORT_SAML_FROM_FILE","IMPORT_SAML_FROM_URL","IMPORT_SAML_MANUALLY","setValidations","useValidationContext","context","useContext","CustomerInformation","rootUserChoices","updateStatus","useEffect","updated","inputType","message","Form","FormGroup","onChange","value","selections","name","protocol","handleInputSelection","handleChange","role","fieldId","label","id","Tooltip","content","position","Radio","isDisabled","resetNextClicked","OidcConfiguration","setSelections","useState","handleSelection","inputMethod","parseVariantValue","TextInput","_event","type","HelperText","HelperTextItem","clientId","clientSecret","SamlConfiguration","ImportFromFile","fileData","setFileData","isRequired","FileUpload","toString","onDataChange","data","err","result","configFileData","update","browseButtonText","rootValidation","ImportFromUrl","current","currentTarget","formatMessage","args","formattedMessage","replace","match","arg","shift","String","index","parseInt","undefined","SamlMetadataConstants","IDENTITY_PROVIDER_ENTITY_ID","AUTH_REQUEST_URL","X509_CERTIFICATE","SERVICE_PROVIDER_ISSUER","SamlMetadataMessages","SUCCESS_MSG","SamlMetadataFile","forwardRef","maxKBSize","ref","allowedFileTypes","file","setFile","setValue","filename","setFilename","errorMessage","setErrorMessage","successMessage","setSuccessMessage","isFileSizeRejected","setIsFileSizeRejected","isExpanded","setIsExpanded","isSafe","setIsSafe","clear","useImperativeHandle","getFile","filenamePlaceholder","onFileInputChange","_","reader","FileReader","onerror","FILE_READ_ERROR","onload","event","xmlString","includes","length","test","containsPotentialThreats","INVALID_FILE_TYPE","isFileSizeInvalid","xml","parsedXml","XMLParser","ignoreAttributes","allowBooleanAttributes","attributeNamePrefix","parseAttributeValue","ignorePiTags","parse","keyDescriptors","EntityDescriptor","IDPSSODescriptor","KeyDescriptor","services","SingleSignOnService","idpEntityID","entityDescriptor","extractIdpEntityID","Array","isArray","httpPostService","find","service","BINDING","HTTP_POST_BINDING","httpRedirectService","HTTP_REDIRECT_BINDING","LOCATION","extractLocation","certificates","Set","keyDescriptor","x509Data","KEY_INFO","X509_DATA","dsX509Data","DS_KEY_INFO","DS_X509_DATA","certificatesArray","DS_X509_CERTIFICATE","certificate","add","extractX509Certificate","validationMessaging","INVALID_OR_MISSING_IDPENTITYID","INVALID_OR_MISSING_AUTH_REQUEST_URL","INVALID_OR_MISSING_CERTIFICATE","now","Date","certWithHeaders","values","next","join","cert","certificateFromPem","validity","notBefore","notAfter","CERTIFICATE_EXPIRED","e","isValid","from","xmlFileWithRestrictions","FINAL_STEP","FILE_SUCCESSFULLY_LOADED","toFixed","parseError","FILE_PARSING_ERROR","MALICIOUS_FILE_DETECTED","readAsText","onReadStarted","_fileHandle","onReadFinished","onClearClick","dropzoneProps","accept","maxSize","onDropRejected","validated","hideDefaultPreview","FormHelperText","FILE_TOO_LARGE","SAML_XML_REQUIREMENTS","ExpandableSection","toggleText","onToggle","SamlHelperTextMessages","ImportSamlFromFile","samlMetadataFile","setSamlMetadataFile","updateValidations","labelIcon","Popover","triggerAction","bodyContent","preventDefault","formGroupLabelHelp","serviceProviderIssuer","primeNextStep","AUTHENTICATION_REQUEST_URL","identityProviderEntityId","authenticationRequestsUrl","NO_SPECIAL_CHARS","TextArea","resizeOrientation","x509Certificate","trim","split","map","msg","dangerouslySetInnerHTML","__html","accessToken","orgId","setOrgId","chrome","useChrome","getConfigURL","path","ClipboardCopy","isReadOnly","clickTip","userChoices","setPreviousTriggered","currentState","goToNextStep","goToPrevStep","WizardFooter","W","SubmitFooter","userChoiceData","previous","isLoading","setIsLoading","alerts","setAlerts","serviceProviderEntityId","responseBody","fields","Alert","isPlain","title","timeout","onTimeout","AlertGroup","isLiveRegion","checkState","setCheckState","Stack","hasGutter","StackItem","Checkbox","isChecked","reload","FlowTemplate","useRef","isConfigured","setIsConfigured","isAllowedToConfigure","setIsAllowedToConfigure","isInit","setIsInit","idpData","setIdpData","catch","flowState","setFlowState","previousState","displayed","setDisplayed","hideOIDC","hideSAML","hideImportFromURL","hideImportFromFile","hideImportManually","hideFinish","triggerNextStep","nextStep","newDisplay","pruneChoices","validChoices","choicesKeys","Object","keys","i","setBackTriggered","prevStep","triggerBackStep","PageSection","Provider","Wizard","onClose","isProgressive","WizardStep","footer","isHidden","OidcHelperTextMessages","baseData","editFunction","editableData","isCreation","issuer","ISSUER","CLIENT_ID","CLIENT_SECRET","authorizationUrl","AUTHORIZATION_URL","tokenUrl","TOKEN_URL","publicKeyId","PUBLIC_KEY_ID","publicKey","PUBLIC_KEY","DisableIdpModal","isOpen","recomputeAppState","Modal","titleIconVariant","small","ModalBody","ModalFooter","disableIdp","IdpTestingModal","ssoBaseUrl","primaryModalAction","setPrimaryModalAction","testBtnEnabled","setTestBtnEnabled","idpTestingModalIcon","setIdpTestingModalIcon","idpTestingModalTitle","setIdpTestingModalTitle","idpTestingModalBody","setIdpTestingModalBody","idpTestingModalErrorBody","setIdpTestingModalErrorBody","resetTestingModal","dismissTestingModal","enableIdP","medium","actions","key","addEventListener","origin","success","Link","to","errorMsg","processEventData","open","idpAliasJson","idpAliasJsonString","encodeURIComponent","getTestUrl","TextContent","hidden","DeleteIdpModal","deleteIdpUrl","apiDeleteIdp","deleteIdp","IdpDisplayNames","getPrintableString","varName","this","variableConversion","IdpCommonMessages","oidcData","milestoneThreeEnabled","isTestingModalVisible","toggleTestingModalVisibility","isDisabledModalVisible","toggleIsDisabledModalVisible","isDeleteModalVisible","toggleIsDeleteModalVisible","isEditing","setIsEditing","inputData","setInputData","scrollToTop","document","getElementById","scrollIntoView","behavior","messages","errorList","keysList","forEach","push","UPDATE_ERROR_TITLE","editEvent","existingInput","p","ActionList","ActionListItem","errorFields","fromEntries","UPDATE_SUCCESS_MESSAGE","prevData","updateIdpSettings","headerContent","footerContent","isDanger","ENTITY_ID","baseUrl","setMessages","showErrorMessage","samlData","showSuccessMessage","SimpleText","BLANK_VALUE","format","preValue","postValue","formatter","responseData","isM3Enabled","useFlag","providerType","setProviderType","Spinner","Card","isCompact","isLarge","CardBody","Label","color","icon","toLocaleDateString","toLocaleTimeString","chromeRef","cleanRequest","ChooseIdpType","configTypeChosen","setIsChecked","samlId","oidcId","Gallery","minWidths","default","isSelectable","isClickable","isClicked","isSelected","CardHeader","selectableActions","selectableActionId","selectableActionAriaLabelledby","hasNoOffset","CardTitle","Function","IdpSelector","configFlow","setConfigFlow","PageHeader","PageHeaderTitle","a","iconPosition","userToken","currentUser","updateUser","adminUser","selfServiceIDP","isSelfServiceIDPEnabled","appAction","parseToken","base64","decodeURIComponent","atob","c","charCodeAt","slice","isAdminUser","is_org_admin","getOrgId","org_id","setStateValue","stateObject","updateFunction","updatedValue","isBase64","str","decoded","decode64","encode64","isFailureTriggered","choices","failureTriggered","validationKey","field","submittedValue","submittedType","verificationObject","input","required","INVALID_CERT_MESSAGE","verified","results","sanitizedCertChainArray","firstCertInTheChain","verifyInput","getSSOBaseUrl","getEnvironment","getSSOApiUrl","apiPath"],"sourceRoot":""}